{"version":3,"sources":["webpack:///webpack/bootstrap e80a59f75dc16f57cdb5","webpack:///./src/utils.js","webpack:///./node_modules/core-js/library/fn/array/find.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./cedato/bidderFactory.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/core-js/library/fn/array/includes.js","webpack:///./src/mediaTypes.js","webpack:///./cedato/Renderer.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./cedato/config.js","webpack:///./cedato/bid-adapters.js","webpack:///./modules/appnexusBidAdapter.js","webpack:///./src/config.js","webpack:///./src/cpmBucketManager.js","webpack:///./node_modules/core-js/library/modules/es6.array.find.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./node_modules/core-js/library/modules/_array-methods.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./node_modules/core-js/library/modules/_array-species-create.js","webpack:///./node_modules/core-js/library/modules/_array-species-constructor.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/core-js/library/modules/es7.array.includes.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./src/hook.js","webpack:///./node_modules/fun-hooks/index.js","webpack:///./node_modules/just-clone/index.js","webpack:///./src/url.js","webpack:///./src/constants.json","webpack:///./modules/pubmaticBidAdapter.js","webpack:///./modules/spotxBidAdapter.js","webpack:///./cedato/utils.js","webpack:///./cedato/cedato-bid.js"],"names":["CONSTANTS","require","_loggingChecked","tArr","tStr","tFn","tNumb","tObject","tBoolean","toString","Object","prototype","consoleExists","Boolean","window","console","consoleLogExists","log","consoleInfoExists","info","consoleWarnExists","warn","consoleErrorExists","error","internal","checkCookieSupport","createTrackPixelIframeHtml","getWindowSelf","getWindowTop","getAncestorOrigins","getTopFrameReferrer","getWindowLocation","getTopWindowLocation","insertUserSyncIframe","insertElement","isFn","triggerPixel","logError","logWarn","logMessage","logInfo","uniqueRef","bind","a","b","Function","self","args","Array","slice","call","arguments","apply","concat","replaceTokenInString","str","map","token","_each","value","key","undefined","keyString","toUpperCase","re","RegExp","replace","getIncrementalInteger","count","getUniqueIdentifierStr","Math","random","substr","generateUUID","placeholder","_getRandomData","crypto","getRandomValues","Uint8Array","getBidIdParameter","paramsObj","tryAppendQueryString","existingUrl","encodeURIComponent","parseQueryStringParameters","queryObj","result","k","hasOwnProperty","transformAdServerTargetingObj","targeting","getOwnPropertyNames","length","getKeys","getValue","join","getAdUnitSizes","adUnit","sizes","mediaTypes","banner","isArray","bannerSizes","push","parseSizesInput","sizeObj","parsedSizes","split","sizeRegex","curSizePos","hasOwn","match","sizeArrayLength","parseGPTSingleSizeArray","i","singleSize","isNaN","inIframe","loc","e","parse","top","location","referrerLoc","currentWindow","parent","document","referrer","ancestorOrigins","getTopWindowUrl","href","getTopWindowReferrer","debugTurnedOn","decorateLog","prefix","unshift","hasConsoleLogger","config","getConfig","debug","getParameterByName","DEBUG_MODE","setConfig","createInvisibleIframe","f","createElement","id","height","width","border","hspace","vspace","marginWidth","marginHeight","style","scrolling","frameBorder","src","display","name","regexS","regex","results","exec","search","decodeURIComponent","hasValidBidRequest","paramObj","requiredParamsArr","adapter","found","findParam","addEventHandler","element","event","func","addEventListener","attachEvent","isA","object","_t","isStr","isNumber","isPlainObject","isBoolean","isEmpty","isEmptyStr","fn","forEach","l","contains","obj","indexOf","_map","callback","output","objectToCheck","propertyToCheckFor","constructor","elm","doc","target","asLastChildChild","parentEl","getElementsByTagName","insertBeforeEl","firstChild","insertBefore","url","done","img","Image","callBurl","source","burl","S2S","SRC","insertHtmlIntoIframe","htmlCode","iframe","allowtransparency","contentWindow","open","write","close","iframeHtml","div","innerHTML","createTrackPixelHtml","escapedUrl","encodeURI","encodeUri","sandbox","getIframeDocument","contentDocument","getValueString","param","val","defaultValue","uniques","index","arry","flatten","getBidRequest","bidderRequests","bidRequest","some","bidderRequest","find","bids","bid","type","keys","getKeyByValue","prop","getBidderCodes","adUnits","unit","bidder","reduce","filter","isGptPubadsDefined","googletag","pubads","getSlots","getHighestCpm","getHighestCpmCallback","previous","current","getOldestHighestCpmBid","getLatestHighestCpmBid","useTieBreakerProperty","tieBreakerCallback","cpm","shuffle","array","counter","floor","temp","adUnitsFilter","includes","adUnitCode","isSrcdocSupported","defaultView","frameElement","test","navigator","userAgent","deepClone","clone","isSafariBrowser","replaceAuctionPrice","timestamp","Date","getTime","cookieEnabled","cookie","cookiesAreEnabled","getCookie","m","delayExecution","numRequiredCalls","Error","numCalls","groupBy","xs","rv","x","deepAccess","path","String","createContentToExecuteExtScriptInFriendlyFrame","getDefinedParams","params","isValidMediaTypes","SUPPORTED_MEDIA_TYPES","SUPPORTED_STREAM_TYPES","types","every","video","context","getBidderRequest","bidRequests","request","start","auctionId","getUserConfiguredParams","code","bidderData","getOrigin","origin","protocol","hostname","port","getDNT","doNotTrack","msDoNotTrack","compareCodeAndSlot","slot","getAdUnitPath","getSlotElementId","isAdUnitCodeMatchingSlot","isSlotMatchingAdUnitCode","unsupportedBidderMessage","mediaType","deletePropertyFromObject","removeRequestId","isInteger","Number","isFinite","convertCamelToUnderscore","y","toLowerCase","transformBidderParamKeywords","keywords","paramName","arrs","v","values","tryConvertType","typeToConvert","convertTypes","setDataInLocalStorage","hasLocalStorage","localStorage","setItem","getDataFromLocalStorage","getItem","isArrayOfNums","size","fill","newArray","valueToPush","chunk","ceil","end","getMinValueFromArray","min","getMaxValueFromArray","max","adapters","registerBidder","spec","aliases","alias","getAdapter","getIabSubCategory","NATIVE","VIDEO","BANNER","ADPOD","Renderer","install","setRender","setEventHandlers","CEDATO_BID","BIDDER_CODE","URL","VIDEO_TARGETING","USER_PARAMS","APP_DEVICE_PARAMS","DEBUG_PARAMS","NATIVE_MAPPING","body","body2","cta","image","serverName","requiredParams","required","minimumParams","icon","sponsoredBy","privacyLink","salePrice","displayUrl","SOURCE","MAX_IMPS_PER_REQUEST","mappingFileUrl","supportedMediaTypes","isBidRequestValid","placementId","member","invCode","buildRequests","tags","bidToTag","userObjBid","hasUserInfo","userObj","user","appDeviceObjBid","hasAppDeviceInfo","appDeviceObj","app","appIdObjBid","hasAppId","appIdObj","appid","debugObj","debugObjParams","debugCookieName","debugCookie","utils","JSON","debugBidRequest","hasDebug","enabled","memberIdBid","hasMemberId","parseInt","payload","sdk","version","member_id","device","brand_category_uniqueness","stringify","gdprConsent","gdpr_consent","consent_string","consentString","consent_required","gdprApplies","refererInfo","refererinfo","rd_ref","referer","rd_top","reachedTop","rd_ifs","numIframes","rd_stk","stack","referrer_detection","hasAdPodBid","hasAdPod","adPodBid","adPodTags","createAdPodRequest","nonPodTags","tag","uuid","bidId","formatRequest","interpretResponse","serverResponse","errorMessage","bidderCode","serverBid","rtbBid","getRtbBid","ad_type","newBid","parseMediaType","debug_info","debugHeader","debugText","getMappingFileInfo","refreshInDays","getUserSyncs","syncOptions","iframeEnabled","transformBidParams","isOpenRtb","use_pmt_rule","usePaymentRule","isPopulatedArray","deleteValues","paramKey","convertedKey","arr","keyPairObj","clonedPayload","payloadString","method","data","newRenderer","rendererOptions","renderer","renderer_id","renderer_url","loaded","outstreamRender","err","impression","ended","querySelector","requestId","creativeId","creative_id","dealId","deal_id","currency","netRevenue","ttl","appnexus","buyerMemberId","buyer_member_id","dealPriority","deal_priority","dealCode","deal_code","rtb","player_width","player_height","vastUrl","asset_url","vastImpUrl","notify_url","videoContext","iabSubCatId","brand_category_id","meta","durationSeconds","duration_ms","adResponse","ad","ads","nativeAd","title","desc","desc2","ctatext","rating","sponsored","privacy_link","address","downloads","likes","phone","price","saleprice","clickUrl","link","displayurl","clickTrackers","click_trackers","impressionTrackers","impression_trackers","javascriptTrackers","javascript_trackers","main_img","content","trackers","impression_urls","tracker","transformSizes","primary_size","ad_types","allow_smaller_sizes","allowSmallerSizes","prebid","disable_psa","reserve","position","trafficSourceCode","traffic_source_code","privateSizes","private_sizes","supplyType","supply_type","pubClick","pubclick","extInvCode","ext_inv_code","externalImpId","external_imp_id","nativeParams","nativeRequest","buildNativeRequest","layouts","videoMediaType","require_asset_url","requestSizes","durationRangeSec","requireExactDuration","numberOfPlacements","getAdPodPlacementNumber","maxDuration","tagToDuplicate","divider","chunked","duration","setVideoProperty","videoParams","adPodDurationSec","minAllowedDuration","requestKey","adunitKeys","requiredKeys","remaining","ANOutstreamVideo","renderAd","tagId","tag_id","getSize","targetId","handleOutstreamRendererEvents","eventName","handleVideoEvent","adType","DEFAULT_DEBUG","DEFAULT_BIDDER_TIMEOUT","DEFAULT_PUBLISHER_DOMAIN","DEFAULT_ENABLE_SEND_ALL_BIDS","DEFAULT_DISABLE_AJAX_TIMEOUT","DEFAULT_BID_CACHE","DEFAULT_TIMEOUTBUFFER","RANDOM","FIXED","VALID_ORDERS","DEFAULT_BIDDER_SEQUENCE","GRANULARITY_OPTIONS","LOW","MEDIUM","HIGH","AUTO","DENSE","CUSTOM","ALL_TOPICS","newConfig","listeners","defaults","resetConfig","_debug","_bidderTimeout","bidderTimeout","_publisherDomain","publisherDomain","_priceGranularity","priceGranularity","validatePriceGranularity","hasGranularity","_customPriceBucket","customPriceBucket","_mediaTypePriceGranularity","mediaTypePriceGranularity","aggregate","item","_sendAllBids","enableSendAllBids","_useBidCache","useBidCache","_bidderSequence","bidderSequence","_timeoutBuffer","timeoutBuffer","_disableAjaxTimeout","disableAjaxTimeout","callSubscribers","memo","topic","option","isValidPriceConfig","subscribe","hook","options","topics","topicalConfig","setDefaults","listener","unsubscribe","splice","TOPICS","_defaultPrecision","_lgPriceConfig","_mgPriceConfig","_hgPriceConfig","_densePriceConfig","_autoPriceConfig","getPriceBucketString","customConfig","granularityMultiplier","cpmFloat","parseFloat","low","getCpmStringValue","med","high","auto","dense","custom","cpmStr","cap","buckets","prev","curr","bucket","precision","toFixed","getCpmTarget","isValid","increment","bucketMin","pow","cpmToFloor","cpmTarget","funHooks","ready","SYNC","ASYNC","QUEUE","getHook","get","setupBeforeHookFnOnce","baseFn","hookFn","priority","getHooks","before","parseQS","query","acc","criteria","formatQS","parsed","noDecodeWholeURL","qsAsString","decodeSearchAsString","pathname","hash","host","format","ENDPOINT","USYNCURL","DEFAULT_CURRENCY","AUCTION_TYPE","PUBMATIC_DIGITRUST_KEY","UNDEFINED","DEFAULT_WIDTH","DEFAULT_HEIGHT","PREBID_NATIVE_HELP_LINK","CUSTOM_PARAMS","DATA_TYPES","VIDEO_CUSTOM_PARAMS","ARRAY","NUMBER","NATIVE_ASSET_ID","NATIVE_ASSET_REVERSE_ID","NATIVE_ASSET_KEY","NATIVE_ASSET_IMAGE_TYPE","NATIVE_ASSET_DATA_TYPE","NATIVE_MINIMUM_REQUIRED_IMAGE_ASSETS","SPONSOREDBY","TITLE","IMAGE","NET_REVENUE","dealChannelValues","publisherId","isInvalidNativeRequest","_getDomainFromURL","anchor","_parseSlotParam","paramValue","trim","_cleanSlot","slotName","_parseAdSlot","adUnitIndex","sizesArrayExists","adSlot","splits","_initConf","conf","pageURL","refURL","_handleCustomParams","kadpageurl","entry","_createOrtbTemplate","at","cur","imp","site","page","ref","publisher","ua","js","dnt","h","screen","w","language","ext","_checkParamDataType","datatype","errMsg","BOOLEAN","STRING","_createNativeRequest","nativeRequestObject","assets","assetObj","len","wmin","minimumWidth","minsizes","hmin","minimumHeight","mimes","ICON","SPONSORED","BODY","DESC","minduration","maxduration","protocols","EXT","LOGO","RATING","LIKES","DOWNLOADS","PRICE","SALEPRICE","PHONE","ADDRESS","DESC2","DISPLAYURL","CTA","requiredAssetCount","presentrequiredAssetCount","ele","lengthOfExistingAssets","_createImpressionObject","impObj","bannerObj","videoObj","tagid","bidfloor","kadfloor","secure","pmZoneId","pmzoneid","bidfloorcur","videoData","playerSize","skippable","native","pos","topframe","_getDigiTrustObject","getDigiTrustId","digiTrustUser","DigiTrust","getUser","success","identity","digiTrustId","privacy","optout","_handleDigitrustId","eids","keyv","_handleTTDId","adsrvrOrgId","TDID","_handleEids","_parseNativeResponse","adm","ex","text","clicktrackers","imptrackers","jstracker","validBidRequests","bidCurrency","dctr","dctrLen","dctrArr","originalBid","pubId","transactionId","wrapper","profile","profId","verId","wiid","wv","wp","gender","geo","consent","regs","gdpr","lat","lon","yob","domain","substring","key_val","response","bidResponses","respCur","seatbid","seatbidder","parsedRequest","impid","crid","dealid","req","vastXml","deal_channel","responses","syncurl","ORTB_VERSION","outstream_options","isPageSecure","siteId","spotxRequests","channelId","pubcid","contentWidth","contentHeight","sdk_name","versionOrtb","ad_volume","ad_unit","outstream_function","preMarketBids","pre_market_bids","preMarketBid","vastStr","now","event_log","spotxReq","startdelay","crumbs","make","vendor","requestPayload","wrap_response","userExt","fpc","serverResponseBody","spotxBid","currentBidRequest","pmb","channel_id","cache_key","context1","context2","playersize","adText","content_page_url","ad_mute","hide_skin","createOutstreamScript","script","dataSpotXParams","playersizeAutoAdapt","ratio","slotClientWidth","getElementById","clientWidth","playerWidth","playerHeight","round","customOverride","setAttribute","nodeName","rawframe","framedoc","appendChild","message","shuffleArray","list","randomIndex","randomElement","adapterUserSyncsDone","requestBid","getBidRequests","processRequest","then","setTimeout","triggerUserSync","filterNonValid","unitBid","bidderRequestId","timeout","requestUrl","requestInit","mode","fetch","userSyncs","pixelEnabled"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;;AACA,IAAMA,SAAS,GAAGC,mBAAO,CAAC,EAAD,CAAzB;;AAEA,IAAIC,eAAe,GAAG,KAAtB;AAEA,IAAIC,IAAI,GAAG,OAAX;AACA,IAAIC,IAAI,GAAG,QAAX;AACA,IAAIC,GAAG,GAAG,UAAV;AACA,IAAIC,KAAK,GAAG,QAAZ;AACA,IAAIC,OAAO,GAAG,QAAd;AACA,IAAIC,QAAQ,GAAG,SAAf;AACA,IAAIC,QAAQ,GAAGC,MAAM,CAACC,SAAP,CAAiBF,QAAhC;AACA,IAAIG,aAAa,GAAGC,OAAO,CAACC,MAAM,CAACC,OAAR,CAA3B;AACA,IAAIC,gBAAgB,GAAGH,OAAO,CAACD,aAAa,IAAIE,MAAM,CAACC,OAAP,CAAeE,GAAjC,CAA9B;AACA,IAAIC,iBAAiB,GAAGL,OAAO,CAACD,aAAa,IAAIE,MAAM,CAACC,OAAP,CAAeI,IAAjC,CAA/B;AACA,IAAIC,iBAAiB,GAAGP,OAAO,CAACD,aAAa,IAAIE,MAAM,CAACC,OAAP,CAAeM,IAAjC,CAA/B;AACA,IAAIC,kBAAkB,GAAGT,OAAO,CAACD,aAAa,IAAIE,MAAM,CAACC,OAAP,CAAeQ,KAAjC,CAAhC,C,CAEA;;AACO,IAAMC,QAAQ,GAAG;AACtBC,oBAAkB,EAAlBA,kBADsB;AAEtBC,4BAA0B,EAA1BA,0BAFsB;AAGtBC,eAAa,EAAbA,aAHsB;AAItBC,cAAY,EAAZA,YAJsB;AAKtBC,oBAAkB,EAAlBA,kBALsB;AAMtBC,qBAAmB,EAAnBA,mBANsB;AAOtBC,mBAAiB,EAAjBA,iBAPsB;AAQtBC,sBAAoB,EAApBA,oBARsB;AAStBC,sBAAoB,EAApBA,oBATsB;AAUtBC,eAAa,EAAbA,aAVsB;AAWtBC,MAAI,EAAJA,IAXsB;AAYtBC,cAAY,EAAZA,YAZsB;AAatBC,UAAQ,EAARA,QAbsB;AActBC,SAAO,EAAPA,OAdsB;AAetBC,YAAU,EAAVA,UAfsB;AAgBtBC,SAAO,EAAPA;AAhBsB,CAAjB;AAmBP,IAAIC,SAAS,GAAG,EAAhB;AACO,IAAIC,IAAI,GAAG,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAAE,SAAOA,CAAP;AAAW,CAA5B,CAA6BF,IAA7B,CAAkC,IAAlC,EAAwC,CAAxC,EAA2CD,SAA3C,QAA4DA,SAA5D,GACdI,QAAQ,CAAClC,SAAT,CAAmB+B,IADL,GAEd,UAASA,IAAT,EAAe;AACf,MAAII,IAAI,GAAG,IAAX;AACA,MAAIC,IAAI,GAAGC,KAAK,CAACrC,SAAN,CAAgBsC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAsC,CAAtC,CAAX;AACA,SAAO,YAAW;AAChB,WAAOL,IAAI,CAACM,KAAL,CAAWV,IAAX,EAAiBK,IAAI,CAACM,MAAL,CAAYL,KAAK,CAACrC,SAAN,CAAgBsC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAZ,CAAjB,CAAP;AACD,GAFD;AAGD,CARI;AAUP;;;;;;;;;;AASO,SAASG,oBAAT,CAA8BC,GAA9B,EAAmCC,GAAnC,EAAwCC,KAAxC,EAA+C;AACpDC,OAAK,CAACF,GAAD,EAAM,UAAUG,KAAV,EAAiBC,GAAjB,EAAsB;AAC/BD,SAAK,GAAIA,KAAK,KAAKE,SAAX,GAAwB,EAAxB,GAA6BF,KAArC;AAEA,QAAIG,SAAS,GAAGL,KAAK,GAAGG,GAAG,CAACG,WAAJ,EAAR,GAA4BN,KAA5C;AACA,QAAIO,EAAE,GAAG,IAAIC,MAAJ,CAAWH,SAAX,EAAsB,GAAtB,CAAT;AAEAP,OAAG,GAAGA,GAAG,CAACW,OAAJ,CAAYF,EAAZ,EAAgBL,KAAhB,CAAN;AACD,GAPI,CAAL;;AASA,SAAOJ,GAAP;AACD;AAED;;AACA,IAAIY,qBAAqB,GAAI,YAAY;AACvC,MAAIC,KAAK,GAAG,CAAZ;AACA,SAAO,YAAY;AACjBA,SAAK;AACL,WAAOA,KAAP;AACD,GAHD;AAID,CAN2B,EAA5B,C,CAQA;;;AACO,SAASC,sBAAT,GAAkC;AACvC,SAAOF,qBAAqB,KAAKG,IAAI,CAACC,MAAL,GAAc9D,QAAd,CAAuB,EAAvB,EAA2B+D,MAA3B,CAAkC,CAAlC,CAAjC;AACD;AAED;;;;;;;AAMO,SAASC,YAAT,CAAsBC,WAAtB,EAAmC;AACxC,SAAOA,WAAW,GACd,CAACA,WAAW,GAAGC,cAAc,MAAMD,WAAW,GAAG,CAAjD,EAAoDjE,QAApD,CAA6D,EAA7D,CADc,GAEd,CAAC,CAAC,GAAD,IAAQ,CAAC,GAAT,GAAe,CAAC,GAAhB,GAAsB,CAAC,GAAvB,GAA6B,CAAC,IAA/B,EAAqCyD,OAArC,CAA6C,QAA7C,EAAuDO,YAAvD,CAFJ;AAGD;AAED;;;;;AAIA,SAASE,cAAT,GAA0B;AACxB,MAAI7D,MAAM,IAAIA,MAAM,CAAC8D,MAAjB,IAA2B9D,MAAM,CAAC8D,MAAP,CAAcC,eAA7C,EAA8D;AAC5D,WAAOD,MAAM,CAACC,eAAP,CAAuB,IAAIC,UAAJ,CAAe,CAAf,CAAvB,EAA0C,CAA1C,IAA+C,EAAtD;AACD,GAFD,MAEO;AACL,WAAOR,IAAI,CAACC,MAAL,KAAgB,EAAvB;AACD;AACF;;AAEM,SAASQ,iBAAT,CAA2BnB,GAA3B,EAAgCoB,SAAhC,EAA2C;AAChD,MAAIA,SAAS,IAAIA,SAAS,CAACpB,GAAD,CAA1B,EAAiC;AAC/B,WAAOoB,SAAS,CAACpB,GAAD,CAAhB;AACD;;AAED,SAAO,EAAP;AACD;AAEM,SAASqB,oBAAT,CAA8BC,WAA9B,EAA2CtB,GAA3C,EAAgDD,KAAhD,EAAuD;AAC5D,MAAIA,KAAJ,EAAW;AACT,WAAOuB,WAAW,IAAItB,GAAG,GAAG,GAAN,GAAYuB,kBAAkB,CAACxB,KAAD,CAA9B,GAAwC,GAA9D;AACD;;AAED,SAAOuB,WAAP;AACD,C,CAED;AACA;;AACO,SAASE,0BAAT,CAAoCC,QAApC,EAA8C;AACnD,MAAIC,MAAM,GAAG,EAAb;;AACA,OAAK,IAAIC,CAAT,IAAcF,QAAd,EAAwB;AACtB,QAAIA,QAAQ,CAACG,cAAT,CAAwBD,CAAxB,CAAJ,EAAgC;AAAED,YAAM,IAAIC,CAAC,GAAG,GAAJ,GAAUJ,kBAAkB,CAACE,QAAQ,CAACE,CAAD,CAAT,CAA5B,GAA4C,GAAtD;AAA4D;AAC/F;;AAED,SAAOD,MAAP;AACD,C,CAED;;AACO,SAASG,6BAAT,CAAuCC,SAAvC,EAAkD;AACvD;AACA,MAAIA,SAAS,IAAIhF,MAAM,CAACiF,mBAAP,CAA2BD,SAA3B,EAAsCE,MAAtC,GAA+C,CAAhE,EAAmE;AACjE,WAAOC,OAAO,CAACH,SAAD,CAAP,CACJlC,GADI,CACA,UAAAI,GAAG;AAAA,uBAAOA,GAAP,cAAcuB,kBAAkB,CAACW,QAAQ,CAACJ,SAAD,EAAY9B,GAAZ,CAAT,CAAhC;AAAA,KADH,EACiEmC,IADjE,CACsE,GADtE,CAAP;AAED,GAHD,MAGO;AACL,WAAO,EAAP;AACD;AACF;AAED;;;;;;;AAMO,SAASC,cAAT,CAAwBC,MAAxB,EAAgC;AACrC,MAAI,CAACA,MAAL,EAAa;AACX;AACD;;AAED,MAAIC,KAAK,GAAG,EAAZ;;AACA,MAAID,MAAM,CAACE,UAAP,IAAqBF,MAAM,CAACE,UAAP,CAAkBC,MAAvC,IAAiDpD,KAAK,CAACqD,OAAN,CAAcJ,MAAM,CAACE,UAAP,CAAkBC,MAAlB,CAAyBF,KAAvC,CAArD,EAAoG;AAClG,QAAII,WAAW,GAAGL,MAAM,CAACE,UAAP,CAAkBC,MAAlB,CAAyBF,KAA3C;;AACA,QAAIlD,KAAK,CAACqD,OAAN,CAAcC,WAAW,CAAC,CAAD,CAAzB,CAAJ,EAAmC;AACjCJ,WAAK,GAAGI,WAAR;AACD,KAFD,MAEO;AACLJ,WAAK,CAACK,IAAN,CAAWD,WAAX;AACD;AACF,GAPD,MAOO,IAAItD,KAAK,CAACqD,OAAN,CAAcJ,MAAM,CAACC,KAArB,CAAJ,EAAiC;AACtC,QAAIlD,KAAK,CAACqD,OAAN,CAAcJ,MAAM,CAACC,KAAP,CAAa,CAAb,CAAd,CAAJ,EAAoC;AAClCA,WAAK,GAAGD,MAAM,CAACC,KAAf;AACD,KAFD,MAEO;AACLA,WAAK,CAACK,IAAN,CAAWN,MAAM,CAACC,KAAlB;AACD;AACF;;AACD,SAAOA,KAAP;AACD;AAED;;;;;;AAKO,SAASM,eAAT,CAAyBC,OAAzB,EAAkC;AACvC,MAAIC,WAAW,GAAG,EAAlB,CADuC,CAGvC;;AACA,MAAI,OAAOD,OAAP,KAAmB,QAAvB,EAAiC;AAC/B;AACA,QAAIP,KAAK,GAAGO,OAAO,CAACE,KAAR,CAAc,GAAd,CAAZ,CAF+B,CAI/B;AACA;;AACA,QAAIC,SAAS,GAAG,gBAAhB;;AACA,QAAIV,KAAJ,EAAW;AACT,WAAK,IAAIW,UAAT,IAAuBX,KAAvB,EAA8B;AAC5B,YAAIY,MAAM,CAACZ,KAAD,EAAQW,UAAR,CAAN,IAA6BX,KAAK,CAACW,UAAD,CAAL,CAAkBE,KAAlB,CAAwBH,SAAxB,CAAjC,EAAqE;AACnEF,qBAAW,CAACH,IAAZ,CAAiBL,KAAK,CAACW,UAAD,CAAtB;AACD;AACF;AACF;AACF,GAdD,MAcO,IAAI,QAAOJ,OAAP,MAAmB,QAAvB,EAAiC;AACtC,QAAIO,eAAe,GAAGP,OAAO,CAACb,MAA9B,CADsC,CAGtC;;AACA,QAAIoB,eAAe,GAAG,CAAtB,EAAyB;AACvB;AACA,UAAIA,eAAe,KAAK,CAApB,IAAyB,OAAOP,OAAO,CAAC,CAAD,CAAd,KAAsB,QAA/C,IAA2D,OAAOA,OAAO,CAAC,CAAD,CAAd,KAAsB,QAArF,EAA+F;AAC7FC,mBAAW,CAACH,IAAZ,CAAiBU,uBAAuB,CAACR,OAAD,CAAxC;AACD,OAFD,MAEO;AACL;AACA,aAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,eAApB,EAAqCE,CAAC,EAAtC,EAA0C;AACxCR,qBAAW,CAACH,IAAZ,CAAiBU,uBAAuB,CAACR,OAAO,CAACS,CAAD,CAAR,CAAxC;AACD;AACF;AACF;AACF;;AAED,SAAOR,WAAP;AACD,C,CAED;AACA;;AACO,SAASO,uBAAT,CAAiCE,UAAjC,EAA6C;AAClD;AACA,MAAId,OAAO,CAACc,UAAD,CAAP,IAAuBA,UAAU,CAACvB,MAAX,KAAsB,CAA7C,IAAmD,CAACwB,KAAK,CAACD,UAAU,CAAC,CAAD,CAAX,CAAN,IAAyB,CAACC,KAAK,CAACD,UAAU,CAAC,CAAD,CAAX,CAAtF,EAAwG;AACtG,WAAOA,UAAU,CAAC,CAAD,CAAV,GAAgB,GAAhB,GAAsBA,UAAU,CAAC,CAAD,CAAvC;AACD;AACF;AAED;;;;AAGO,SAASnF,oBAAT,GAAgC;AACrC,MAAIqF,QAAQ,EAAZ,EAAgB;AACd,QAAIC,GAAJ;;AACA,QAAI;AACFA,SAAG,GAAG9F,QAAQ,CAACK,kBAAT,MAAiCL,QAAQ,CAACM,mBAAT,EAAvC;AACD,KAFD,CAEE,OAAOyF,CAAP,EAAU;AACV/E,aAAO,CAAC,sCAAD,EAAyC+E,CAAzC,CAAP;AACD;;AACD,QAAID,GAAJ,EAAS,OAAOE,2DAAK,CAACF,GAAD,EAAM;AAAC,8BAAwB;AAAzB,KAAN,CAAZ;AACV;;AACD,SAAO9F,QAAQ,CAACO,iBAAT,EAAP;AACD;AAED;;;;AAGO,SAASD,mBAAT,GAA+B;AACpC,MAAI;AACF;AACAhB,UAAM,CAAC2G,GAAP,CAAWC,QAAX,CAAoBjH,QAApB;AACA,QAAIkH,WAAW,GAAG,EAAlB;AACA,QAAIC,aAAJ;;AACA,OAAG;AACDA,mBAAa,GAAGA,aAAa,GAAGA,aAAa,CAACC,MAAjB,GAA0B/G,MAAvD;;AACA,UAAI8G,aAAa,CAACE,QAAd,IAA0BF,aAAa,CAACE,QAAd,CAAuBC,QAArD,EAA+D;AAC7DJ,mBAAW,GAAGC,aAAa,CAACE,QAAd,CAAuBC,QAArC;AACD;AACF,KALD,QAMOH,aAAa,KAAK9G,MAAM,CAAC2G,GANhC;;AAOA,WAAOE,WAAP;AACD,GAbD,CAaE,OAAOJ,CAAP,EAAU;AACV,WAAOzG,MAAM,CAACgH,QAAP,CAAgBC,QAAvB;AACD;AACF;AAED;;;;AAGO,SAASlG,kBAAT,GAA8B;AACnC,MAAIf,MAAM,CAACgH,QAAP,CAAgBJ,QAAhB,IAA4B5G,MAAM,CAACgH,QAAP,CAAgBJ,QAAhB,CAAyBM,eAArD,IACFlH,MAAM,CAACgH,QAAP,CAAgBJ,QAAhB,CAAyBM,eAAzB,CAAyCpC,MAAzC,IAAmD,CADrD,EACwD;AACtD,WAAO9E,MAAM,CAACgH,QAAP,CAAgBJ,QAAhB,CAAyBM,eAAzB,CAAyClH,MAAM,CAACgH,QAAP,CAAgBJ,QAAhB,CAAyBM,eAAzB,CAAyCpC,MAAzC,GAAkD,CAA3F,CAAP;AACD;AACF;AAEM,SAAShE,YAAT,GAAwB;AAC7B,SAAOd,MAAM,CAAC2G,GAAd;AACD;AAEM,SAAS9F,aAAT,GAAyB;AAC9B,SAAOb,MAAM,CAACgC,IAAd;AACD;AAEM,SAASf,iBAAT,GAA6B;AAClC,SAAOjB,MAAM,CAAC4G,QAAd;AACD;AAED;;;;AAGO,SAASO,eAAT,GAA2B;AAChC,MAAIC,IAAJ;;AACA,MAAI;AACFA,QAAI,GAAG1G,QAAQ,CAACQ,oBAAT,GAAgCkG,IAAvC;AACD,GAFD,CAEE,OAAOX,CAAP,EAAU;AACVW,QAAI,GAAG,EAAP;AACD;;AACD,SAAOA,IAAP;AACD;AAED;;;;AAGO,SAASC,oBAAT,GAAgC;AACrC,MAAI;AACF,WAAOrH,MAAM,CAAC2G,GAAP,CAAWK,QAAX,CAAoBC,QAA3B;AACD,GAFD,CAEE,OAAOR,CAAP,EAAU;AACV,WAAOO,QAAQ,CAACC,QAAhB;AACD;AACF;AAED;;;;AAGO,SAASxF,UAAT,GAAsB;AAC3B,MAAI6F,aAAa,MAAMpH,gBAAvB,EAAyC;AACvCD,WAAO,CAACE,GAAR,CAAYmC,KAAZ,CAAkBrC,OAAlB,EAA2BsH,WAAW,CAAClF,SAAD,EAAY,UAAZ,CAAtC;AACD;AACF;AAEM,SAASX,OAAT,GAAmB;AACxB,MAAI4F,aAAa,MAAMlH,iBAAvB,EAA0C;AACxCH,WAAO,CAACI,IAAR,CAAaiC,KAAb,CAAmBrC,OAAnB,EAA4BsH,WAAW,CAAClF,SAAD,EAAY,OAAZ,CAAvC;AACD;AACF;AAEM,SAASb,OAAT,GAAmB;AACxB,MAAI8F,aAAa,MAAMhH,iBAAvB,EAA0C;AACxCL,WAAO,CAACM,IAAR,CAAa+B,KAAb,CAAmBrC,OAAnB,EAA4BsH,WAAW,CAAClF,SAAD,EAAY,UAAZ,CAAvC;AACD;AACF;AAEM,SAASd,QAAT,GAAoB;AACzB,MAAI+F,aAAa,MAAM9G,kBAAvB,EAA2C;AACzCP,WAAO,CAACQ,KAAR,CAAc6B,KAAd,CAAoBrC,OAApB,EAA6BsH,WAAW,CAAClF,SAAD,EAAY,QAAZ,CAAxC;AACD;AACF;;AAED,SAASkF,WAAT,CAAqBtF,IAArB,EAA2BuF,MAA3B,EAAmC;AACjCvF,MAAI,GAAG,GAAGE,KAAH,CAASC,IAAT,CAAcH,IAAd,CAAP;AACAuF,QAAM,IAAIvF,IAAI,CAACwF,OAAL,CAAaD,MAAb,CAAV;AACAvF,MAAI,CAACwF,OAAL,CAAa,gGAAb;AACAxF,MAAI,CAACwF,OAAL,CAAa,UAAb;AACA,SAAOxF,IAAP;AACD;;AAEM,SAASyF,gBAAT,GAA4B;AACjC,SAAOxH,gBAAP;AACD;AAEM,SAASoH,aAAT,GAAyB;AAC9B,MAAIK,uDAAM,CAACC,SAAP,CAAiB,OAAjB,MAA8B,KAA9B,IAAuCxI,eAAe,KAAK,KAA/D,EAAsE;AACpE,QAAMyI,KAAK,GAAGC,kBAAkB,CAAC5I,SAAS,CAAC6I,UAAX,CAAlB,CAAyC9E,WAAzC,OAA2D,MAAzE;AACA0E,2DAAM,CAACK,SAAP,CAAiB;AAAEH,WAAK,EAALA;AAAF,KAAjB;AACAzI,mBAAe,GAAG,IAAlB;AACD;;AAED,SAAO,CAAC,CAACuI,uDAAM,CAACC,SAAP,CAAiB,OAAjB,CAAT;AACD;AAEM,SAASK,qBAAT,GAAiC;AACtC,MAAIC,CAAC,GAAGlB,QAAQ,CAACmB,aAAT,CAAuB,QAAvB,CAAR;AACAD,GAAC,CAACE,EAAF,GAAO7E,sBAAsB,EAA7B;AACA2E,GAAC,CAACG,MAAF,GAAW,CAAX;AACAH,GAAC,CAACI,KAAF,GAAU,CAAV;AACAJ,GAAC,CAACK,MAAF,GAAW,KAAX;AACAL,GAAC,CAACM,MAAF,GAAW,GAAX;AACAN,GAAC,CAACO,MAAF,GAAW,GAAX;AACAP,GAAC,CAACQ,WAAF,GAAgB,GAAhB;AACAR,GAAC,CAACS,YAAF,GAAiB,GAAjB;AACAT,GAAC,CAACU,KAAF,CAAQL,MAAR,GAAiB,GAAjB;AACAL,GAAC,CAACW,SAAF,GAAc,IAAd;AACAX,GAAC,CAACY,WAAF,GAAgB,GAAhB;AACAZ,GAAC,CAACa,GAAF,GAAQ,aAAR;AACAb,GAAC,CAACU,KAAF,CAAQI,OAAR,GAAkB,MAAlB;AACA,SAAOd,CAAP;AACD;AAED;;;;;AAIO,SAASJ,kBAAT,CAA4BmB,IAA5B,EAAkC;AACvC,MAAIC,MAAM,GAAG,WAAWD,IAAX,GAAkB,WAA/B;AACA,MAAIE,KAAK,GAAG,IAAIhG,MAAJ,CAAW+F,MAAX,CAAZ;AACA,MAAIE,OAAO,GAAGD,KAAK,CAACE,IAAN,CAAWrJ,MAAM,CAAC4G,QAAP,CAAgB0C,MAA3B,CAAd;;AACA,MAAIF,OAAO,KAAK,IAAhB,EAAsB;AACpB,WAAO,EAAP;AACD;;AAED,SAAOG,kBAAkB,CAACH,OAAO,CAAC,CAAD,CAAP,CAAWhG,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAAzB;AACD;AAED;;;;;;;AAMO,SAASoG,kBAAT,CAA4BC,QAA5B,EAAsCC,iBAAtC,EAAyDC,OAAzD,EAAkE;AACvE,MAAIC,KAAK,GAAG,KAAZ;;AAEA,WAASC,SAAT,CAAmBhH,KAAnB,EAA0BC,GAA1B,EAA+B;AAC7B,QAAIA,GAAG,KAAK4G,iBAAiB,CAACtD,CAAD,CAA7B,EAAkC;AAChCwD,WAAK,GAAG,IAAR;AACD;AACF;;AAED,OAAK,IAAIxD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsD,iBAAiB,CAAC5E,MAAtC,EAA8CsB,CAAC,EAA/C,EAAmD;AACjDwD,SAAK,GAAG,KAAR;;AAEAhH,SAAK,CAAC6G,QAAD,EAAWI,SAAX,CAAL;;AAEA,QAAI,CAACD,KAAL,EAAY;AACVrI,cAAQ,CAAC,uFAAuFmI,iBAAxF,EAA2GC,OAA3G,CAAR;AACA,aAAO,KAAP;AACD;AACF;;AAED,SAAO,IAAP;AACD,C,CAED;;AACO,SAASG,eAAT,CAAyBC,OAAzB,EAAkCC,KAAlC,EAAyCC,IAAzC,EAA+C;AACpD,MAAIF,OAAO,CAACG,gBAAZ,EAA8B;AAC5BH,WAAO,CAACG,gBAAR,CAAyBF,KAAzB,EAAgCC,IAAhC,EAAsC,IAAtC;AACD,GAFD,MAEO,IAAIF,OAAO,CAACI,WAAZ,EAAyB;AAC9BJ,WAAO,CAACI,WAAR,CAAoB,OAAOH,KAA3B,EAAkCC,IAAlC;AACD;AACF;AACD;;;;;;;;AAOO,SAASG,GAAT,CAAaC,MAAb,EAAqBC,EAArB,EAAyB;AAC9B,SAAO3K,QAAQ,CAACyC,IAAT,CAAciI,MAAd,MAA0B,aAAaC,EAAb,GAAkB,GAAnD;AACD;AAEM,SAASjJ,IAAT,CAAcgJ,MAAd,EAAsB;AAC3B,SAAOD,GAAG,CAACC,MAAD,EAAS9K,GAAT,CAAV;AACD;AAEM,SAASgL,KAAT,CAAeF,MAAf,EAAuB;AAC5B,SAAOD,GAAG,CAACC,MAAD,EAAS/K,IAAT,CAAV;AACD;AAEM,SAASiG,OAAT,CAAiB8E,MAAjB,EAAyB;AAC9B,SAAOD,GAAG,CAACC,MAAD,EAAShL,IAAT,CAAV;AACD;AAEM,SAASmL,QAAT,CAAkBH,MAAlB,EAA0B;AAC/B,SAAOD,GAAG,CAACC,MAAD,EAAS7K,KAAT,CAAV;AACD;AAEM,SAASiL,aAAT,CAAuBJ,MAAvB,EAA+B;AACpC,SAAOD,GAAG,CAACC,MAAD,EAAS5K,OAAT,CAAV;AACD;AAEM,SAASiL,SAAT,CAAmBL,MAAnB,EAA2B;AAChC,SAAOD,GAAG,CAACC,MAAD,EAAS3K,QAAT,CAAV;AACD;AAED;;;;;;;AAMO,SAASiL,OAAT,CAAiBN,MAAjB,EAAyB;AAC9B,MAAI,CAACA,MAAL,EAAa,OAAO,IAAP;;AACb,MAAI9E,OAAO,CAAC8E,MAAD,CAAP,IAAmBE,KAAK,CAACF,MAAD,CAA5B,EAAsC;AACpC,WAAO,EAAEA,MAAM,CAACvF,MAAP,GAAgB,CAAlB,CAAP;AACD;;AAED,OAAK,IAAIL,CAAT,IAAc4F,MAAd,EAAsB;AACpB,QAAI3F,cAAc,CAACtC,IAAf,CAAoBiI,MAApB,EAA4B5F,CAA5B,CAAJ,EAAoC,OAAO,KAAP;AACrC;;AAED,SAAO,IAAP;AACD;AAED;;;;;;AAKO,SAASmG,UAAT,CAAoBnI,GAApB,EAAyB;AAC9B,SAAO8H,KAAK,CAAC9H,GAAD,CAAL,KAAe,CAACA,GAAD,IAAQA,GAAG,CAACqC,MAAJ,KAAe,CAAtC,CAAP;AACD;AAED;;;;;;;AAMO,SAASlC,KAAT,CAAeyH,MAAf,EAAuBQ,EAAvB,EAA2B;AAChC,MAAIF,OAAO,CAACN,MAAD,CAAX,EAAqB;AACrB,MAAIhJ,IAAI,CAACgJ,MAAM,CAACS,OAAR,CAAR,EAA0B,OAAOT,MAAM,CAACS,OAAP,CAAeD,EAAf,EAAmB,IAAnB,CAAP;AAE1B,MAAIpG,CAAC,GAAG,CAAR;AACA,MAAIsG,CAAC,GAAGV,MAAM,CAACvF,MAAf;;AAEA,MAAIiG,CAAC,GAAG,CAAR,EAAW;AACT,WAAOtG,CAAC,GAAGsG,CAAX,EAActG,CAAC,EAAf;AAAmBoG,QAAE,CAACR,MAAM,CAAC5F,CAAD,CAAP,EAAYA,CAAZ,EAAe4F,MAAf,CAAF;AAAnB;AACD,GAFD,MAEO;AACL,SAAK5F,CAAL,IAAU4F,MAAV,EAAkB;AAChB,UAAI3F,cAAc,CAACtC,IAAf,CAAoBiI,MAApB,EAA4B5F,CAA5B,CAAJ,EAAoCoG,EAAE,CAACzI,IAAH,CAAQ,IAAR,EAAciI,MAAM,CAAC5F,CAAD,CAApB,EAAyBA,CAAzB;AACrC;AACF;AACF;AAEM,SAASuG,QAAT,CAAkBnJ,CAAlB,EAAqBoJ,GAArB,EAA0B;AAC/B,MAAIN,OAAO,CAAC9I,CAAD,CAAX,EAAgB;AACd,WAAO,KAAP;AACD;;AAED,MAAIR,IAAI,CAACQ,CAAC,CAACqJ,OAAH,CAAR,EAAqB;AACnB,WAAOrJ,CAAC,CAACqJ,OAAF,CAAUD,GAAV,MAAmB,CAAC,CAA3B;AACD;;AAED,MAAI7E,CAAC,GAAGvE,CAAC,CAACiD,MAAV;;AACA,SAAOsB,CAAC,EAAR,EAAY;AACV,QAAIvE,CAAC,CAACuE,CAAD,CAAD,KAAS6E,GAAb,EAAkB;AAChB,aAAO,IAAP;AACD;AACF;;AAED,SAAO,KAAP;AACD;AAEM,IAAIC,OAAO,GAAI,YAAY;AAChC,MAAIhJ,KAAK,CAACrC,SAAN,CAAgBqL,OAApB,EAA6B;AAC3B,WAAOhJ,KAAK,CAACrC,SAAN,CAAgBqL,OAAvB;AACD,GAH+B,CAKhC;AACA;;AACD,CAPqB,EAAf;AASP;;;;;;;;AAOO,SAASC,IAAT,CAAcd,MAAd,EAAsBe,QAAtB,EAAgC;AACrC,MAAIT,OAAO,CAACN,MAAD,CAAX,EAAqB,OAAO,EAAP;AACrB,MAAIhJ,IAAI,CAACgJ,MAAM,CAAC3H,GAAR,CAAR,EAAsB,OAAO2H,MAAM,CAAC3H,GAAP,CAAW0I,QAAX,CAAP;AACtB,MAAIC,MAAM,GAAG,EAAb;;AACAzI,OAAK,CAACyH,MAAD,EAAS,UAAUxH,KAAV,EAAiBC,GAAjB,EAAsB;AAClCuI,UAAM,CAAC5F,IAAP,CAAY2F,QAAQ,CAACvI,KAAD,EAAQC,GAAR,EAAauH,MAAb,CAApB;AACD,GAFI,CAAL;;AAIA,SAAOgB,MAAP;AACD;;AAED,IAAIrF,MAAM,GAAG,SAATA,MAAS,CAAUsF,aAAV,EAAyBC,kBAAzB,EAA6C;AACxD,MAAID,aAAa,CAAC5G,cAAlB,EAAkC;AAChC,WAAO4G,aAAa,CAAC5G,cAAd,CAA6B6G,kBAA7B,CAAP;AACD,GAFD,MAEO;AACL,WAAQ,OAAOD,aAAa,CAACC,kBAAD,CAApB,KAA6C,WAA9C,IAA+DD,aAAa,CAACE,WAAd,CAA0B3L,SAA1B,CAAoC0L,kBAApC,MAA4DD,aAAa,CAACC,kBAAD,CAA/I;AACD;AACF,CAND;AAQA;;;;;;;;;;AAQO,SAASnK,aAAT,CAAuBqK,GAAvB,EAA4BC,GAA5B,EAAiCC,MAAjC,EAAyCC,gBAAzC,EAA2D;AAChEF,KAAG,GAAGA,GAAG,IAAI1E,QAAb;AACA,MAAI6E,QAAJ;;AACA,MAAIF,MAAJ,EAAY;AACVE,YAAQ,GAAGH,GAAG,CAACI,oBAAJ,CAAyBH,MAAzB,CAAX;AACD,GAFD,MAEO;AACLE,YAAQ,GAAGH,GAAG,CAACI,oBAAJ,CAAyB,MAAzB,CAAX;AACD;;AACD,MAAI;AACFD,YAAQ,GAAGA,QAAQ,CAAC/G,MAAT,GAAkB+G,QAAlB,GAA6BH,GAAG,CAACI,oBAAJ,CAAyB,MAAzB,CAAxC;;AACA,QAAID,QAAQ,CAAC/G,MAAb,EAAqB;AACnB+G,cAAQ,GAAGA,QAAQ,CAAC,CAAD,CAAnB;AACA,UAAIE,cAAc,GAAGH,gBAAgB,GAAG,IAAH,GAAUC,QAAQ,CAACG,UAAxD;AACA,aAAOH,QAAQ,CAACI,YAAT,CAAsBR,GAAtB,EAA2BM,cAA3B,CAAP;AACD;AACF,GAPD,CAOE,OAAOtF,CAAP,EAAU,CAAE;AACf;AAED;;;;;;AAKO,SAASnF,YAAT,CAAsB4K,GAAtB,EAA2BC,IAA3B,EAAiC;AACtC,MAAMC,GAAG,GAAG,IAAIC,KAAJ,EAAZ;;AACA,MAAIF,IAAI,IAAIzL,QAAQ,CAACW,IAAT,CAAc8K,IAAd,CAAZ,EAAiC;AAC/BC,OAAG,CAAClC,gBAAJ,CAAqB,MAArB,EAA6BiC,IAA7B;AACAC,OAAG,CAAClC,gBAAJ,CAAqB,OAArB,EAA8BiC,IAA9B;AACD;;AACDC,KAAG,CAACrD,GAAJ,GAAUmD,GAAV;AACD;AAEM,SAASI,QAAT,OAAoC;AAAA,MAAhBC,MAAgB,QAAhBA,MAAgB;AAAA,MAARC,IAAQ,QAARA,IAAQ;;AACzC,MAAID,MAAM,KAAKrN,SAAS,CAACuN,GAAV,CAAcC,GAAzB,IAAgCF,IAApC,EAA0C;AACxC9L,YAAQ,CAACY,YAAT,CAAsBkL,IAAtB;AACD;AACF;AAED;;;;;;AAKO,SAASG,oBAAT,CAA8BC,QAA9B,EAAwC;AAC7C,MAAI,CAACA,QAAL,EAAe;AACb;AACD;;AAED,MAAIC,MAAM,GAAG7F,QAAQ,CAACmB,aAAT,CAAuB,QAAvB,CAAb;AACA0E,QAAM,CAACzE,EAAP,GAAY7E,sBAAsB,EAAlC;AACAsJ,QAAM,CAACvE,KAAP,GAAe,CAAf;AACAuE,QAAM,CAACxE,MAAP,GAAgB,CAAhB;AACAwE,QAAM,CAACrE,MAAP,GAAgB,GAAhB;AACAqE,QAAM,CAACpE,MAAP,GAAgB,GAAhB;AACAoE,QAAM,CAACnE,WAAP,GAAqB,GAArB;AACAmE,QAAM,CAAClE,YAAP,GAAsB,GAAtB;AACAkE,QAAM,CAACjE,KAAP,CAAaI,OAAb,GAAuB,MAAvB;AACA6D,QAAM,CAACjE,KAAP,CAAaP,MAAb,GAAsB,KAAtB;AACAwE,QAAM,CAACjE,KAAP,CAAaN,KAAb,GAAqB,KAArB;AACAuE,QAAM,CAAChE,SAAP,GAAmB,IAAnB;AACAgE,QAAM,CAAC/D,WAAP,GAAqB,GAArB;AACA+D,QAAM,CAACC,iBAAP,GAA2B,MAA3B;AAEApM,UAAQ,CAACU,aAAT,CAAuByL,MAAvB,EAA+B7F,QAA/B,EAAyC,MAAzC;AAEA6F,QAAM,CAACE,aAAP,CAAqB/F,QAArB,CAA8BgG,IAA9B;AACAH,QAAM,CAACE,aAAP,CAAqB/F,QAArB,CAA8BiG,KAA9B,CAAoCL,QAApC;AACAC,QAAM,CAACE,aAAP,CAAqB/F,QAArB,CAA8BkG,KAA9B;AACD;AAED;;;;;;;AAMO,SAAS/L,oBAAT,CAA8B+K,GAA9B,EAAmCC,IAAnC,EAAyC;AAC9C,MAAIgB,UAAU,GAAGzM,QAAQ,CAACE,0BAAT,CAAoCsL,GAApC,EAAyC,KAAzC,EAAgD,iCAAhD,CAAjB;AACA,MAAIkB,GAAG,GAAGpG,QAAQ,CAACmB,aAAT,CAAuB,KAAvB,CAAV;AACAiF,KAAG,CAACC,SAAJ,GAAgBF,UAAhB;AACA,MAAIN,MAAM,GAAGO,GAAG,CAACpB,UAAjB;;AACA,MAAIG,IAAI,IAAIzL,QAAQ,CAACW,IAAT,CAAc8K,IAAd,CAAZ,EAAiC;AAC/BU,UAAM,CAAC3C,gBAAP,CAAwB,MAAxB,EAAgCiC,IAAhC;AACAU,UAAM,CAAC3C,gBAAP,CAAwB,OAAxB,EAAiCiC,IAAjC;AACD;;AACDzL,UAAQ,CAACU,aAAT,CAAuByL,MAAvB,EAA+B7F,QAA/B,EAAyC,MAAzC,EAAiD,IAAjD;AACD;AAAA;AAED;;;;;;AAKO,SAASsG,oBAAT,CAA8BpB,GAA9B,EAAmC;AACxC,MAAI,CAACA,GAAL,EAAU;AACR,WAAO,EAAP;AACD;;AAED,MAAIqB,UAAU,GAAGC,SAAS,CAACtB,GAAD,CAA1B;AACA,MAAIE,GAAG,GAAG,qEAAV;AACAA,KAAG,IAAI,eAAemB,UAAf,GAA4B,UAAnC;AACA,SAAOnB,GAAP;AACD;AAAA;AAED;;;;;;;;AAOO,SAASxL,0BAAT,CAAoCsL,GAApC,EAAyE;AAAA,MAAhCuB,SAAgC,uEAApB,IAAoB;AAAA,MAAdC,OAAc,uEAAJ,EAAI;;AAC9E,MAAI,CAACxB,GAAL,EAAU;AACR,WAAO,EAAP;AACD;;AACD,MAAIuB,SAAJ,EAAe;AACbvB,OAAG,GAAGsB,SAAS,CAACtB,GAAD,CAAf;AACD;;AACD,MAAIwB,OAAJ,EAAa;AACXA,WAAO,uBAAeA,OAAf,OAAP;AACD;;AAED,2BAAkBA,OAAlB,mBAAiCnK,sBAAsB,EAAvD,0QAOW2I,GAPX;AASD;AAED;;;;;;AAKO,SAASyB,iBAAT,CAA2Bd,MAA3B,EAAmC;AACxC,MAAI,CAACA,MAAL,EAAa;AACX;AACD;;AAED,MAAInB,GAAJ;;AACA,MAAI;AACF,QAAImB,MAAM,CAACE,aAAX,EAA0B;AACxBrB,SAAG,GAAGmB,MAAM,CAACE,aAAP,CAAqB/F,QAA3B;AACD,KAFD,MAEO,IAAI6F,MAAM,CAACe,eAAP,CAAuB5G,QAA3B,EAAqC;AAC1C0E,SAAG,GAAGmB,MAAM,CAACe,eAAP,CAAuB5G,QAA7B;AACD,KAFM,MAEA;AACL0E,SAAG,GAAGmB,MAAM,CAACe,eAAb;AACD;AACF,GARD,CAQE,OAAOnH,CAAP,EAAU;AACV/F,YAAQ,CAACa,QAAT,CAAkB,4BAAlB,EAAgDkF,CAAhD;AACD;;AAED,SAAOiF,GAAP;AACD;AAEM,SAASmC,cAAT,CAAwBC,KAAxB,EAA+BC,GAA/B,EAAoCC,YAApC,EAAkD;AACvD,MAAID,GAAG,KAAKhL,SAAR,IAAqBgL,GAAG,KAAK,IAAjC,EAAuC;AACrC,WAAOC,YAAP;AACD;;AACD,MAAIzD,KAAK,CAACwD,GAAD,CAAT,EAAgB;AACd,WAAOA,GAAP;AACD;;AACD,MAAIvD,QAAQ,CAACuD,GAAD,CAAZ,EAAmB;AACjB,WAAOA,GAAG,CAACpO,QAAJ,EAAP;AACD;;AACDe,UAAQ,CAACc,OAAT,CAAiB,gCAAgCsM,KAAhC,GAAwC,wBAAzD;AACD;AAEM,SAASG,OAAT,CAAiBpL,KAAjB,EAAwBqL,KAAxB,EAA+BC,IAA/B,EAAqC;AAC1C,SAAOA,IAAI,CAACjD,OAAL,CAAarI,KAAb,MAAwBqL,KAA/B;AACD;AAEM,SAASE,OAAT,CAAiBvM,CAAjB,EAAoBC,CAApB,EAAuB;AAC5B,SAAOD,CAAC,CAACU,MAAF,CAAST,CAAT,CAAP;AACD;AAEM,SAASuM,aAAT,CAAuBjG,EAAvB,EAA2BkG,cAA3B,EAA2C;AAChD,MAAI,CAAClG,EAAL,EAAS;AACP;AACD;;AACD,MAAImG,UAAJ;AACAD,gBAAc,CAACE,IAAf,CAAoB,UAAAC,aAAa,EAAI;AACnC,QAAIjK,MAAM,GAAGkK,qEAAI,CAACD,aAAa,CAACE,IAAf,EAAqB,UAAAC,GAAG;AAAA,aAAI,CAAC,OAAD,EAAU,MAAV,EAAkB,QAAlB,EAA4BJ,IAA5B,CAAiC,UAAAK,IAAI;AAAA,eAAID,GAAG,CAACC,IAAD,CAAH,KAAczG,EAAlB;AAAA,OAArC,CAAJ;AAAA,KAAxB,CAAjB;;AACA,QAAI5D,MAAJ,EAAY;AACV+J,gBAAU,GAAG/J,MAAb;AACD;;AACD,WAAOA,MAAP;AACD,GAND;AAOA,SAAO+J,UAAP;AACD;AAEM,SAASxJ,OAAT,CAAiBkG,GAAjB,EAAsB;AAC3B,SAAOrL,MAAM,CAACkP,IAAP,CAAY7D,GAAZ,CAAP;AACD;AAEM,SAASjG,QAAT,CAAkBiG,GAAlB,EAAuBnI,GAAvB,EAA4B;AACjC,SAAOmI,GAAG,CAACnI,GAAD,CAAV;AACD;AAED;;;;AAGO,SAASiM,aAAT,CAAuB9D,GAAvB,EAA4BpI,KAA5B,EAAmC;AACxC,OAAK,IAAImM,IAAT,IAAiB/D,GAAjB,EAAsB;AACpB,QAAIA,GAAG,CAACvG,cAAJ,CAAmBsK,IAAnB,CAAJ,EAA8B;AAC5B,UAAI/D,GAAG,CAAC+D,IAAD,CAAH,KAAcnM,KAAlB,EAAyB;AACvB,eAAOmM,IAAP;AACD;AACF;AACF;AACF;AAEM,SAASC,cAAT,GAA6D;AAAA,MAArCC,OAAqC,uEAA3B,KAAkBA,OAAS;AAClE;AACA,SAAOA,OAAO,CAACxM,GAAR,CAAY,UAAAyM,IAAI;AAAA,WAAIA,IAAI,CAACR,IAAL,CAAUjM,GAAV,CAAc,UAAAkM,GAAG;AAAA,aAAIA,GAAG,CAACQ,MAAR;AAAA,KAAjB,EACxBC,MADwB,CACjBjB,OADiB,EACR,EADQ,CAAJ;AAAA,GAAhB,EACiBiB,MADjB,CACwBjB,OADxB,EACiCkB,MADjC,CACwCrB,OADxC,CAAP;AAED;AAEM,SAASsB,kBAAT,GAA8B;AACnC,MAAIvP,MAAM,CAACwP,SAAP,IAAoBnO,IAAI,CAACrB,MAAM,CAACwP,SAAP,CAAiBC,MAAlB,CAAxB,IAAqDpO,IAAI,CAACrB,MAAM,CAACwP,SAAP,CAAiBC,MAAjB,GAA0BC,QAA3B,CAA7D,EAAmG;AACjG,WAAO,IAAP;AACD;AACF,C,CAED;;AACO,IAAMC,aAAa,GAAGC,qBAAqB,CAAC,eAAD,EAAkB,UAACC,QAAD,EAAWC,OAAX;AAAA,SAAuBD,QAAQ,GAAGC,OAAlC;AAAA,CAAlB,CAA3C,C,CAEP;AACA;;AACO,IAAMC,sBAAsB,GAAGH,qBAAqB,CAAC,mBAAD,EAAsB,UAACC,QAAD,EAAWC,OAAX;AAAA,SAAuBD,QAAQ,GAAGC,OAAlC;AAAA,CAAtB,CAApD,C,CAEP;AACA;;AACO,IAAME,sBAAsB,GAAGJ,qBAAqB,CAAC,mBAAD,EAAsB,UAACC,QAAD,EAAWC,OAAX;AAAA,SAAuBD,QAAQ,GAAGC,OAAlC;AAAA,CAAtB,CAApD;;AAEP,SAASF,qBAAT,CAA+BK,qBAA/B,EAAsDC,kBAAtD,EAA0E;AACxE,SAAO,UAACL,QAAD,EAAWC,OAAX,EAAuB;AAC5B,QAAID,QAAQ,CAACM,GAAT,KAAiBL,OAAO,CAACK,GAA7B,EAAkC;AAChC,aAAOD,kBAAkB,CAACL,QAAQ,CAACI,qBAAD,CAAT,EAAkCH,OAAO,CAACG,qBAAD,CAAzC,CAAlB,GAAsFH,OAAtF,GAAgGD,QAAvG;AACD;;AACD,WAAOA,QAAQ,CAACM,GAAT,GAAeL,OAAO,CAACK,GAAvB,GAA6BL,OAA7B,GAAuCD,QAA9C;AACD,GALD;AAMD;AAED;;;;;;;;AAMO,SAASO,OAAT,CAAiBC,KAAjB,EAAwB;AAC7B,MAAIC,OAAO,GAAGD,KAAK,CAACvL,MAApB,CAD6B,CAG7B;;AACA,SAAOwL,OAAO,GAAG,CAAjB,EAAoB;AAClB;AACA,QAAIpC,KAAK,GAAG1K,IAAI,CAAC+M,KAAL,CAAW/M,IAAI,CAACC,MAAL,KAAgB6M,OAA3B,CAAZ,CAFkB,CAIlB;;AACAA,WAAO,GALW,CAOlB;;AACA,QAAIE,IAAI,GAAGH,KAAK,CAACC,OAAD,CAAhB;AACAD,SAAK,CAACC,OAAD,CAAL,GAAiBD,KAAK,CAACnC,KAAD,CAAtB;AACAmC,SAAK,CAACnC,KAAD,CAAL,GAAesC,IAAf;AACD;;AAED,SAAOH,KAAP;AACD;AAEM,SAASI,aAAT,CAAuBnB,MAAvB,EAA+BV,GAA/B,EAAoC;AACzC,SAAO8B,yEAAQ,CAACpB,MAAD,EAASV,GAAG,IAAIA,GAAG,CAAC+B,UAApB,CAAf;AACD;AAED;;;;;AAIO,SAASC,iBAAT,CAA2BlF,GAA3B,EAAgC;AACrC;AACA,SAAOA,GAAG,CAACmF,WAAJ,IAAmBnF,GAAG,CAACmF,WAAJ,CAAgBC,YAAnC,IACL,YAAYpF,GAAG,CAACmF,WAAJ,CAAgBC,YADvB,IACuC,CAAC,WAAWC,IAAX,CAAgBC,SAAS,CAACC,SAA1B,CAD/C;AAED;AAEM,SAASC,SAAT,CAAmBjG,GAAnB,EAAwB;AAC7B,SAAOkG,kDAAK,CAAClG,GAAD,CAAZ;AACD;AAEM,SAAS1E,QAAT,GAAoB;AACzB,MAAI;AACF,WAAO7F,QAAQ,CAACG,aAAT,OAA6BH,QAAQ,CAACI,YAAT,EAApC;AACD,GAFD,CAEE,OAAO2F,CAAP,EAAU;AACV,WAAO,IAAP;AACD;AACF;AAEM,SAAS2K,eAAT,GAA2B;AAChC,SAAO,iCAAiCL,IAAjC,CAAsCC,SAAS,CAACC,SAAhD,CAAP;AACD;AAEM,SAASI,mBAAT,CAA6B5O,GAA7B,EAAkC0N,GAAlC,EAAuC;AAC5C,MAAI,CAAC1N,GAAL,EAAU;AACV,SAAOA,GAAG,CAACW,OAAJ,CAAY,sBAAZ,EAAoC+M,GAApC,CAAP;AACD;AAEM,SAASmB,SAAT,GAAqB;AAC1B,SAAO,IAAIC,IAAJ,GAAWC,OAAX,EAAP;AACD;AAEM,SAAS7Q,kBAAT,GAA8B;AACnC,MAAIX,MAAM,CAACgR,SAAP,CAAiBS,aAAjB,IAAkC,CAAC,CAACzK,QAAQ,CAAC0K,MAAT,CAAgB5M,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;AACF;AACM,SAAS6M,iBAAT,GAA6B;AAClC,MAAIjR,QAAQ,CAACC,kBAAT,EAAJ,EAAmC;AACjC,WAAO,IAAP;AACD;;AACDX,QAAM,CAACgH,QAAP,CAAgB0K,MAAhB,GAAyB,mBAAzB;AACA,SAAO1R,MAAM,CAACgH,QAAP,CAAgB0K,MAAhB,CAAuBxG,OAAvB,CAA+B,mBAA/B,KAAuD,CAAC,CAA/D;AACD;AAEM,SAAS0G,SAAT,CAAmB3I,IAAnB,EAAyB;AAC9B,MAAI4I,CAAC,GAAG7R,MAAM,CAACgH,QAAP,CAAgB0K,MAAhB,CAAuBzL,KAAvB,CAA6B,cAAcgD,IAAd,GAAqB,2BAAlD,CAAR;AACA,SAAO4I,CAAC,GAAGtI,kBAAkB,CAACsI,CAAC,CAAC,CAAD,CAAF,CAArB,GAA8B,IAAtC;AACD;AAED;;;;;;;;;;;;;AAYO,SAASC,cAAT,CAAwB7H,IAAxB,EAA8B8H,gBAA9B,EAAgD;AACrD,MAAIA,gBAAgB,GAAG,CAAvB,EAA0B;AACxB,UAAM,IAAIC,KAAJ,2DAA6DD,gBAA7D,EAAN;AACD;;AACD,MAAIE,QAAQ,GAAG,CAAf;AACA,SAAO,YAAY;AACjBA,YAAQ;;AACR,QAAIA,QAAQ,KAAKF,gBAAjB,EAAmC;AACjC9H,UAAI,CAAC3H,KAAL,CAAW,IAAX,EAAiBD,SAAjB;AACD;AACF,GALD;AAMD;AAED;;;;;;;;AAOO,SAAS6P,OAAT,CAAiBC,EAAjB,EAAqBrP,GAArB,EAA0B;AAC/B,SAAOqP,EAAE,CAAC9C,MAAH,CAAU,UAAS+C,EAAT,EAAaC,CAAb,EAAgB;AAC/B,KAACD,EAAE,CAACC,CAAC,CAACvP,GAAD,CAAF,CAAF,GAAasP,EAAE,CAACC,CAAC,CAACvP,GAAD,CAAF,CAAF,IAAc,EAA5B,EAAgC2C,IAAhC,CAAqC4M,CAArC;AACA,WAAOD,EAAP;AACD,GAHM,EAGJ,EAHI,CAAP;AAID;AAED;;;;;;;AAMO,SAASE,UAAT,CAAoBrH,GAApB,EAAyBsH,IAAzB,EAA+B;AACpC,MAAI,CAACtH,GAAL,EAAU;AACR;AACD;;AACDsH,MAAI,GAAGC,MAAM,CAACD,IAAD,CAAN,CAAa1M,KAAb,CAAmB,GAAnB,CAAP;;AACA,OAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmM,IAAI,CAACzN,MAAzB,EAAiCsB,CAAC,EAAlC,EAAsC;AACpC6E,OAAG,GAAGA,GAAG,CAACsH,IAAI,CAACnM,CAAD,CAAL,CAAT;;AACA,QAAI,OAAO6E,GAAP,KAAe,WAAnB,EAAgC;AAC9B;AACD;AACF;;AACD,SAAOA,GAAP;AACD;AAED;;;;;;AAKO,SAASwH,8CAAT,CAAwDvG,GAAxD,EAA6D;AAClE,MAAI,CAACA,GAAL,EAAU;AACR,WAAO,EAAP;AACD;;AAED,qPAAqOA,GAArO;AACD;AAED;;;;;;;;AAOO,SAASwG,gBAAT,CAA0BrI,MAA1B,EAAkCsI,MAAlC,EAA0C;AAC/C,SAAOA,MAAM,CACVrD,MADI,CACG,UAAAxB,KAAK;AAAA,WAAIzD,MAAM,CAACyD,KAAD,CAAV;AAAA,GADR,EAEJuB,MAFI,CAEG,UAACT,GAAD,EAAMd,KAAN;AAAA,WAAgB,SAAcc,GAAd,sBAAsBd,KAAtB,EAA8BzD,MAAM,CAACyD,KAAD,CAApC,EAAhB;AAAA,GAFH,EAEmE,EAFnE,CAAP;AAGD;AAED;;;;;;;AAOA;;;;;;AAKO,SAAS8E,iBAAT,CAA2BvN,UAA3B,EAAuC;AAC5C,MAAMwN,qBAAqB,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,OAArB,CAA9B;AACA,MAAMC,sBAAsB,GAAG,CAAC,UAAD,EAAa,WAAb,EAA0B,OAA1B,CAA/B;AAEA,MAAMC,KAAK,GAAGnT,MAAM,CAACkP,IAAP,CAAYzJ,UAAZ,CAAd;;AAEA,MAAI,CAAC0N,KAAK,CAACC,KAAN,CAAY,UAAAnE,IAAI;AAAA,WAAI6B,yEAAQ,CAACmC,qBAAD,EAAwBhE,IAAxB,CAAZ;AAAA,GAAhB,CAAL,EAAiE;AAC/D,WAAO,KAAP;AACD;;AAED,MAAIxJ,UAAU,CAAC4N,KAAX,IAAoB5N,UAAU,CAAC4N,KAAX,CAAiBC,OAAzC,EAAkD;AAChD,WAAOxC,yEAAQ,CAACoC,sBAAD,EAAyBzN,UAAU,CAAC4N,KAAX,CAAiBC,OAA1C,CAAf;AACD;;AAED,SAAO,IAAP;AACD;AAEM,SAASC,gBAAT,CAA0BC,WAA1B,EAAuChE,MAAvC,EAA+CuB,UAA/C,EAA2D;AAChE,SAAOjC,qEAAI,CAAC0E,WAAD,EAAc,UAAAC,OAAO,EAAI;AAClC,WAAOA,OAAO,CAAC1E,IAAR,CACJW,MADI,CACG,UAAAV,GAAG;AAAA,aAAIA,GAAG,CAACQ,MAAJ,KAAeA,MAAf,IAAyBR,GAAG,CAAC+B,UAAJ,KAAmBA,UAAhD;AAAA,KADN,EACkE7L,MADlE,GAC2E,CADlF;AAED,GAHU,CAAJ,IAGD;AAAEwO,SAAK,EAAE,IAAT;AAAeC,aAAS,EAAE;AAA1B,GAHN;AAID;AACD;;;;;;;;AAOO,SAASC,uBAAT,CAAiCtE,OAAjC,EAA0CyB,UAA1C,EAAsDvB,MAAtD,EAA8D;AACnE,SAAOF,OAAO,CACXI,MADI,CACG,UAAAnK,MAAM;AAAA,WAAIA,MAAM,CAACsO,IAAP,KAAgB9C,UAApB;AAAA,GADT,EAEJjO,GAFI,CAEA,UAACyC,MAAD;AAAA,WAAYA,MAAM,CAACwJ,IAAnB;AAAA,GAFA,EAGJU,MAHI,CAGGjB,OAHH,EAGY,EAHZ,EAIJkB,MAJI,CAIG,UAACoE,UAAD;AAAA,WAAgBA,UAAU,CAACtE,MAAX,KAAsBA,MAAtC;AAAA,GAJH,EAKJ1M,GALI,CAKA,UAACgR,UAAD;AAAA,WAAgBA,UAAU,CAACf,MAAX,IAAqB,EAArC;AAAA,GALA,CAAP;AAMD;AACD;;;;AAGO,SAASgB,SAAT,GAAqB;AAC1B;AACA,MAAI,CAAC3T,MAAM,CAAC4G,QAAP,CAAgBgN,MAArB,EAA6B;AAC3B,WAAO5T,MAAM,CAAC4G,QAAP,CAAgBiN,QAAhB,GAA2B,IAA3B,GAAkC7T,MAAM,CAAC4G,QAAP,CAAgBkN,QAAlD,IAA8D9T,MAAM,CAAC4G,QAAP,CAAgBmN,IAAhB,GAAuB,MAAM/T,MAAM,CAAC4G,QAAP,CAAgBmN,IAA7C,GAAoD,EAAlH,CAAP;AACD,GAFD,MAEO;AACL,WAAO/T,MAAM,CAAC4G,QAAP,CAAgBgN,MAAvB;AACD;AACF;AAED;;;;AAGO,SAASI,MAAT,GAAkB;AACvB,SAAOhD,SAAS,CAACiD,UAAV,KAAyB,GAAzB,IAAgCjU,MAAM,CAACiU,UAAP,KAAsB,GAAtD,IAA6DjD,SAAS,CAACkD,YAAV,KAA2B,GAAxF,IAA+FlD,SAAS,CAACiD,UAAV,KAAyB,KAA/H;AACD;;AAED,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,IAAD,EAAOzD,UAAP;AAAA,SAAsByD,IAAI,CAACC,aAAL,OAAyB1D,UAAzB,IAAuCyD,IAAI,CAACE,gBAAL,OAA4B3D,UAAzF;AAAA,CAA3B;AAEA;;;;;;;AAKO,SAAS4D,wBAAT,CAAkCH,IAAlC,EAAwC;AAC7C,SAAO,UAACzD,UAAD;AAAA,WAAgBwD,kBAAkB,CAACC,IAAD,EAAOzD,UAAP,CAAlC;AAAA,GAAP;AACD;AAED;;;;;;AAKO,SAAS6D,wBAAT,CAAkC7D,UAAlC,EAA8C;AACnD,SAAO,UAACyD,IAAD;AAAA,WAAUD,kBAAkB,CAACC,IAAD,EAAOzD,UAAP,CAA5B;AAAA,GAAP;AACD;AAED;;;;;;;AAMO,SAAS8D,wBAAT,CAAkCtP,MAAlC,EAA0CiK,MAA1C,EAAkD;AACvD,MAAMsF,SAAS,GAAG9U,MAAM,CAACkP,IAAP,CAAY3J,MAAM,CAACE,UAAP,IAAqB;AAAC,cAAU;AAAX,GAAjC,EAAuDJ,IAAvD,CAA4D,IAA5D,CAAlB;AAEA,yBACIE,MAAM,CAACsO,IADX,mBACwBiB,SADxB,iEAE0CA,SAF1C,eAEwDtF,MAFxD;AAKD;AAED;;;;;;;AAMO,SAASuF,wBAAT,CAAkCtK,MAAlC,EAA0C2E,IAA1C,EAAgD;AACrD,MAAIxK,MAAM,GAAG,SAAc,EAAd,EAAkB6F,MAAlB,CAAb;;AACA,SAAO7F,MAAM,CAACwK,IAAD,CAAb;AACA,SAAOxK,MAAP;AACD;AAED;;;;;;AAKO,SAASoQ,eAAT,CAAyBhG,GAAzB,EAA8B;AACnC,SAAO+F,wBAAwB,CAAC/F,GAAD,EAAM,WAAN,CAA/B;AACD;AAED;;;;;;AAKO,SAASiG,SAAT,CAAmBhS,KAAnB,EAA0B;AAC/B,MAAIiS,MAAM,CAACD,SAAX,EAAsB;AACpB,WAAOC,MAAM,CAACD,SAAP,CAAiBhS,KAAjB,CAAP;AACD,GAFD,MAEO;AACL,WAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BkS,QAAQ,CAAClS,KAAD,CAArC,IAAgDW,IAAI,CAAC+M,KAAL,CAAW1N,KAAX,MAAsBA,KAA7E;AACD;AACF;AAED;;;;;AAIO,SAASmS,wBAAT,CAAkCnS,KAAlC,EAAyC;AAC9C,SAAOA,KAAK,CAACO,OAAN,CAAc,mBAAd,EAAmC,UAAUiP,CAAV,EAAa4C,CAAb,EAAgB;AAAE,WAAO,MAAMA,CAAC,CAACC,WAAF,EAAb;AAA8B,GAAnF,EAAqF9R,OAArF,CAA6F,IAA7F,EAAmG,EAAnG,CAAP;AACD;AAED;;;;;;;;;AAQO,SAAS+R,4BAAT,CAAsCC,QAAtC,EAAwE;AAAA,MAAxBC,SAAwB,uEAAZ,UAAY;AAC7E,MAAIC,IAAI,GAAG,EAAX;;AAEA1S,OAAK,CAACwS,QAAD,EAAW,UAACG,CAAD,EAAI9Q,CAAJ,EAAU;AACxB,QAAIc,OAAO,CAACgQ,CAAD,CAAX,EAAgB;AACd,UAAIC,MAAM,GAAG,EAAb;;AACA5S,WAAK,CAAC2S,CAAD,EAAI,UAACxH,GAAD,EAAS;AAChBA,WAAG,GAAGF,cAAc,CAACwH,SAAS,GAAG,GAAZ,GAAkB5Q,CAAnB,EAAsBsJ,GAAtB,CAApB;;AACA,YAAIA,GAAG,IAAIA,GAAG,KAAK,EAAnB,EAAuB;AAAEyH,gBAAM,CAAC/P,IAAP,CAAYsI,GAAZ;AAAmB;AAC7C,OAHI,CAAL;;AAIAwH,OAAC,GAAGC,MAAJ;AACD,KAPD,MAOO;AACLD,OAAC,GAAG1H,cAAc,CAACwH,SAAS,GAAG,GAAZ,GAAkB5Q,CAAnB,EAAsB8Q,CAAtB,CAAlB;;AACA,UAAIhL,KAAK,CAACgL,CAAD,CAAT,EAAc;AACZA,SAAC,GAAG,CAACA,CAAD,CAAJ;AACD,OAFD,MAEO;AACL;AACD,OANI,CAMH;;AACH;;AACDD,QAAI,CAAC7P,IAAL,CAAU;AAAC3C,SAAG,EAAE2B,CAAN;AAAS5B,WAAK,EAAE0S;AAAhB,KAAV;AACD,GAjBI,CAAL;;AAmBA,SAAOD,IAAP;AACD;AAED;;;;;;;;AAOA,SAASG,cAAT,CAAwBC,aAAxB,EAAuC7S,KAAvC,EAA8C;AAC5C,MAAI6S,aAAa,KAAK,QAAtB,EAAgC;AAC9B,WAAO7S,KAAK,IAAIA,KAAK,CAAClD,QAAN,EAAhB;AACD,GAFD,MAEO,IAAI+V,aAAa,KAAK,QAAtB,EAAgC;AACrC,WAAOZ,MAAM,CAACjS,KAAD,CAAb;AACD,GAFM,MAEA;AACL,WAAOA,KAAP;AACD;AACF;;AAEM,SAAS8S,YAAT,CAAsB5C,KAAtB,EAA6BJ,MAA7B,EAAqC;AAC1C/S,QAAM,CAACkP,IAAP,CAAYiE,KAAZ,EAAmBjI,OAAnB,CAA2B,UAAAhI,GAAG,EAAI;AAChC,QAAI6P,MAAM,CAAC7P,GAAD,CAAV,EAAiB;AACf,UAAIzB,IAAI,CAAC0R,KAAK,CAACjQ,GAAD,CAAN,CAAR,EAAsB;AACpB6P,cAAM,CAAC7P,GAAD,CAAN,GAAciQ,KAAK,CAACjQ,GAAD,CAAL,CAAW6P,MAAM,CAAC7P,GAAD,CAAjB,CAAd;AACD,OAFD,MAEO;AACL6P,cAAM,CAAC7P,GAAD,CAAN,GAAc2S,cAAc,CAAC1C,KAAK,CAACjQ,GAAD,CAAN,EAAa6P,MAAM,CAAC7P,GAAD,CAAnB,CAA5B;AACD,OALc,CAOf;;;AACA,UAAIwD,KAAK,CAACqM,MAAM,CAAC7P,GAAD,CAAP,CAAT,EAAwB;AACtB,eAAO6P,MAAM,CAAC7P,GAAd;AACD;AACF;AACF,GAbD;AAcA,SAAO6P,MAAP;AACD;AAEM,SAASiD,qBAAT,CAA+B9S,GAA/B,EAAoCD,KAApC,EAA2C;AAChD,MAAIgT,eAAe,EAAnB,EAAuB;AACrB7V,UAAM,CAAC8V,YAAP,CAAoBC,OAApB,CAA4BjT,GAA5B,EAAiCD,KAAjC;AACD;AACF;AAEM,SAASmT,uBAAT,CAAiClT,GAAjC,EAAsC;AAC3C,MAAI+S,eAAe,EAAnB,EAAuB;AACrB,WAAO7V,MAAM,CAAC8V,YAAP,CAAoBG,OAApB,CAA4BnT,GAA5B,CAAP;AACD;AACF;AAEM,SAAS+S,eAAT,GAA2B;AAChC,MAAI;AACF,WAAO,CAAC,CAAC7V,MAAM,CAAC8V,YAAhB;AACD,GAFD,CAEE,OAAOrP,CAAP,EAAU;AACVlF,YAAQ,CAAC,4BAAD,CAAR;AACD;AACF;AAEM,SAAS2U,aAAT,CAAuBnI,GAAvB,EAA4BoI,IAA5B,EAAkC;AACvC,SAAQ5Q,OAAO,CAACwI,GAAD,CAAR,KAAoBoI,IAAD,GAASpI,GAAG,CAACjJ,MAAJ,KAAeqR,IAAxB,GAA+B,IAAlD,KAA4DpI,GAAG,CAACiF,KAAJ,CAAU,UAAAuC,CAAC;AAAA,WAAIV,SAAS,CAACU,CAAD,CAAb;AAAA,GAAX,CAAnE;AACD;AAED;;;;AAGO,SAASa,IAAT,CAAcvT,KAAd,EAAqBiC,MAArB,EAA6B;AAClC,MAAIuR,QAAQ,GAAG,EAAf;;AAEA,OAAK,IAAIjQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtB,MAApB,EAA4BsB,CAAC,EAA7B,EAAiC;AAC/B,QAAIkQ,WAAW,GAAG7L,aAAa,CAAC5H,KAAD,CAAb,GAAuBqO,SAAS,CAACrO,KAAD,CAAhC,GAA0CA,KAA5D;AACAwT,YAAQ,CAAC5Q,IAAT,CAAc6Q,WAAd;AACD;;AAED,SAAOD,QAAP;AACD;AAED;;;;;;;;;AAQO,SAASE,KAAT,CAAelG,KAAf,EAAsB8F,IAAtB,EAA4B;AACjC,MAAIE,QAAQ,GAAG,EAAf;;AAEA,OAAK,IAAIjQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5C,IAAI,CAACgT,IAAL,CAAUnG,KAAK,CAACvL,MAAN,GAAeqR,IAAzB,CAApB,EAAoD/P,CAAC,EAArD,EAAyD;AACvD,QAAIkN,KAAK,GAAGlN,CAAC,GAAG+P,IAAhB;AACA,QAAIM,GAAG,GAAGnD,KAAK,GAAG6C,IAAlB;AACAE,YAAQ,CAAC5Q,IAAT,CAAc4K,KAAK,CAAClO,KAAN,CAAYmR,KAAZ,EAAmBmD,GAAnB,CAAd;AACD;;AAED,SAAOJ,QAAP;AACD;AAEM,SAASK,oBAAT,CAA8BrG,KAA9B,EAAqC;AAC1C,SAAO7M,IAAI,CAACmT,GAAL,OAAAnT,IAAI,qBAAQ6M,KAAR,EAAX;AACD;AAEM,SAASuG,oBAAT,CAA8BvG,KAA9B,EAAqC;AAC1C,SAAO7M,IAAI,CAACqT,GAAL,OAAArT,IAAI,qBAAQ6M,KAAR,EAAX;AACD,C;;;;;;AC7vCD,mBAAO,CAAC,EAA8B;AACtC,iBAAiB,mBAAO,CAAC,CAAqB;;;;;;;ACD9C;AACA;AACA;AACA;AACA;AACA,yCAAyC;;;;;;;ACLzC,6BAA6B;AAC7B,uCAAuC;;;;;;;ACDvC;AACA;AACA;;;;;;;;ACFA;AAAA;AAAA;AAAA,IAAMyG,QAAQ,GAAG,EAAjB;AACO,SAASC,cAAT,CAAwBC,IAAxB,EAA8B;AACnC,MAAMC,OAAO,GAAG/U,KAAK,CAACqD,OAAN,CAAcyR,IAAI,CAACC,OAAnB,IAA8BD,IAAI,CAACC,OAAnC,GAA6C,EAA7D;AACAA,SAAO,CAACxR,IAAR,CAAauR,IAAI,CAACvD,IAAlB;AACAwD,SAAO,CAACnM,OAAR,CAAgB,UAAAoM,KAAK,EAAI;AACvBJ,YAAQ,CAACrR,IAAT,CAAc;AACZgO,UAAI,EAAEyD,KADM;AAEZF,UAAI,EAAJA;AAFY,KAAd;AAID,GALD;AAMD;AACM,SAASG,UAAT,CAAoBvI,GAApB,EAAyB;AAC9B,MAAI,CAACA,GAAD,IAAQ,CAACA,GAAG,CAACQ,MAAjB,EAAyB;AACvB,WAAO,IAAP;AACD;;AAED,MAAI4H,IAAJ;;AACA,wBAAsBF,QAAtB,eAAgC;AAA3B,QAAMnN,OAAO,GAAImN,QAAJ,IAAb;;AACH,QAAInN,OAAO,CAAC8J,IAAR,IAAgB7E,GAAG,CAACQ,MAAxB,EAAgC;AAC9B4H,UAAI,GAAGrN,OAAO,CAACqN,IAAf;AACA;AACD;AACF;;AACD,SAAOA,IAAP;AACD;AACM,SAASI,iBAAT,GAA6B;AAAE,SAAO,EAAP;AAAY,C;;;;;;ACzBlD;AACA,kBAAkB,mBAAO,CAAC,EAAU;AACpC,iCAAiC,QAAQ,mBAAmB,UAAU,EAAE,EAAE;AAC1E,CAAC;;;;;;;ACHD,mBAAO,CAAC,EAAkC;AAC1C,iBAAiB,mBAAO,CAAC,CAAqB;;;;;;;;ACD9C;AAAA;AAAA;AAAA;AAAA;;;;;;;AAOA;;;;;AAKA;AACO,IAAMC,MAAM,GAAG,QAAf;AACP;;AACO,IAAMC,KAAK,GAAG,OAAd;AACP;;AACO,IAAMC,MAAM,GAAG,QAAf;AACP;;AACO,IAAMC,KAAK,GAAG,OAAd,C;;;;;;;ACnBP;AAAO,IAAMC,QAAQ,GAAG;AACtBC,SAAO,EAAE;AAAA,WAAO;AACdC,eAAS,EAAE,qBAAM,CAAG,CADN;AAEdC,sBAAgB,EAAE,4BAAM,CAAG;AAFb,KAAP;AAAA;AADa,CAAjB,C;;;;;;ACAP,aAAa,mBAAO,CAAC,CAAW;AAChC,WAAW,mBAAO,CAAC,CAAS;AAC5B,UAAU,mBAAO,CAAC,EAAQ;AAC1B,WAAW,mBAAO,CAAC,EAAS;AAC5B,UAAU,mBAAO,CAAC,EAAQ;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,kFAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB;;;;;;;AC7DA;AACA,gBAAgB,mBAAO,CAAC,EAAe;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnBA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;ACNA;AACA,UAAU,mBAAO,CAAC,EAAQ;AAC1B;AACA;AACA;AACA;;;;;;;ACLA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA,gBAAgB,mBAAO,CAAC,EAAe;AACvC;AACA;AACA,2DAA2D;AAC3D;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACLA,8BAA8B;;;;;;;;ACA9B;AAAO,IAAMjQ,MAAM,GAAG;AACpBC,WAAS,EAAE;AAAA,WAAM,KAAN;AAAA;AADS,CAAf,C;;;;;;;ACAP;AAAA;AAAA;AAEA5H,MAAM,CAAC6X,UAAP,GAAoBA,yCAApB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMC,WAAW,GAAG,UAApB;AACA,IAAMC,GAAG,GAAG,6BAAZ;AACA,IAAMC,eAAe,GAAG,CAAC,IAAD,EAAO,OAAP,EAAgB,aAAhB,EAA+B,aAA/B,EACtB,YADsB,EACR,WADQ,EACK,iBADL,EACwB,YADxB,CAAxB;AAEA,IAAMC,WAAW,GAAG,CAAC,KAAD,EAAQ,cAAR,EAAwB,UAAxB,EAAoC,QAApC,EAA8C,KAA9C,EAAqD,UAArD,CAApB;AACA,IAAMC,iBAAiB,GAAG,CAAC,KAAD,EAAQ,WAAR,CAA1B,C,CAAgD;;AAChD,IAAMC,YAAY,GAAG,CAAC,SAAD,EAAY,QAAZ,EAAsB,WAAtB,EAAmC,eAAnC,CAArB;AACA,IAAMC,cAAc,GAAG;AACrBC,MAAI,EAAE,aADe;AAErBC,OAAK,EAAE,OAFc;AAGrBC,KAAG,EAAE,SAHgB;AAIrBC,OAAK,EAAE;AACLC,cAAU,EAAE,YADP;AAELC,kBAAc,EAAE;AAAEC,cAAQ,EAAE;AAAZ,KAFX;AAGLC,iBAAa,EAAE;AAAExT,WAAK,EAAE,CAAC,EAAD;AAAT;AAHV,GAJc;AASrByT,MAAI,EAAE;AACJJ,cAAU,EAAE,MADR;AAEJC,kBAAc,EAAE;AAAEC,cAAQ,EAAE;AAAZ,KAFZ;AAGJC,iBAAa,EAAE;AAAExT,WAAK,EAAE,CAAC,EAAD;AAAT;AAHX,GATe;AAcrB0T,aAAW,EAAE,cAdQ;AAerBC,aAAW,EAAE,cAfQ;AAgBrBC,WAAS,EAAE,WAhBU;AAiBrBC,YAAU,EAAE;AAjBS,CAAvB;AAmBA,IAAMC,MAAM,GAAG,MAAf;AACA,IAAMC,oBAAoB,GAAG,EAA7B;AACA,IAAMC,cAAc,GAAG,wDAAvB;AAEO,IAAMpC,IAAI,GAAG;AAClBvD,MAAI,EAAEqE,WADY;AAElBb,SAAO,EAAE,CAAC,aAAD,EAAgB,WAAhB,EAA6B,YAA7B,EAA2C,aAA3C,EAA0D,WAA1D,EAAuE,YAAvE,EAAqF,QAArF,EAA+F,gBAA/F,EAAiH,UAAjH,EAA6H,WAA7H,CAFS;AAGlBoC,qBAAmB,EAAE,CAAC9B,+DAAD,EAASD,8DAAT,EAAgBD,+DAAhB,CAHH;;AAKlB;;;;;;AAMAiC,mBAAiB,EAAE,2BAAS1K,GAAT,EAAc;AAC/B,WAAO,CAAC,EAAEA,GAAG,CAAC+D,MAAJ,CAAW4G,WAAX,IAA2B3K,GAAG,CAAC+D,MAAJ,CAAW6G,MAAX,IAAqB5K,GAAG,CAAC+D,MAAJ,CAAW8G,OAA7D,CAAR;AACD,GAbiB;;AAelB;;;;;;AAMAC,eAAa,EAAE,uBAAStG,WAAT,EAAsB3E,aAAtB,EAAqC;AAClD,QAAMkL,IAAI,GAAGvG,WAAW,CAAC1Q,GAAZ,CAAgBkX,QAAhB,CAAb;AACA,QAAMC,UAAU,GAAGnL,qEAAI,CAAC0E,WAAD,EAAc0G,WAAd,CAAvB;AACA,QAAIC,OAAJ;;AACA,QAAIF,UAAJ,EAAgB;AACdE,aAAO,GAAG,EAAV;AACAna,YAAM,CAACkP,IAAP,CAAY+K,UAAU,CAAClH,MAAX,CAAkBqH,IAA9B,EACG1K,MADH,CACU,UAAAxB,KAAK;AAAA,eAAI4C,yEAAQ,CAACuH,WAAD,EAAcnK,KAAd,CAAZ;AAAA,OADf,EAEGhD,OAFH,CAEW,UAAAgD,KAAK;AAAA,eAAIiM,OAAO,CAACjM,KAAD,CAAP,GAAiB+L,UAAU,CAAClH,MAAX,CAAkBqH,IAAlB,CAAuBlM,KAAvB,CAArB;AAAA,OAFhB;AAGD;;AAED,QAAMmM,eAAe,GAAGvL,qEAAI,CAAC0E,WAAD,EAAc8G,gBAAd,CAA5B;AACA,QAAIC,YAAJ;;AACA,QAAIF,eAAe,IAAIA,eAAe,CAACtH,MAAnC,IAA6CsH,eAAe,CAACtH,MAAhB,CAAuByH,GAAxE,EAA6E;AAC3ED,kBAAY,GAAG,EAAf;AACAva,YAAM,CAACkP,IAAP,CAAYmL,eAAe,CAACtH,MAAhB,CAAuByH,GAAnC,EACG9K,MADH,CACU,UAAAxB,KAAK;AAAA,eAAI4C,yEAAQ,CAACwH,iBAAD,EAAoBpK,KAApB,CAAZ;AAAA,OADf,EAEGhD,OAFH,CAEW,UAAAgD,KAAK;AAAA,eAAIqM,YAAY,CAACrM,KAAD,CAAZ,GAAsBmM,eAAe,CAACtH,MAAhB,CAAuByH,GAAvB,CAA2BtM,KAA3B,CAA1B;AAAA,OAFhB;AAGD;;AAED,QAAMuM,WAAW,GAAG3L,qEAAI,CAAC0E,WAAD,EAAckH,QAAd,CAAxB;AACA,QAAIC,QAAJ;;AACA,QAAIF,WAAW,IAAIA,WAAW,CAAC1H,MAA3B,IAAqCsH,eAAe,CAACtH,MAAhB,CAAuByH,GAA5D,IAAmEH,eAAe,CAACtH,MAAhB,CAAuByH,GAAvB,CAA2BhS,EAAlG,EAAsG;AACpGmS,cAAQ,GAAG;AACTC,aAAK,EAAEH,WAAW,CAAC1H,MAAZ,CAAmByH,GAAnB,CAAuBhS;AADrB,OAAX;AAGD;;AAED,QAAIqS,QAAQ,GAAG,EAAf;AACA,QAAIC,cAAc,GAAG,EAArB;AACA,QAAMC,eAAe,GAAG,kBAAxB;AACA,QAAMC,WAAW,GAAGC,qDAAA,CAAgBF,eAAhB,KAAoC,IAAxD;;AAEA,QAAIC,WAAJ,EAAiB;AACf,UAAI;AACFH,gBAAQ,GAAGK,IAAI,CAACpU,KAAL,CAAWkU,WAAX,CAAX;AACD,OAFD,CAEE,OAAOnU,CAAP,EAAU;AACVoU,4DAAA,CAAe,6CAA6CpU,CAA5D;AACD;AACF,KAND,MAMO;AACL,UAAMsU,eAAe,GAAGrM,qEAAI,CAAC0E,WAAD,EAAc4H,QAAd,CAA5B;;AACA,UAAID,eAAe,IAAIA,eAAe,CAAClT,KAAvC,EAA8C;AAC5C4S,gBAAQ,GAAGM,eAAe,CAAClT,KAA3B;AACD;AACF;;AAED,QAAI4S,QAAQ,IAAIA,QAAQ,CAACQ,OAAzB,EAAkC;AAChCrb,YAAM,CAACkP,IAAP,CAAY2L,QAAZ,EACGnL,MADH,CACU,UAAAxB,KAAK;AAAA,eAAI4C,yEAAQ,CAACyH,YAAD,EAAerK,KAAf,CAAZ;AAAA,OADf,EAEGhD,OAFH,CAEW,UAAAgD,KAAK,EAAI;AAChB4M,sBAAc,CAAC5M,KAAD,CAAd,GAAwB2M,QAAQ,CAAC3M,KAAD,CAAhC;AACD,OAJH;AAKD;;AAED,QAAMoN,WAAW,GAAGxM,qEAAI,CAAC0E,WAAD,EAAc+H,WAAd,CAAxB;AACA,QAAM3B,MAAM,GAAG0B,WAAW,GAAGE,QAAQ,CAACF,WAAW,CAACvI,MAAZ,CAAmB6G,MAApB,EAA4B,EAA5B,CAAX,GAA6C,CAAvE;AAEA,QAAM6B,OAAO,GAAG;AACd1B,UAAI,qBAAMA,IAAN,CADU;AAEdK,UAAI,EAAED,OAFQ;AAGduB,SAAG,EAAE;AACH/O,cAAM,EAAE2M,MADL;AAEHqC,eAAO,EAAE;AAFN;AAHS,KAAhB;;AASA,QAAI/B,MAAM,GAAG,CAAb,EAAgB;AACd6B,aAAO,CAACG,SAAR,GAAoBhC,MAApB;AACD;;AAED,QAAIS,eAAJ,EAAqB;AACnBoB,aAAO,CAACI,MAAR,GAAiBtB,YAAjB;AACD;;AACD,QAAIE,WAAJ,EAAiB;AACfgB,aAAO,CAACjB,GAAR,GAAcG,QAAd;AACD;;AAED,QAAI5S,2DAAM,CAACC,SAAP,CAAiB,8BAAjB,CAAJ,EAAsD;AACpDyT,aAAO,CAACK,yBAAR,GAAoC,IAApC;AACD;;AAED,QAAIhB,cAAc,CAACO,OAAnB,EAA4B;AAC1BI,aAAO,CAACxT,KAAR,GAAgB6S,cAAhB;AACAG,yDAAA,CAAc,yCAAyCC,IAAI,CAACa,SAAL,CAAejB,cAAf,EAA+B,IAA/B,EAAqC,CAArC,CAAvD;AACD;;AAED,QAAIjM,aAAa,IAAIA,aAAa,CAACmN,WAAnC,EAAgD;AAC9C;AACAP,aAAO,CAACQ,YAAR,GAAuB;AACrBC,sBAAc,EAAErN,aAAa,CAACmN,WAAd,CAA0BG,aADrB;AAErBC,wBAAgB,EAAEvN,aAAa,CAACmN,WAAd,CAA0BK;AAFvB,OAAvB;AAID;;AAED,QAAIxN,aAAa,IAAIA,aAAa,CAACyN,WAAnC,EAAgD;AAC9C,UAAIC,WAAW,GAAG;AAChBC,cAAM,EAAE/X,kBAAkB,CAACoK,aAAa,CAACyN,WAAd,CAA0BG,OAA3B,CADV;AAEhBC,cAAM,EAAE7N,aAAa,CAACyN,WAAd,CAA0BK,UAFlB;AAGhBC,cAAM,EAAE/N,aAAa,CAACyN,WAAd,CAA0BO,UAHlB;AAIhBC,cAAM,EAAEjO,aAAa,CAACyN,WAAd,CAA0BS,KAA1B,CAAgCja,GAAhC,CAAoC,UAACwJ,GAAD;AAAA,iBAAS7H,kBAAkB,CAAC6H,GAAD,CAA3B;AAAA,SAApC,EAAsEjH,IAAtE,CAA2E,GAA3E;AAJQ,OAAlB;AAMAoW,aAAO,CAACuB,kBAAR,GAA6BT,WAA7B;AACD;;AAED,QAAMU,WAAW,GAAGnO,qEAAI,CAAC0E,WAAD,EAAc0J,QAAd,CAAxB;;AACA,QAAID,WAAJ,EAAiB;AACfzJ,iBAAW,CAAC9D,MAAZ,CAAmBwN,QAAnB,EAA6BhS,OAA7B,CAAqC,UAAAiS,QAAQ,EAAI;AAC/C,YAAMC,SAAS,GAAGC,kBAAkB,CAACtD,IAAD,EAAOoD,QAAP,CAApC,CAD+C,CAE/C;;AACA,YAAMG,UAAU,GAAG7B,OAAO,CAAC1B,IAAR,CAAarK,MAAb,CAAoB,UAAA6N,GAAG;AAAA,iBAAIA,GAAG,CAACC,IAAJ,KAAaL,QAAQ,CAACM,KAA1B;AAAA,SAAvB,CAAnB;AACAhC,eAAO,CAAC1B,IAAR,gCAAmBuD,UAAnB,sBAAkCF,SAAlC;AACD,OALD;AAMD;;AAED,QAAM3J,OAAO,GAAGiK,aAAa,CAACjC,OAAD,EAAU5M,aAAV,CAA7B;AACA,WAAO4E,OAAP;AACD,GAzIiB;;AA2IlB;;;;;;AAMAkK,mBAAiB,EAAE,2BAASC,cAAT,QAA0C;AAAA;;AAAA,QAAhB/O,aAAgB,QAAhBA,aAAgB;AAC3D+O,kBAAc,GAAGA,cAAc,CAACnF,IAAhC;AACA,QAAM1J,IAAI,GAAG,EAAb;;AACA,QAAI,CAAC6O,cAAD,IAAmBA,cAAc,CAAC/c,KAAtC,EAA6C;AAC3C,UAAIgd,YAAY,6BAAsBhP,aAAa,CAACiP,UAApC,aAAhB;;AACA,UAAIF,cAAc,IAAIA,cAAc,CAAC/c,KAArC,EAA4C;AAAEgd,oBAAY,gBAASD,cAAc,CAAC/c,KAAxB,CAAZ;AAA8C;;AAC5Foa,0DAAA,CAAe4C,YAAf;AACA,aAAO9O,IAAP;AACD;;AAED,QAAI6O,cAAc,CAAC7D,IAAnB,EAAyB;AACvB6D,oBAAc,CAAC7D,IAAf,CAAoB7O,OAApB,CAA4B,UAAA6S,SAAS,EAAI;AACvC,YAAMC,MAAM,GAAGC,SAAS,CAACF,SAAD,CAAxB;;AACA,YAAIC,MAAJ,EAAY;AACV,cAAIA,MAAM,CAACzN,GAAP,KAAe,CAAf,IAAoBO,yEAAQ,CAAC,KAAI,CAAC2I,mBAAN,EAA2BuE,MAAM,CAACE,OAAlC,CAAhC,EAA4E;AAC1E,gBAAMlP,GAAG,GAAGmP,MAAM,CAACJ,SAAD,EAAYC,MAAZ,EAAoBnP,aAApB,CAAlB;AACAG,eAAG,CAAC8F,SAAJ,GAAgBsJ,cAAc,CAACJ,MAAD,CAA9B;AACAjP,gBAAI,CAAClJ,IAAL,CAAUmJ,GAAV;AACD;AACF;AACF,OATD;AAUD;;AAED,QAAI4O,cAAc,CAAC3V,KAAf,IAAwB2V,cAAc,CAAC3V,KAAf,CAAqBoW,UAAjD,EAA6D;AAC3D,UAAIC,WAAW,GAAG,uCAAlB;AACA,UAAIC,SAAS,GAAGD,WAAW,GAAGV,cAAc,CAAC3V,KAAf,CAAqBoW,UAAnD;AACAE,eAAS,GAAGA,SAAS,CAClB/a,OADS,CACD,eADC,EACgB,IADhB,EACsB;AADtB,OAETA,OAFS,CAED,mBAFC,EAEoB,IAFpB,EAE0B;AAF1B,OAGTA,OAHS,CAGD,SAHC,EAGU,EAHV,EAGc;AAHd,OAITA,OAJS,CAID,iBAJC,EAIkB,IAJlB,EAIwB;AAJxB,OAKTA,OALS,CAKD,kBALC,EAKmB,wBALnB,EAK6C;AAL7C,OAMTA,OANS,CAMD,0BANC,EAM2B,oBAN3B,EAMiD;AANjD,OAOTA,OAPS,CAOD,gBAPC,EAOiB,EAPjB,CAAZ,CAH2D,CAUzB;;AAClCyX,4DAAA,CAAiB,mEAAjB;AACAA,4DAAA,CAAiBsD,SAAjB;AACD;;AAED,WAAOxP,IAAP;AACD,GAxLiB;;AA0LlB;;;;;;;AAOA;;;;AAIAyP,oBAAkB,EAAE,8BAAW;AAC7B,WAAO;AACLlS,SAAG,EAAEkN,cADA;AAELiF,mBAAa,EAAE;AAFV,KAAP;AAID,GA1MiB;AA4MlBC,cAAY,EAAE,sBAASC,WAAT,EAAsB;AAClC,QAAIA,WAAW,CAACC,aAAhB,EAA+B;AAC7B,aAAO,CAAC;AACN3P,YAAI,EAAE,QADA;AAEN3C,WAAG,EAAE;AAFC,OAAD,CAAP;AAID;AACF,GAnNiB;AAqNlBuS,oBAAkB,EAAE,4BAAS9L,MAAT,EAAiB+L,SAAjB,EAA4B;AAC9C/L,UAAM,GAAGkI,wDAAA,CAAmB;AAC1B,gBAAU,QADgB;AAE1B,iBAAW,QAFe;AAG1B,qBAAe,QAHW;AAI1B,kBAAYA,wEAAkC1F;AAJpB,KAAnB,EAKNxC,MALM,CAAT;;AAOA,QAAI+L,SAAJ,EAAe;AACb/L,YAAM,CAACgM,YAAP,GAAuB,OAAOhM,MAAM,CAACiM,cAAd,KAAiC,SAAlC,GAA+CjM,MAAM,CAACiM,cAAtD,GAAuE,KAA7F;;AACA,UAAIjM,MAAM,CAACiM,cAAX,EAA2B;AAAE,eAAOjM,MAAM,CAACiM,cAAd;AAA+B;;AAE5D,UAAIC,gBAAgB,CAAClM,MAAM,CAACyC,QAAR,CAApB,EAAuC;AACrCzC,cAAM,CAACyC,QAAP,CAAgBtK,OAAhB,CAAwBgU,YAAxB;AACD;;AAEDlf,YAAM,CAACkP,IAAP,CAAY6D,MAAZ,EAAoB7H,OAApB,CAA4B,UAAAiU,QAAQ,EAAI;AACtC,YAAIC,YAAY,GAAGnE,oEAAA,CAA+BkE,QAA/B,CAAnB;;AACA,YAAIC,YAAY,KAAKD,QAArB,EAA+B;AAC7BpM,gBAAM,CAACqM,YAAD,CAAN,GAAuBrM,MAAM,CAACoM,QAAD,CAA7B;AACA,iBAAOpM,MAAM,CAACoM,QAAD,CAAb;AACD;AACF,OAND;AAOD;;AAED,WAAOpM,MAAP;AACD;AA/OiB,CAAb;;AAkPP,SAASkM,gBAAT,CAA0BI,GAA1B,EAA+B;AAC7B,SAAO,CAAC,EAAEpE,mDAAA,CAAcoE,GAAd,KAAsBA,GAAG,CAACna,MAAJ,GAAa,CAArC,CAAR;AACD;;AAED,SAASga,YAAT,CAAsBI,UAAtB,EAAkC;AAChC,MAAIL,gBAAgB,CAACK,UAAU,CAACrc,KAAZ,CAAhB,IAAsCqc,UAAU,CAACrc,KAAX,CAAiB,CAAjB,MAAwB,EAAlE,EAAsE;AACpE,WAAOqc,UAAU,CAACrc,KAAlB;AACD;AACF;;AAED,SAASya,aAAT,CAAuBjC,OAAvB,EAAgC5M,aAAhC,EAA+C;AAC7C,MAAI4E,OAAO,GAAG,EAAd;;AAEA,MAAIgI,OAAO,CAAC1B,IAAR,CAAa7U,MAAb,GAAsBqU,oBAA1B,EAAgD;AAC9C,QAAMgG,aAAa,GAAGtE,qDAAA,CAAgBQ,OAAhB,CAAtB;AAEAR,qDAAA,CAAYQ,OAAO,CAAC1B,IAApB,EAA0BR,oBAA1B,EAAgDrO,OAAhD,CAAwD,UAAA6O,IAAI,EAAI;AAC9DwF,mBAAa,CAACxF,IAAd,GAAqBA,IAArB;AACA,UAAMyF,aAAa,GAAGtE,IAAI,CAACa,SAAL,CAAewD,aAAf,CAAtB;AACA9L,aAAO,CAAC5N,IAAR,CAAa;AACX4Z,cAAM,EAAE,MADG;AAEXnT,WAAG,EAAE6L,GAFM;AAGXuH,YAAI,EAAEF,aAHK;AAIX3Q,qBAAa,EAAbA;AAJW,OAAb;AAMD,KATD;AAUD,GAbD,MAaO;AACL,QAAM2Q,aAAa,GAAGtE,IAAI,CAACa,SAAL,CAAeN,OAAf,CAAtB;AACAhI,WAAO,GAAG;AACRgM,YAAM,EAAE,MADA;AAERnT,SAAG,EAAE6L,GAFG;AAGRuH,UAAI,EAAEF,aAHE;AAIR3Q,mBAAa,EAAbA;AAJQ,KAAV;AAMD;;AAED,SAAO4E,OAAP;AACD;;AAED,SAASkM,WAAT,CAAqB5O,UAArB,EAAiCiN,MAAjC,EAA+D;AAAA,MAAtB4B,eAAsB,uEAAJ,EAAI;AAC7D,MAAMC,QAAQ,GAAGhI,+DAAQ,CAACC,OAAT,CAAiB;AAChCtP,MAAE,EAAEwV,MAAM,CAAC8B,WADqB;AAEhCxT,OAAG,EAAE0R,MAAM,CAAC+B,YAFoB;AAGhChY,UAAM,EAAE6X,eAHwB;AAIhCI,UAAM,EAAE,KAJwB;AAKhCjP,cAAU,EAAVA;AALgC,GAAjB,CAAjB;;AAQA,MAAI;AACF8O,YAAQ,CAAC9H,SAAT,CAAmBkI,eAAnB;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZjF,uDAAA,CAAc,4CAAd,EAA4DiF,GAA5D;AACD;;AAEDL,UAAQ,CAAC7H,gBAAT,CAA0B;AACxBmI,cAAU,EAAE;AAAA,aAAMlF,sDAAA,CAAiB,2CAAjB,CAAN;AAAA,KADY;AAExB+E,UAAM,EAAE;AAAA,aAAM/E,sDAAA,CAAiB,uCAAjB,CAAN;AAAA,KAFgB;AAGxBmF,SAAK,EAAE,iBAAM;AACXnF,4DAAA,CAAiB,yCAAjB;AACA7T,cAAQ,CAACiZ,aAAT,YAA2BtP,UAA3B,GAAyC/H,KAAzC,CAA+CI,OAA/C,GAAyD,MAAzD;AACD;AANuB,GAA1B;AAQA,SAAOyW,QAAP;AACD;AAED;;;;;;;;;AAOA,SAAS1B,MAAT,CAAgBJ,SAAhB,EAA2BC,MAA3B,EAAmCnP,aAAnC,EAAkD;AAChD,MAAMF,UAAU,GAAGsM,yDAAA,CAAoB8C,SAAS,CAACP,IAA9B,EAAoC,CAAC3O,aAAD,CAApC,CAAnB;AACA,MAAMG,GAAG,GAAG;AACVsR,aAAS,EAAEvC,SAAS,CAACP,IADX;AAEVjN,OAAG,EAAEyN,MAAM,CAACzN,GAFF;AAGVgQ,cAAU,EAAEvC,MAAM,CAACwC,WAHT;AAIVC,UAAM,EAAEzC,MAAM,CAAC0C,OAJL;AAKVC,YAAQ,EAAE,KALA;AAMVC,cAAU,EAAE,IANF;AAOVC,OAAG,EAAE,GAPK;AAQV9P,cAAU,EAAEpC,UAAU,CAACoC,UARb;AASV+P,YAAQ,EAAE;AACRC,mBAAa,EAAE/C,MAAM,CAACgD,eADd;AAERC,kBAAY,EAAEjD,MAAM,CAACkD,aAFb;AAGRC,cAAQ,EAAEnD,MAAM,CAACoD;AAHT;AATA,GAAZ;;AAgBA,MAAIpD,MAAM,CAACqD,GAAP,CAAWhO,KAAf,EAAsB;AACpB,aAAcrE,GAAd,EAAmB;AACjBtG,WAAK,EAAEsV,MAAM,CAACqD,GAAP,CAAWhO,KAAX,CAAiBiO,YADP;AAEjB7Y,YAAM,EAAEuV,MAAM,CAACqD,GAAP,CAAWhO,KAAX,CAAiBkO,aAFR;AAGjBC,aAAO,EAAExD,MAAM,CAACqD,GAAP,CAAWhO,KAAX,CAAiBoO,SAHT;AAIjBC,gBAAU,EAAE1D,MAAM,CAAC2D,UAJF;AAKjBd,SAAG,EAAE;AALY,KAAnB;;AAQA,QAAMe,YAAY,GAAG3G,sDAAA,CAAiBtM,UAAjB,EAA6B,0BAA7B,CAArB;;AACA,QAAIiT,YAAY,KAAKhK,8DAArB,EAA4B;AAC1B,UAAMiK,WAAW,GAAGrK,8FAAiB,CAAC7I,UAAU,CAACa,MAAZ,EAAoBwO,MAAM,CAAC8D,iBAA3B,CAArC;AACA9S,SAAG,CAAC+S,IAAJ,GAAW;AACTF,mBAAW,EAAXA;AADS,OAAX;AAIA7S,SAAG,CAACqE,KAAJ,GAAY;AACVC,eAAO,EAAEsE,8DADC;AAEVoK,uBAAe,EAAEpe,IAAI,CAAC+M,KAAL,CAAWqN,MAAM,CAACqD,GAAP,CAAWhO,KAAX,CAAiB4O,WAAjB,GAA+B,IAA1C;AAFP,OAAZ;AAID,KApBmB,CAsBpB;;;AACA,QAAIjE,MAAM,CAAC+B,YAAX,EAAyB;AACvB,UAAMH,eAAe,GAAG3E,sDAAA,CACtBpM,aAAa,CAACE,IAAd,CAAmB,CAAnB,CADsB,EAEtB,kBAFsB,CAAxB;;AAKA,eAAcC,GAAd,EAAmB;AACjBkT,kBAAU,EAAEnE,SADK;AAEjB8B,gBAAQ,EAAEF,WAAW,CAAC3Q,GAAG,CAAC+B,UAAL,EAAiBiN,MAAjB,EAAyB4B,eAAzB;AAFJ,OAAnB;;AAIA5Q,SAAG,CAACkT,UAAJ,CAAeC,EAAf,GAAoBnT,GAAG,CAACkT,UAAJ,CAAeE,GAAf,CAAmB,CAAnB,CAApB;AACApT,SAAG,CAACkT,UAAJ,CAAeC,EAAf,CAAkB9O,KAAlB,GAA0BrE,GAAG,CAACkT,UAAJ,CAAeC,EAAf,CAAkBd,GAAlB,CAAsBhO,KAAhD;AACD;AACF,GApCD,MAoCO,IAAI2K,MAAM,CAACqD,GAAP,CAAW5J,+DAAX,CAAJ,EAAwB;AAC7B,QAAM4K,QAAQ,GAAGrE,MAAM,CAACqD,GAAP,CAAW5J,+DAAX,CAAjB;AACAzI,OAAG,CAACyI,+DAAD,CAAH,GAAc;AACZ6K,WAAK,EAAED,QAAQ,CAACC,KADJ;AAEZ7J,UAAI,EAAE4J,QAAQ,CAACE,IAFH;AAGZ7J,WAAK,EAAE2J,QAAQ,CAACG,KAHJ;AAIZ7J,SAAG,EAAE0J,QAAQ,CAACI,OAJF;AAKZC,YAAM,EAAEL,QAAQ,CAACK,MALL;AAMZxJ,iBAAW,EAAEmJ,QAAQ,CAACM,SANV;AAOZxJ,iBAAW,EAAEkJ,QAAQ,CAACO,YAPV;AAQZC,aAAO,EAAER,QAAQ,CAACQ,OARN;AASZC,eAAS,EAAET,QAAQ,CAACS,SATR;AAUZC,WAAK,EAAEV,QAAQ,CAACU,KAVJ;AAWZC,WAAK,EAAEX,QAAQ,CAACW,KAXJ;AAYZC,WAAK,EAAEZ,QAAQ,CAACY,KAZJ;AAaZ7J,eAAS,EAAEiJ,QAAQ,CAACa,SAbR;AAcZC,cAAQ,EAAEd,QAAQ,CAACe,IAAT,CAAc9W,GAdZ;AAeZ+M,gBAAU,EAAEgJ,QAAQ,CAACgB,UAfT;AAgBZC,mBAAa,EAAEjB,QAAQ,CAACe,IAAT,CAAcG,cAhBjB;AAiBZC,wBAAkB,EAAEnB,QAAQ,CAACoB,mBAjBjB;AAkBZC,wBAAkB,EAAErB,QAAQ,CAACsB;AAlBjB,KAAd;;AAoBA,QAAItB,QAAQ,CAACuB,QAAb,EAAuB;AACrB5U,SAAG,CAAC,QAAD,CAAH,CAAc4J,KAAd,GAAsB;AACpBtM,WAAG,EAAE+V,QAAQ,CAACuB,QAAT,CAAkBtX,GADH;AAEpB7D,cAAM,EAAE4Z,QAAQ,CAACuB,QAAT,CAAkBnb,MAFN;AAGpBC,aAAK,EAAE2Z,QAAQ,CAACuB,QAAT,CAAkBlb;AAHL,OAAtB;AAKD;;AACD,QAAI2Z,QAAQ,CAACpJ,IAAb,EAAmB;AACjBjK,SAAG,CAAC,QAAD,CAAH,CAAciK,IAAd,GAAqB;AACnB3M,WAAG,EAAE+V,QAAQ,CAACpJ,IAAT,CAAc3M,GADA;AAEnB7D,cAAM,EAAE4Z,QAAQ,CAACpJ,IAAT,CAAcxQ,MAFH;AAGnBC,aAAK,EAAE2Z,QAAQ,CAACpJ,IAAT,CAAcvQ;AAHF,OAArB;AAKD;AACF,GApCM,MAoCA;AACL,aAAcsG,GAAd,EAAmB;AACjBtG,WAAK,EAAEsV,MAAM,CAACqD,GAAP,CAAW3b,MAAX,CAAkBgD,KADR;AAEjBD,YAAM,EAAEuV,MAAM,CAACqD,GAAP,CAAW3b,MAAX,CAAkB+C,MAFT;AAGjB0Z,QAAE,EAAEnE,MAAM,CAACqD,GAAP,CAAW3b,MAAX,CAAkBme;AAHL,KAAnB;;AAKA,QAAI;AACF,UAAMvX,GAAG,GAAG0R,MAAM,CAACqD,GAAP,CAAWyC,QAAX,CAAoB,CAApB,EAAuBC,eAAvB,CAAuC,CAAvC,CAAZ;AACA,UAAMC,OAAO,GAAG/I,gEAAA,CAA2B3O,GAA3B,CAAhB;AACA0C,SAAG,CAACmT,EAAJ,IAAU6B,OAAV;AACD,KAJD,CAIE,OAAOnjB,KAAP,EAAc;AACdoa,0DAAA,CAAe,gCAAf,EAAiDpa,KAAjD;AACD;AACF;;AAED,SAAOmO,GAAP;AACD;;AAED,SAASgL,QAAT,CAAkBhL,GAAlB,EAAuB;AACrB,MAAMuO,GAAG,GAAG,EAAZ;AACAA,KAAG,CAAC/X,KAAJ,GAAYye,cAAc,CAACjV,GAAG,CAACxJ,KAAL,CAA1B;AACA+X,KAAG,CAAC2G,YAAJ,GAAmB3G,GAAG,CAAC/X,KAAJ,CAAU,CAAV,CAAnB;AACA+X,KAAG,CAAC4G,QAAJ,GAAe,EAAf;AACA5G,KAAG,CAACC,IAAJ,GAAWxO,GAAG,CAACyO,KAAf;;AACA,MAAIzO,GAAG,CAAC+D,MAAJ,CAAW4G,WAAf,EAA4B;AAC1B4D,OAAG,CAAC/U,EAAJ,GAASgT,QAAQ,CAACxM,GAAG,CAAC+D,MAAJ,CAAW4G,WAAZ,EAAyB,EAAzB,CAAjB;AACD,GAFD,MAEO;AACL4D,OAAG,CAAC1J,IAAJ,GAAW7E,GAAG,CAAC+D,MAAJ,CAAW8G,OAAtB;AACD;;AACD0D,KAAG,CAAC6G,mBAAJ,GAA0BpV,GAAG,CAAC+D,MAAJ,CAAWsR,iBAAX,IAAgC,KAA1D;AACA9G,KAAG,CAACwB,YAAJ,GAAmB/P,GAAG,CAAC+D,MAAJ,CAAWiM,cAAX,IAA6B,KAAhD;AACAzB,KAAG,CAAC+G,MAAJ,GAAa,IAAb;AACA/G,KAAG,CAACgH,WAAJ,GAAkB,IAAlB;;AACA,MAAIvV,GAAG,CAAC+D,MAAJ,CAAWyR,OAAf,EAAwB;AACtBjH,OAAG,CAACiH,OAAJ,GAAcxV,GAAG,CAAC+D,MAAJ,CAAWyR,OAAzB;AACD;;AACD,MAAIxV,GAAG,CAAC+D,MAAJ,CAAW0R,QAAf,EAAyB;AACvBlH,OAAG,CAACkH,QAAJ,GAAe;AAAC,eAAS,CAAV;AAAa,eAAS;AAAtB,MAAyBzV,GAAG,CAAC+D,MAAJ,CAAW0R,QAApC,KAAiD,CAAhE;AACD;;AACD,MAAIzV,GAAG,CAAC+D,MAAJ,CAAW2R,iBAAf,EAAkC;AAChCnH,OAAG,CAACoH,mBAAJ,GAA0B3V,GAAG,CAAC+D,MAAJ,CAAW2R,iBAArC;AACD;;AACD,MAAI1V,GAAG,CAAC+D,MAAJ,CAAW6R,YAAf,EAA6B;AAC3BrH,OAAG,CAACsH,aAAJ,GAAoBZ,cAAc,CAACjV,GAAG,CAAC+D,MAAJ,CAAW6R,YAAZ,CAAlC;AACD;;AACD,MAAI5V,GAAG,CAAC+D,MAAJ,CAAW+R,UAAf,EAA2B;AACzBvH,OAAG,CAACwH,WAAJ,GAAkB/V,GAAG,CAAC+D,MAAJ,CAAW+R,UAA7B;AACD;;AACD,MAAI9V,GAAG,CAAC+D,MAAJ,CAAWiS,QAAf,EAAyB;AACvBzH,OAAG,CAAC0H,QAAJ,GAAejW,GAAG,CAAC+D,MAAJ,CAAWiS,QAA1B;AACD;;AACD,MAAIhW,GAAG,CAAC+D,MAAJ,CAAWmS,UAAf,EAA2B;AACzB3H,OAAG,CAAC4H,YAAJ,GAAmBnW,GAAG,CAAC+D,MAAJ,CAAWmS,UAA9B;AACD;;AACD,MAAIlW,GAAG,CAAC+D,MAAJ,CAAWqS,aAAf,EAA8B;AAC5B7H,OAAG,CAAC8H,eAAJ,GAAsBrW,GAAG,CAAC+D,MAAJ,CAAWqS,aAAjC;AACD;;AACD,MAAI,CAACnK,mDAAA,CAAcjM,GAAG,CAAC+D,MAAJ,CAAWyC,QAAzB,CAAL,EAAyC;AACvC,QAAIA,QAAQ,GAAGyF,wEAAA,CAAmCjM,GAAG,CAAC+D,MAAJ,CAAWyC,QAA9C,CAAf;;AAEA,QAAIA,QAAQ,CAACtQ,MAAT,GAAkB,CAAtB,EAAyB;AACvBsQ,cAAQ,CAACtK,OAAT,CAAiBgU,YAAjB;AACD;;AACD3B,OAAG,CAAC/H,QAAJ,GAAeA,QAAf;AACD;;AAED,MAAIxG,GAAG,CAAC8F,SAAJ,KAAkB2C,+DAAlB,IAA4BwD,sDAAA,CAAiBjM,GAAjB,uBAAoCyI,+DAApC,EAAhC,EAA+E;AAC7E8F,OAAG,CAAC4G,QAAJ,CAAate,IAAb,CAAkB4R,+DAAlB;;AAEA,QAAIzI,GAAG,CAACsW,YAAR,EAAsB;AACpB,UAAMC,aAAa,GAAGC,kBAAkB,CAACxW,GAAG,CAACsW,YAAL,CAAxC;AACA/H,SAAG,CAAC9F,+DAAD,CAAH,GAAc;AAACgO,eAAO,EAAE,CAACF,aAAD;AAAV,OAAd;AACD;AACF;;AAED,MAAMG,cAAc,GAAGzK,sDAAA,CAAiBjM,GAAjB,uBAAoC0I,8DAApC,EAAvB;AACA,MAAMpE,OAAO,GAAG2H,sDAAA,CAAiBjM,GAAjB,EAAsB,0BAAtB,CAAhB;;AAEA,MAAIA,GAAG,CAAC8F,SAAJ,KAAkB4C,8DAAlB,IAA2BgO,cAA/B,EAA+C;AAC7CnI,OAAG,CAAC4G,QAAJ,CAAate,IAAb,CAAkB6R,8DAAlB;AACD,GA9DoB,CAgErB;;;AACA,MAAI1I,GAAG,CAAC8F,SAAJ,KAAkB4C,8DAAlB,IAA4BgO,cAAc,IAAIpS,OAAO,KAAK,WAA9D,EAA4E;AAC1EiK,OAAG,CAACoI,iBAAJ,GAAwB,IAAxB;AACD;;AAED,MAAI3W,GAAG,CAAC+D,MAAJ,CAAWM,KAAf,EAAsB;AACpBkK,OAAG,CAAClK,KAAJ,GAAY,EAAZ,CADoB,CAEpB;;AACArT,UAAM,CAACkP,IAAP,CAAYF,GAAG,CAAC+D,MAAJ,CAAWM,KAAvB,EACG3D,MADH,CACU,UAAAxB,KAAK;AAAA,aAAI4C,yEAAQ,CAACsH,eAAD,EAAkBlK,KAAlB,CAAZ;AAAA,KADf,EAEGhD,OAFH,CAEW,UAAAgD,KAAK;AAAA,aAAIqP,GAAG,CAAClK,KAAJ,CAAUnF,KAAV,IAAmBc,GAAG,CAAC+D,MAAJ,CAAWM,KAAX,CAAiBnF,KAAjB,CAAvB;AAAA,KAFhB;AAGD;;AAED,MACG+M,mDAAA,CAAcjM,GAAG,CAAC8F,SAAlB,KAAgCmG,mDAAA,CAAcjM,GAAG,CAACvJ,UAAlB,CAAjC,IACCuJ,GAAG,CAAC8F,SAAJ,KAAkB6C,+DAAlB,IAA6B3I,GAAG,CAACvJ,UAAJ,IAAkBuJ,GAAG,CAACvJ,UAAJ,CAAekS,+DAAf,CAFlD,EAGE;AACA4F,OAAG,CAAC4G,QAAJ,CAAate,IAAb,CAAkB8R,+DAAlB;AACD;;AAED,SAAO4F,GAAP;AACD;AAED;;;AACA,SAAS0G,cAAT,CAAwB2B,YAAxB,EAAsC;AACpC,MAAIpgB,KAAK,GAAG,EAAZ;AACA,MAAIO,OAAO,GAAG,EAAd;;AAEA,MAAIkV,mDAAA,CAAc2K,YAAd,KAA+BA,YAAY,CAAC1gB,MAAb,KAAwB,CAAvD,IACF,CAAC+V,mDAAA,CAAc2K,YAAY,CAAC,CAAD,CAA1B,CADH,EACmC;AACjC7f,WAAO,CAAC2C,KAAR,GAAgB8S,QAAQ,CAACoK,YAAY,CAAC,CAAD,CAAb,EAAkB,EAAlB,CAAxB;AACA7f,WAAO,CAAC0C,MAAR,GAAiB+S,QAAQ,CAACoK,YAAY,CAAC,CAAD,CAAb,EAAkB,EAAlB,CAAzB;AACApgB,SAAK,CAACK,IAAN,CAAWE,OAAX;AACD,GALD,MAKO,IAAI,QAAO6f,YAAP,MAAwB,QAA5B,EAAsC;AAC3C,SAAK,IAAIpf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGof,YAAY,CAAC1gB,MAAjC,EAAyCsB,CAAC,EAA1C,EAA8C;AAC5C,UAAI+P,IAAI,GAAGqP,YAAY,CAACpf,CAAD,CAAvB;AACAT,aAAO,GAAG,EAAV;AACAA,aAAO,CAAC2C,KAAR,GAAgB8S,QAAQ,CAACjF,IAAI,CAAC,CAAD,CAAL,EAAU,EAAV,CAAxB;AACAxQ,aAAO,CAAC0C,MAAR,GAAiB+S,QAAQ,CAACjF,IAAI,CAAC,CAAD,CAAL,EAAU,EAAV,CAAzB;AACA/Q,WAAK,CAACK,IAAN,CAAWE,OAAX;AACD;AACF;;AAED,SAAOP,KAAP;AACD;;AAED,SAAS0U,WAAT,CAAqBlL,GAArB,EAA0B;AACxB,SAAO,CAAC,CAACA,GAAG,CAAC+D,MAAJ,CAAWqH,IAApB;AACD;;AAED,SAASmB,WAAT,CAAqBvM,GAArB,EAA0B;AACxB,SAAO,CAAC,CAACwM,QAAQ,CAACxM,GAAG,CAAC+D,MAAJ,CAAW6G,MAAZ,EAAoB,EAApB,CAAjB;AACD;;AAED,SAASU,gBAAT,CAA0BtL,GAA1B,EAA+B;AAC7B,MAAIA,GAAG,CAAC+D,MAAR,EAAgB;AACd,WAAO,CAAC,CAAC/D,GAAG,CAAC+D,MAAJ,CAAWyH,GAApB;AACD;AACF;;AAED,SAASE,QAAT,CAAkB1L,GAAlB,EAAuB;AACrB,MAAIA,GAAG,CAAC+D,MAAJ,IAAc/D,GAAG,CAAC+D,MAAJ,CAAWyH,GAA7B,EAAkC;AAChC,WAAO,CAAC,CAACxL,GAAG,CAAC+D,MAAJ,CAAWyH,GAAX,CAAehS,EAAxB;AACD;;AACD,SAAO,CAAC,CAACwG,GAAG,CAAC+D,MAAJ,CAAWyH,GAApB;AACD;;AAED,SAASY,QAAT,CAAkBpM,GAAlB,EAAuB;AACrB,SAAO,CAAC,CAACA,GAAG,CAAC/G,KAAb;AACD;;AAED,SAASiV,QAAT,CAAkBlO,GAAlB,EAAuB;AACrB,SACEA,GAAG,CAACvJ,UAAJ,IACAuJ,GAAG,CAACvJ,UAAJ,CAAe4N,KADf,IAEArE,GAAG,CAACvJ,UAAJ,CAAe4N,KAAf,CAAqBC,OAArB,KAAiCsE,8DAHnC;AAKD;AAED;;;;;;;AAKA,SAASyF,kBAAT,CAA4BtD,IAA5B,EAAkCoD,QAAlC,EAA4C;AAAA,8BACSA,QAAQ,CAAC1X,UAAT,CAAoB4N,KAD7B;AAAA,MAClCwS,gBADkC,yBAClCA,gBADkC;AAAA,MAChBC,oBADgB,yBAChBA,oBADgB;AAG1C,MAAMC,kBAAkB,GAAGC,uBAAuB,CAAC7I,QAAQ,CAAC1X,UAAT,CAAoB4N,KAArB,CAAlD;AACA,MAAM4S,WAAW,GAAGhL,gEAAA,CAA2B4K,gBAA3B,CAApB;AAEA,MAAMK,cAAc,GAAGnM,IAAI,CAACrK,MAAL,CAAY,UAAA6N,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,KAAaL,QAAQ,CAACM,KAA1B;AAAA,GAAf,CAAvB;AACA,MAAIhK,OAAO,GAAGwH,gDAAA,OAAAA,wCAAK,qBAASiL,cAAT,UAAyBH,kBAAzB,GAAnB;;AAEA,MAAID,oBAAJ,EAA0B;AACxB,QAAMK,OAAO,GAAGviB,IAAI,CAACgT,IAAL,CAAUmP,kBAAkB,GAAGF,gBAAgB,CAAC3gB,MAAhD,CAAhB;AACA,QAAMkhB,OAAO,GAAGnL,iDAAA,CAAYxH,OAAZ,EAAqB0S,OAArB,CAAhB,CAFwB,CAIxB;;AACAN,oBAAgB,CAAC3a,OAAjB,CAAyB,UAACmb,QAAD,EAAW/X,KAAX,EAAqB;AAC5C8X,aAAO,CAAC9X,KAAD,CAAP,CAAexL,GAAf,CAAmB,UAAAya,GAAG,EAAI;AACxB+I,wBAAgB,CAAC/I,GAAD,EAAM,aAAN,EAAqB8I,QAArB,CAAhB;AACAC,wBAAgB,CAAC/I,GAAD,EAAM,aAAN,EAAqB8I,QAArB,CAAhB;AACD,OAHD;AAID,KALD;AAMD,GAXD,MAWO;AACL;AACA5S,WAAO,CAAC3Q,GAAR,CAAY,UAAAya,GAAG;AAAA,aAAI+I,gBAAgB,CAAC/I,GAAD,EAAM,aAAN,EAAqB0I,WAArB,CAApB;AAAA,KAAf;AACD;;AAED,SAAOxS,OAAP;AACD;;AAED,SAASuS,uBAAT,CAAiCO,WAAjC,EAA8C;AAAA,MACpCC,gBADoC,GACyBD,WADzB,CACpCC,gBADoC;AAAA,MAClBX,gBADkB,GACyBU,WADzB,CAClBV,gBADkB;AAAA,MACAC,oBADA,GACyBS,WADzB,CACAT,oBADA;AAE5C,MAAMW,kBAAkB,GAAGxL,gEAAA,CAA2B4K,gBAA3B,CAA3B;AACA,MAAME,kBAAkB,GAAGniB,IAAI,CAAC+M,KAAL,CAAW6V,gBAAgB,GAAGC,kBAA9B,CAA3B;AAEA,SAAOX,oBAAoB,GACvBliB,IAAI,CAACqT,GAAL,CAAS8O,kBAAT,EAA6BF,gBAAgB,CAAC3gB,MAA9C,CADuB,GAEvB6gB,kBAFJ;AAGD;;AAED,SAASO,gBAAT,CAA0B/I,GAA1B,EAA+Bra,GAA/B,EAAoCD,KAApC,EAA2C;AACzC,MAAIgY,mDAAA,CAAcsC,GAAG,CAAClK,KAAlB,CAAJ,EAA8B;AAAEkK,OAAG,CAAClK,KAAJ,GAAY,EAAZ;AAAiB;;AACjDkK,KAAG,CAAClK,KAAJ,CAAUnQ,GAAV,IAAiBD,KAAjB;AACD;;AAED,SAASgb,SAAT,CAAmBV,GAAnB,EAAwB;AACtB,SAAOA,GAAG,IAAIA,GAAG,CAAC6E,GAAX,IAAkB7E,GAAG,CAAC6E,GAAJ,CAAQld,MAA1B,IAAoC4J,qEAAI,CAACyO,GAAG,CAAC6E,GAAL,EAAU,UAAAD,EAAE;AAAA,WAAIA,EAAE,CAACd,GAAP;AAAA,GAAZ,CAA/C;AACD;;AAED,SAASmE,kBAAT,CAA4BzS,MAA5B,EAAoC;AAClC,MAAMU,OAAO,GAAG,EAAhB,CADkC,CAGlC;AACA;AACA;AACA;;AACAzT,QAAM,CAACkP,IAAP,CAAY6D,MAAZ,EAAoB7H,OAApB,CAA4B,UAAAhI,GAAG,EAAI;AACjC;AACA;AACA,QAAMwjB,UAAU,GACblO,cAAc,CAACtV,GAAD,CAAd,IAAuBsV,cAAc,CAACtV,GAAD,CAAd,CAAoB2V,UAA5C,IACAL,cAAc,CAACtV,GAAD,CADd,IAEAA,GAHF,CAHiC,CAQjC;;AACA,QAAM4V,cAAc,GAAGN,cAAc,CAACtV,GAAD,CAAd,IAAuBsV,cAAc,CAACtV,GAAD,CAAd,CAAoB4V,cAAlE;AACArF,WAAO,CAACiT,UAAD,CAAP,GAAsB,SAAc,EAAd,EAAkB5N,cAAlB,EAAkC/F,MAAM,CAAC7P,GAAD,CAAxC,CAAtB,CAViC,CAYjC;;AACA,QAAM8V,aAAa,GAAGR,cAAc,CAACtV,GAAD,CAAd,IAAuBsV,cAAc,CAACtV,GAAD,CAAd,CAAoB8V,aAAjE;;AAEA,QAAIF,cAAc,IAAIE,aAAtB,EAAqC;AACnC;AACA,UAAM2N,UAAU,GAAG3mB,MAAM,CAACkP,IAAP,CAAY6D,MAAM,CAAC7P,GAAD,CAAlB,CAAnB;AACA,UAAM0jB,YAAY,GAAG5mB,MAAM,CAACkP,IAAP,CAAY4J,cAAZ,CAArB;AACA,UAAM+N,SAAS,GAAGF,UAAU,CAACjX,MAAX,CAAkB,UAAAxM,GAAG;AAAA,eAAI,CAAC4N,yEAAQ,CAAC8V,YAAD,EAAe1jB,GAAf,CAAb;AAAA,OAArB,CAAlB,CAJmC,CAMnC;;AACA,UAAI2jB,SAAS,CAAC3hB,MAAV,KAAqB,CAAzB,EAA4B;AAC1BuO,eAAO,CAACiT,UAAD,CAAP,GAAsB,SAAc,EAAd,EAAkBjT,OAAO,CAACiT,UAAD,CAAzB,EAAuC1N,aAAvC,CAAtB;AACD;AACF;AACF,GA1BD;AA4BA,SAAOvF,OAAP;AACD;;AAED,SAASwM,eAAT,CAAyBjR,GAAzB,EAA8B;AAC5B;AACAA,KAAG,CAAC6Q,QAAJ,CAAaha,IAAb,CAAkB,YAAM;AACtBzF,UAAM,CAAC0mB,gBAAP,CAAwBC,QAAxB,CAAiC;AAC/BC,WAAK,EAAEhY,GAAG,CAACkT,UAAJ,CAAe+E,MADS;AAE/BzhB,WAAK,EAAE,CAACwJ,GAAG,CAACkY,OAAJ,GAAcjhB,KAAd,CAAoB,GAApB,CAAD,CAFwB;AAG/BkhB,cAAQ,EAAEnY,GAAG,CAAC+B,UAHiB;AAGL;AAC1ByM,UAAI,EAAExO,GAAG,CAACkT,UAAJ,CAAe1E,IAJU;AAK/B0E,gBAAU,EAAElT,GAAG,CAACkT,UALe;AAM/BtC,qBAAe,EAAE5Q,GAAG,CAAC6Q,QAAJ,CAAa7X,SAAb;AANc,KAAjC,EAOGof,6BAA6B,CAACplB,IAA9B,CAAmC,IAAnC,EAAyCgN,GAAzC,CAPH;AAQD,GATD;AAUD;;AAED,SAASoY,6BAAT,CAAuCpY,GAAvC,EAA4CxG,EAA5C,EAAgD6e,SAAhD,EAA2D;AACzDrY,KAAG,CAAC6Q,QAAJ,CAAayH,gBAAb,CAA8B;AAAE9e,MAAE,EAAFA,EAAF;AAAM6e,aAAS,EAATA;AAAN,GAA9B;AACD;;AAED,SAASjJ,cAAT,CAAwBJ,MAAxB,EAAgC;AAC9B,MAAMuJ,MAAM,GAAGvJ,MAAM,CAACE,OAAtB;;AACA,MAAIqJ,MAAM,KAAK7P,8DAAf,EAAsB;AACpB,WAAOA,8DAAP;AACD,GAFD,MAEO,IAAI6P,MAAM,KAAK9P,+DAAf,EAAuB;AAC5B,WAAOA,+DAAP;AACD,GAFM,MAEA;AACL,WAAOE,+DAAP;AACD;AACF;;AAEDR,2FAAc,CAACC,IAAD,CAAd,C;;;;;;;;;;;;;;;;;;;;;;ACltBA;;;;;;;;;AASA;AACA;AACA;AACA;;AACA,IAAM6D,KAAK,GAAG1b,mBAAO,CAAC,CAAD,CAArB;;AAEA,IAAMioB,aAAa,GAAG,KAAtB;AACA,IAAMC,sBAAsB,GAAG,IAA/B;AACA,IAAMC,wBAAwB,GAAGtnB,MAAM,CAAC4G,QAAP,CAAgBgN,MAAjD;AACA,IAAM2T,4BAA4B,GAAG,IAArC;AACA,IAAMC,4BAA4B,GAAG,KAArC;AACA,IAAMC,iBAAiB,GAAG,KAA1B;AAEA,IAAMC,qBAAqB,GAAG,GAA9B;AAEO,IAAMC,MAAM,GAAG,QAAf;AACP,IAAMC,KAAK,GAAG,OAAd;AAEA,IAAMC,YAAY,GAAG,EAArB;AACAA,YAAY,CAACF,MAAD,CAAZ,GAAuB,IAAvB;AACAE,YAAY,CAACD,KAAD,CAAZ,GAAsB,IAAtB;AAEA,IAAME,uBAAuB,GAAGH,MAAhC;AAEA,IAAMI,mBAAmB,GAAG;AAC1BC,KAAG,EAAE,KADqB;AAE1BC,QAAM,EAAE,QAFkB;AAG1BC,MAAI,EAAE,MAHoB;AAI1BC,MAAI,EAAE,MAJoB;AAK1BC,OAAK,EAAE,OALmB;AAM1BC,QAAM,EAAE;AANkB,CAA5B;AASA,IAAMC,UAAU,GAAG,GAAnB;AAEA;;;;;;;AAOO,SAASC,SAAT,GAAqB;AAC1B,MAAIC,SAAS,GAAG,EAAhB;AACA,MAAIC,QAAJ;AACA,MAAI9gB,MAAJ;;AAEA,WAAS+gB,WAAT,GAAuB;AACrBD,YAAQ,GAAG,EAAX;AACA,QAAIF,SAAS,GAAG;AACd;AACAI,YAAM,EAAEvB,aAFM;;AAGd,UAAIvf,KAAJ,GAAY;AACV,eAAO,KAAK8gB,MAAZ;AACD,OALa;;AAMd,UAAI9gB,KAAJ,CAAUkG,GAAV,EAAe;AACb,aAAK4a,MAAL,GAAc5a,GAAd;AACD,OARa;;AAUd;AACA6a,oBAAc,EAAEvB,sBAXF;;AAYd,UAAIwB,aAAJ,GAAoB;AAClB,eAAO,KAAKD,cAAZ;AACD,OAda;;AAed,UAAIC,aAAJ,CAAkB9a,GAAlB,EAAuB;AACrB,aAAK6a,cAAL,GAAsB7a,GAAtB;AACD,OAjBa;;AAmBd;AACA+a,sBAAgB,EAAExB,wBApBJ;;AAqBd,UAAIyB,eAAJ,GAAsB;AACpB,eAAO,KAAKD,gBAAZ;AACD,OAvBa;;AAwBd,UAAIC,eAAJ,CAAoBhb,GAApB,EAAyB;AACvB,aAAK+a,gBAAL,GAAwB/a,GAAxB;AACD,OA1Ba;;AA4Bd;AACAib,uBAAiB,EAAEjB,mBAAmB,CAACE,MA7BzB;;AA8Bd,UAAIgB,gBAAJ,CAAqBlb,GAArB,EAA0B;AACxB,YAAImb,wBAAwB,CAACnb,GAAD,CAA5B,EAAmC;AACjC,cAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAC3B,iBAAKib,iBAAL,GAA0BG,cAAc,CAACpb,GAAD,CAAf,GAAwBA,GAAxB,GAA8Bga,mBAAmB,CAACE,MAA3E;AACD,WAFD,MAEO,IAAI,QAAOla,GAAP,MAAe,QAAnB,EAA6B;AAClC,iBAAKqb,kBAAL,GAA0Brb,GAA1B;AACA,iBAAKib,iBAAL,GAAyBjB,mBAAmB,CAACM,MAA7C;AACAxN,iBAAK,CAACpZ,UAAN,CAAiB,gCAAjB;AACD;AACF;AACF,OAxCa;;AAyCd,UAAIwnB,gBAAJ,GAAuB;AACrB,eAAO,KAAKD,iBAAZ;AACD,OA3Ca;;AA6CdI,wBAAkB,EAAE,EA7CN;;AA8Cd,UAAIC,iBAAJ,GAAwB;AACtB,eAAO,KAAKD,kBAAZ;AACD,OAhDa;;AAkDdE,gCAA0B,EAAE,EAlDd;;AAmDd,UAAIC,yBAAJ,GAAgC;AAC9B,eAAO,KAAKD,0BAAZ;AACD,OArDa;;AAsDd,UAAIC,yBAAJ,CAA8Bxb,GAA9B,EAAmC;AAAA;;AACjC,aAAKub,0BAAL,GAAkC1pB,MAAM,CAACkP,IAAP,CAAYf,GAAZ,EAAiBsB,MAAjB,CAAwB,UAACma,SAAD,EAAYC,IAAZ,EAAqB;AAC7E,cAAIP,wBAAwB,CAACnb,GAAG,CAAC0b,IAAD,CAAJ,CAA5B,EAAyC;AACvC,gBAAI,OAAO1b,GAAP,KAAe,QAAnB,EAA6B;AAC3Byb,uBAAS,CAACC,IAAD,CAAT,GAAmBN,cAAc,CAACpb,GAAG,CAAC0b,IAAD,CAAJ,CAAf,GAA8B1b,GAAG,CAAC0b,IAAD,CAAjC,GAA0C,KAAI,CAACT,iBAAjE;AACD,aAFD,MAEO,IAAI,QAAOjb,GAAP,MAAe,QAAnB,EAA6B;AAClCyb,uBAAS,CAACC,IAAD,CAAT,GAAkB1b,GAAG,CAAC0b,IAAD,CAArB;AACA5O,mBAAK,CAACpZ,UAAN,8CAAuDgoB,IAAvD;AACD;AACF,WAPD,MAOO;AACL5O,iBAAK,CAACrZ,OAAN,qDAA2DioB,IAA3D;AACD;;AACD,iBAAOD,SAAP;AACD,SAZiC,EAY/B,EAZ+B,CAAlC;AAaD,OApEa;;AAsEdE,kBAAY,EAAEnC,4BAtEA;;AAuEd,UAAIoC,iBAAJ,GAAwB;AACtB,eAAO,KAAKD,YAAZ;AACD,OAzEa;;AA0Ed,UAAIC,iBAAJ,CAAsB5b,GAAtB,EAA2B;AACzB,aAAK2b,YAAL,GAAoB3b,GAApB;AACD,OA5Ea;;AA8Ed6b,kBAAY,EAAEnC,iBA9EA;;AA+Ed,UAAIoC,WAAJ,GAAkB;AAChB,eAAO,KAAKD,YAAZ;AACD,OAjFa;;AAkFd,UAAIC,WAAJ,CAAgB9b,GAAhB,EAAqB;AACnB,aAAK6b,YAAL,GAAoB7b,GAApB;AACD,OApFa;;AAsFd+b,qBAAe,EAAEhC,uBAtFH;;AAuFd,UAAIiC,cAAJ,GAAqB;AACnB,eAAO,KAAKD,eAAZ;AACD,OAzFa;;AA0Fd,UAAIC,cAAJ,CAAmBhc,GAAnB,EAAwB;AACtB,YAAI8Z,YAAY,CAAC9Z,GAAD,CAAhB,EAAuB;AACrB,eAAK+b,eAAL,GAAuB/b,GAAvB;AACD,SAFD,MAEO;AACL8M,eAAK,CAACrZ,OAAN,0BAAgCuM,GAAhC;AACD;AACF,OAhGa;;AAkGd;AACAic,oBAAc,EAAEtC,qBAnGF;;AAoGd,UAAIuC,aAAJ,GAAoB;AAClB,eAAO,KAAKD,cAAZ;AACD,OAtGa;;AAuGd,UAAIC,aAAJ,CAAkBlc,GAAlB,EAAuB;AACrB,aAAKic,cAAL,GAAsBjc,GAAtB;AACD,OAzGa;;AA2Gdmc,yBAAmB,EAAE1C,4BA3GP;;AA4Gd,UAAI2C,kBAAJ,GAAyB;AACvB,eAAO,KAAKD,mBAAZ;AACD,OA9Ga;;AA+Gd,UAAIC,kBAAJ,CAAuBpc,GAAvB,EAA4B;AAC1B,aAAKmc,mBAAL,GAA2Bnc,GAA3B;AACD;;AAjHa,KAAhB;;AAqHA,QAAIpG,MAAJ,EAAY;AACVyiB,qBAAe,CACbxqB,MAAM,CAACkP,IAAP,CAAYnH,MAAZ,EAAoB0H,MAApB,CAA2B,UAACgb,IAAD,EAAOC,KAAP,EAAiB;AAC1C,YAAI3iB,MAAM,CAAC2iB,KAAD,CAAN,KAAkB/B,SAAS,CAAC+B,KAAD,CAA/B,EAAwC;AACtCD,cAAI,CAACC,KAAD,CAAJ,GAAc/B,SAAS,CAAC+B,KAAD,CAAT,IAAoB,EAAlC;AACD;;AACD,eAAOD,IAAP;AACD,OALD,EAMA,EANA,CADa,CAAf;AASD;;AAED1iB,UAAM,GAAG4gB,SAAT;;AAEA,aAASY,cAAT,CAAwBpb,GAAxB,EAA6B;AAC3B,aAAOW,qEAAI,CAAC9O,MAAM,CAACkP,IAAP,CAAYiZ,mBAAZ,CAAD,EAAmC,UAAAwC,MAAM;AAAA,eAAIxc,GAAG,KAAKga,mBAAmB,CAACwC,MAAD,CAA/B;AAAA,OAAzC,CAAX;AACD;;AAED,aAASrB,wBAAT,CAAkCnb,GAAlC,EAAuC;AACrC,UAAI,CAACA,GAAL,EAAU;AACR8M,aAAK,CAACtZ,QAAN,CAAe,0DAAf;AACA,eAAO,KAAP;AACD;;AACD,UAAI,OAAOwM,GAAP,KAAe,QAAnB,EAA6B;AAC3B,YAAI,CAACob,cAAc,CAACpb,GAAD,CAAnB,EAA0B;AACxB8M,eAAK,CAACrZ,OAAN,CAAc,iGAAd;AACD;AACF,OAJD,MAIO,IAAI,QAAOuM,GAAP,MAAe,QAAnB,EAA6B;AAClC,YAAI,CAACyc,qFAAkB,CAACzc,GAAD,CAAvB,EAA8B;AAC5B8M,eAAK,CAACtZ,QAAN,CAAe,8DAAf;AACA,iBAAO,KAAP;AACD;AACF;;AACD,aAAO,IAAP;AACD;AACF;AAED;;;;;;;;;;AAQA,WAASqG,SAAT,GAA4B;AAC1B,QAAI,UAAK9C,MAAL,IAAe,CAAf,IAAoB,8DAAmB,UAA3C,EAAuD;AACrD,UAAMylB,MAAM,mDAAZ;AACA,aAAOA,MAAM,GAAG1P,KAAK,CAACvI,UAAN,CAAiB3K,MAAjB,EAAyB4iB,MAAzB,CAAH,GAAsC5iB,MAAnD;AACD;;AAED,WAAO8iB,SAAS,MAAT,mBAAP;AACD;AAED;;;;;;AAIA,MAAIziB,SAAS,GAAG0iB,2DAAI,CAAC,OAAD,EAAU,SAAS1iB,SAAT,CAAmB2iB,OAAnB,EAA4B;AACxD,QAAI,QAAOA,OAAP,MAAmB,QAAvB,EAAiC;AAC/B9P,WAAK,CAACtZ,QAAN,CAAe,qCAAf;AACA;AACD;;AAED,QAAIqpB,MAAM,GAAGhrB,MAAM,CAACkP,IAAP,CAAY6b,OAAZ,CAAb;AACA,QAAIE,aAAa,GAAG,EAApB;AAEAD,UAAM,CAAC9f,OAAP,CAAe,UAAAwf,KAAK,EAAI;AACtB,UAAIC,MAAM,GAAGI,OAAO,CAACL,KAAD,CAApB;;AAEA,UAAI,QAAO7B,QAAQ,CAAC6B,KAAD,CAAf,MAA2B,QAA3B,IAAuC,QAAOC,MAAP,MAAkB,QAA7D,EAAuE;AACrEA,cAAM,GAAG,SAAc,EAAd,EAAkB9B,QAAQ,CAAC6B,KAAD,CAA1B,EAAmCC,MAAnC,CAAT;AACD;;AAEDM,mBAAa,CAACP,KAAD,CAAb,GAAuB3iB,MAAM,CAAC2iB,KAAD,CAAN,GAAgBC,MAAvC;AACD,KARD;AAUAH,mBAAe,CAACS,aAAD,CAAf;AACD,GApBmB,CAApB;AAsBA;;;;;AAIA,WAASC,WAAT,CAAqBH,OAArB,EAA8B;AAC5B,QAAI,QAAOlC,QAAP,MAAoB,QAAxB,EAAkC;AAChC5N,WAAK,CAACtZ,QAAN,CAAe,4BAAf;AACA;AACD;;AAED,aAAcknB,QAAd,EAAwBkC,OAAxB,EAN4B,CAO5B;;;AACA,aAAchjB,MAAd,EAAsBgjB,OAAtB;AACD;AAED;;;;;;;;;;;;;;;;;;;;;;;AAqBA,WAASF,SAAT,CAAmBH,KAAnB,EAA0BS,QAA1B,EAAoC;AAClC,QAAI3f,QAAQ,GAAG2f,QAAf;;AAEA,QAAI,OAAOT,KAAP,KAAiB,QAArB,EAA+B;AAC7B;AACA;AACAlf,cAAQ,GAAGkf,KAAX;AACAA,WAAK,GAAGhC,UAAR;AACD;;AAED,QAAI,OAAOld,QAAP,KAAoB,UAAxB,EAAoC;AAClCyP,WAAK,CAACtZ,QAAN,CAAe,6BAAf;AACA;AACD;;AAEDinB,aAAS,CAAC/iB,IAAV,CAAe;AAAE6kB,WAAK,EAALA,KAAF;AAASlf,cAAQ,EAARA;AAAT,KAAf,EAfkC,CAiBlC;;AACA,WAAO,SAAS4f,WAAT,GAAuB;AAC5BxC,eAAS,CAACyC,MAAV,CAAiBzC,SAAS,CAACtd,OAAV,CAAkB6f,QAAlB,CAAjB,EAA8C,CAA9C;AACD,KAFD;AAGD;AAED;;;;;AAGA,WAASX,eAAT,CAAyBO,OAAzB,EAAkC;AAChC,QAAMO,MAAM,GAAGtrB,MAAM,CAACkP,IAAP,CAAY6b,OAAZ,CAAf,CADgC,CAGhC;;AACAnC,aAAS,CACNlZ,MADH,CACU,UAAAyb,QAAQ;AAAA,aAAIra,yEAAQ,CAACwa,MAAD,EAASH,QAAQ,CAACT,KAAlB,CAAZ;AAAA,KADlB,EAEGxf,OAFH,CAEW,UAAAigB,QAAQ,EAAI;AACnBA,cAAQ,CAAC3f,QAAT,qBAAqB2f,QAAQ,CAACT,KAA9B,EAAsCK,OAAO,CAACI,QAAQ,CAACT,KAAV,CAA7C;AACD,KAJH,EAJgC,CAUhC;;AACA9B,aAAS,CACNlZ,MADH,CACU,UAAAyb,QAAQ;AAAA,aAAIA,QAAQ,CAACT,KAAT,KAAmBhC,UAAvB;AAAA,KADlB,EAEGxd,OAFH,CAEW,UAAAigB,QAAQ;AAAA,aAAIA,QAAQ,CAAC3f,QAAT,CAAkBuf,OAAlB,CAAJ;AAAA,KAFnB;AAGD;;AAEDjC,aAAW;AAEX,SAAO;AACL9gB,aAAS,EAATA,SADK;AAELI,aAAS,EAATA,SAFK;AAGL8iB,eAAW,EAAXA,WAHK;AAILpC,eAAW,EAAXA;AAJK,GAAP;AAMD;AAEM,IAAM/gB,MAAM,GAAG4gB,SAAS,EAAxB,C;;;;;;;ACvVP;AAAA;AAAA;AAAA;AAAA;;AACA,IAAM1N,KAAK,GAAG1b,mBAAO,CAAC,CAAD,CAArB;;AAEA,IAAMgsB,iBAAiB,GAAG,CAA1B;AACA,IAAMC,cAAc,GAAG;AACrB,aAAW,CAAC;AACV,WAAO,CADG;AAEV,WAAO,CAFG;AAGV,iBAAa;AAHH,GAAD;AADU,CAAvB;AAOA,IAAMC,cAAc,GAAG;AACrB,aAAW,CAAC;AACV,WAAO,CADG;AAEV,WAAO,EAFG;AAGV,iBAAa;AAHH,GAAD;AADU,CAAvB;AAOA,IAAMC,cAAc,GAAG;AACrB,aAAW,CAAC;AACV,WAAO,CADG;AAEV,WAAO,EAFG;AAGV,iBAAa;AAHH,GAAD;AADU,CAAvB;AAOA,IAAMC,iBAAiB,GAAG;AACxB,aAAW,CAAC;AACV,WAAO,CADG;AAEV,WAAO,CAFG;AAGV,iBAAa;AAHH,GAAD,EAKX;AACE,WAAO,CADT;AAEE,WAAO,CAFT;AAGE,iBAAa;AAHf,GALW,EAUX;AACE,WAAO,CADT;AAEE,WAAO,EAFT;AAGE,iBAAa;AAHf,GAVW;AADa,CAA1B;AAiBA,IAAMC,gBAAgB,GAAG;AACvB,aAAW,CAAC;AACV,WAAO,CADG;AAEV,WAAO,CAFG;AAGV,iBAAa;AAHH,GAAD,EAKX;AACE,WAAO,CADT;AAEE,WAAO,EAFT;AAGE,iBAAa;AAHf,GALW,EAUX;AACE,WAAO,EADT;AAEE,WAAO,EAFT;AAGE,iBAAa;AAHf,GAVW;AADY,CAAzB;;AAkBA,SAASC,oBAAT,CAA8Btb,GAA9B,EAAmCub,YAAnC,EAA4E;AAAA,MAA3BC,qBAA2B,uEAAH,CAAG;AAC1E,MAAIC,QAAQ,GAAGC,UAAU,CAAC1b,GAAD,CAAzB;;AACA,MAAI7J,KAAK,CAACslB,QAAD,CAAT,EAAqB;AACnBA,YAAQ,GAAG,EAAX;AACD;;AAED,SAAO;AACLE,OAAG,EAAGF,QAAQ,KAAK,EAAd,GAAoB,EAApB,GAAyBG,iBAAiB,CAAC5b,GAAD,EAAMib,cAAN,EAAsBO,qBAAtB,CAD1C;AAELK,OAAG,EAAGJ,QAAQ,KAAK,EAAd,GAAoB,EAApB,GAAyBG,iBAAiB,CAAC5b,GAAD,EAAMkb,cAAN,EAAsBM,qBAAtB,CAF1C;AAGLM,QAAI,EAAGL,QAAQ,KAAK,EAAd,GAAoB,EAApB,GAAyBG,iBAAiB,CAAC5b,GAAD,EAAMmb,cAAN,EAAsBK,qBAAtB,CAH3C;AAILO,QAAI,EAAGN,QAAQ,KAAK,EAAd,GAAoB,EAApB,GAAyBG,iBAAiB,CAAC5b,GAAD,EAAMqb,gBAAN,EAAwBG,qBAAxB,CAJ3C;AAKLQ,SAAK,EAAGP,QAAQ,KAAK,EAAd,GAAoB,EAApB,GAAyBG,iBAAiB,CAAC5b,GAAD,EAAMob,iBAAN,EAAyBI,qBAAzB,CAL5C;AAMLS,UAAM,EAAGR,QAAQ,KAAK,EAAd,GAAoB,EAApB,GAAyBG,iBAAiB,CAAC5b,GAAD,EAAMub,YAAN,EAAoBC,qBAApB;AAN7C,GAAP;AAQD;;AAED,SAASI,iBAAT,CAA2B5b,GAA3B,EAAgCxI,MAAhC,EAAwCgkB,qBAAxC,EAA+D;AAC7D,MAAIU,MAAM,GAAG,EAAb;;AACA,MAAI,CAAC7B,kBAAkB,CAAC7iB,MAAD,CAAvB,EAAiC;AAC/B,WAAO0kB,MAAP;AACD;;AACD,MAAMC,GAAG,GAAG3kB,MAAM,CAAC4kB,OAAP,CAAeld,MAAf,CAAsB,UAACmd,IAAD,EAAOC,IAAP,EAAgB;AAChD,QAAID,IAAI,CAAC3V,GAAL,GAAW4V,IAAI,CAAC5V,GAApB,EAAyB;AACvB,aAAO2V,IAAP;AACD;;AACD,WAAOC,IAAP;AACD,GALW,EAKT;AACD,WAAO;AADN,GALS,CAAZ;AAQA,MAAIC,MAAM,GAAGhe,qEAAI,CAAC/G,MAAM,CAAC4kB,OAAR,EAAiB,UAAAG,MAAM,EAAI;AAC1C,QAAIvc,GAAG,GAAGmc,GAAG,CAACzV,GAAJ,GAAU8U,qBAApB,EAA2C;AACzC;AACA,UAAIgB,SAAS,GAAGD,MAAM,CAACC,SAAvB;;AACA,UAAI,OAAOA,SAAP,KAAqB,WAAzB,EAAsC;AACpCA,iBAAS,GAAGxB,iBAAZ;AACD;;AACDkB,YAAM,GAAG,CAACK,MAAM,CAAC7V,GAAP,GAAa8U,qBAAd,EAAqCiB,OAArC,CAA6CD,SAA7C,CAAT;AACD,KAPD,MAOO,IAAIxc,GAAG,IAAIuc,MAAM,CAAC7V,GAAP,GAAa8U,qBAApB,IAA6Cxb,GAAG,IAAIuc,MAAM,CAAC/V,GAAP,GAAagV,qBAArE,EAA4F;AACjG,aAAOe,MAAP;AACD;AACF,GAXgB,CAAjB;;AAYA,MAAIA,MAAJ,EAAY;AACVL,UAAM,GAAGQ,YAAY,CAAC1c,GAAD,EAAMuc,MAAN,EAAcf,qBAAd,CAArB;AACD;;AACD,SAAOU,MAAP;AACD;;AAED,SAAS7B,kBAAT,CAA4B7iB,MAA5B,EAAoC;AAClC,MAAIkT,KAAK,CAAClQ,OAAN,CAAchD,MAAd,KAAyB,CAACA,MAAM,CAAC4kB,OAAjC,IAA4C,CAACrqB,KAAK,CAACqD,OAAN,CAAcoC,MAAM,CAAC4kB,OAArB,CAAjD,EAAgF;AAC9E,WAAO,KAAP;AACD;;AACD,MAAIO,OAAO,GAAG,IAAd;AACAnlB,QAAM,CAAC4kB,OAAP,CAAezhB,OAAf,CAAuB,UAAA4hB,MAAM,EAAI;AAC/B,QAAI,OAAOA,MAAM,CAAC/V,GAAd,KAAsB,WAAtB,IAAqC,CAAC+V,MAAM,CAAC7V,GAA7C,IAAoD,CAAC6V,MAAM,CAACK,SAAhE,EAA2E;AACzED,aAAO,GAAG,KAAV;AACD;AACF,GAJD;AAKA,SAAOA,OAAP;AACD;;AAED,SAASD,YAAT,CAAsB1c,GAAtB,EAA2Buc,MAA3B,EAAmCf,qBAAnC,EAA0D;AACxD,MAAMgB,SAAS,GAAG,OAAOD,MAAM,CAACC,SAAd,KAA4B,WAA5B,GAA0CD,MAAM,CAACC,SAAjD,GAA6DxB,iBAA/E;AACA,MAAM4B,SAAS,GAAGL,MAAM,CAACK,SAAP,GAAmBpB,qBAArC;AACA,MAAMqB,SAAS,GAAGN,MAAM,CAAC/V,GAAP,GAAagV,qBAA/B,CAHwD,CAKxD;AACA;AACA;AACA;AACA;;AACA,MAAIsB,GAAG,GAAGzpB,IAAI,CAACypB,GAAL,CAAS,EAAT,EAAaN,SAAS,GAAG,CAAzB,CAAV;AACA,MAAIO,UAAU,GAAG,CAAE/c,GAAG,GAAG8c,GAAP,GAAeD,SAAS,GAAGC,GAA5B,KAAqCF,SAAS,GAAGE,GAAjD,CAAjB;AACA,MAAIE,SAAS,GAAK3pB,IAAI,CAAC+M,KAAL,CAAW2c,UAAX,CAAD,GAA2BH,SAA5B,GAAyCC,SAAzD,CAZwD,CAaxD;AACA;;AACAG,WAAS,GAAGrY,MAAM,CAACqY,SAAS,CAACP,OAAV,CAAkB,EAAlB,CAAD,CAAlB;AACA,SAAOO,SAAS,CAACP,OAAV,CAAkBD,SAAlB,CAAP;AACD;;;;;;;;;ACzIY;AACb;AACA,cAAc,mBAAO,CAAC,EAAW;AACjC,YAAY,mBAAO,CAAC,EAAkB;AACtC;AACA;AACA;AACA,0CAA0C,gBAAgB,EAAE;AAC5D;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAO,CAAC,EAAuB;;;;;;;ACb/B;AACA;AACA;AACA;;;;;;;ACHA,SAAS,mBAAO,CAAC,EAAc;AAC/B,iBAAiB,mBAAO,CAAC,EAAkB;AAC3C,iBAAiB,mBAAO,CAAC,CAAgB;AACzC;AACA,CAAC;AACD;AACA;AACA;;;;;;;ACPA,eAAe,mBAAO,CAAC,EAAc;AACrC,qBAAqB,mBAAO,CAAC,EAAmB;AAChD,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C;;AAEA,YAAY,mBAAO,CAAC,CAAgB;AACpC;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;AACA;AACA;;;;;;;ACfA,eAAe,mBAAO,CAAC,CAAc;AACrC;AACA;AACA;AACA;;;;;;;ACJA,kBAAkB,mBAAO,CAAC,CAAgB,MAAM,mBAAO,CAAC,EAAU;AAClE,+BAA+B,mBAAO,CAAC,EAAe,gBAAgB,mBAAmB,UAAU,EAAE,EAAE;AACvG,CAAC;;;;;;;ACFD,eAAe,mBAAO,CAAC,CAAc;AACrC,eAAe,mBAAO,CAAC,CAAW;AAClC;AACA;AACA;AACA;AACA;;;;;;;ACNA;AACA,eAAe,mBAAO,CAAC,CAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACPA,uBAAuB;AACvB;AACA;AACA;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,mBAAO,CAAC,EAAQ;AAC1B,cAAc,mBAAO,CAAC,EAAY;AAClC,eAAe,mBAAO,CAAC,EAAc;AACrC,eAAe,mBAAO,CAAC,EAAc;AACrC,UAAU,mBAAO,CAAC,EAAyB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,eAAe;AACzB;AACA;AACA;AACA,wCAAwC;AACxC;AACA,8BAA8B;AAC9B,6BAA6B;AAC7B,+BAA+B;AAC/B,mCAAmC;AACnC,SAAS,iCAAiC;AAC1C;AACA;AACA;AACA;AACA;;;;;;;AC3CA;AACA,cAAc,mBAAO,CAAC,EAAY;AAClC;AACA;AACA;;;;;;;ACJA;AACA,yBAAyB,mBAAO,CAAC,EAA8B;;AAE/D;AACA;AACA;;;;;;;ACLA,eAAe,mBAAO,CAAC,CAAc;AACrC,cAAc,mBAAO,CAAC,EAAa;AACnC,cAAc,mBAAO,CAAC,EAAQ;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACfA;AACA,UAAU,mBAAO,CAAC,EAAQ;AAC1B;AACA;AACA;;;;;;;ACJA,YAAY,mBAAO,CAAC,EAAW;AAC/B,UAAU,mBAAO,CAAC,EAAQ;AAC1B,aAAa,mBAAO,CAAC,CAAW;AAChC;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACVA,WAAW,mBAAO,CAAC,CAAS;AAC5B,aAAa,mBAAO,CAAC,CAAW;AAChC;AACA,kDAAkD;;AAElD;AACA,qEAAqE;AACrE,CAAC;AACD;AACA,QAAQ,mBAAO,CAAC,EAAY;AAC5B;AACA,CAAC;;;;;;;ACXD;;;;;;;ACAA;AACA;AACA;AACA;AACA;;;;;;;;ACJa;AACb;AACA,cAAc,mBAAO,CAAC,EAAW;AACjC,gBAAgB,mBAAO,CAAC,EAAmB;;AAE3C;AACA;AACA;AACA;AACA,CAAC;;AAED,mBAAO,CAAC,EAAuB;;;;;;;ACX/B;AACA;AACA,gBAAgB,mBAAO,CAAC,EAAe;AACvC,eAAe,mBAAO,CAAC,EAAc;AACrC,sBAAsB,mBAAO,CAAC,EAAsB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,YAAY,eAAe;AAChC;AACA,KAAK;AACL;AACA;;;;;;;ACtBA;AACA,cAAc,mBAAO,CAAC,EAAY;AAClC,cAAc,mBAAO,CAAC,EAAY;AAClC;AACA;AACA;;;;;;;ACLA,gBAAgB,mBAAO,CAAC,EAAe;AACvC;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,IAAIjC,IAAI,GAAG0C,iDAAQ,CAAC;AACzBC,OAAK,EAAED,iDAAQ,CAACE,IAAT,GAAgBF,iDAAQ,CAACG,KAAzB,GAAiCH,iDAAQ,CAACI;AADxB,CAAD,CAAnB;AAIA,IAAMC,OAAO,GAAG/C,IAAI,CAACgD,GAArB;AAEA,SAASC,qBAAT,CAA+BC,MAA/B,EAAuCC,MAAvC,EAA8D;AAAA,MAAfC,QAAe,uEAAJ,EAAI;AACnE,MAAItpB,MAAM,GAAGopB,MAAM,CAACG,QAAP,CAAgB;AAACrD,QAAI,EAAEmD;AAAP,GAAhB,CAAb;;AACA,MAAIrpB,MAAM,CAACM,MAAP,KAAkB,CAAtB,EAAyB;AACvB8oB,UAAM,CAACI,MAAP,CAAcH,MAAd,EAAsBC,QAAtB;AACD;AACF,C;;;;;;ACdD;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,CAAC;;AAED,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB;;AAEpB;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,aAAa,yBAAyB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,+BAA+B;AAC/B,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,IAAI;AAC1E;AACA;AACA;AACA;AACA;AACA,oCAAoC,mBAAmB,kBAAkB;AACzE;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB,KAAK;AAC5C;AACA;AACA;AACA,mBAAmB;AACnB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,aAAa;AACtD;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC1YA;;AAEA;AACA,oCAAoC;;AAEpC;AACA,gBAAgB;AAChB,aAAa;AACb;AACA;AACA;AACA,MAAM,KAAK,iCAAiC,O;AAC5C,WAAW,KAAK,8BAA8B;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC3BO,SAASG,OAAT,CAAiBC,KAAjB,EAAwB;AAC7B,SAAO,CAACA,KAAD,GAAS,EAAT,GAAcA,KAAK,CACvB9qB,OADkB,CACV,KADU,EACH,EADG,EAElByC,KAFkB,CAEZ,GAFY,EAGlBwJ,MAHkB,CAGX,UAAC8e,GAAD,EAAMC,QAAN,EAAmB;AAAA,0BACZA,QAAQ,CAACvoB,KAAT,CAAe,GAAf,CADY;AAAA;AAAA,QACpBpB,CADoB;AAAA,QACjB8Q,CADiB;;AAEzB,QAAI,QAAQxE,IAAR,CAAatM,CAAb,CAAJ,EAAqB;AACnBA,OAAC,GAAGA,CAAC,CAACrB,OAAF,CAAU,IAAV,EAAgB,EAAhB,CAA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","file":"bid-adapters.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e80a59f75dc16f57cdb5","import { config } from './config';\nimport clone from 'just-clone';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\nimport { parse } from './url';\nconst CONSTANTS = require('./constants');\n\nvar _loggingChecked = false;\n\nvar tArr = 'Array';\nvar tStr = 'String';\nvar tFn = 'Function';\nvar tNumb = 'Number';\nvar tObject = 'Object';\nvar tBoolean = 'Boolean';\nvar toString = Object.prototype.toString;\nlet consoleExists = Boolean(window.console);\nlet consoleLogExists = Boolean(consoleExists && window.console.log);\nlet consoleInfoExists = Boolean(consoleExists && window.console.info);\nlet consoleWarnExists = Boolean(consoleExists && window.console.warn);\nlet consoleErrorExists = Boolean(consoleExists && window.console.error);\n\n// this allows stubbing of utility functions that are used internally by other utility functions\nexport const internal = {\n  checkCookieSupport,\n  createTrackPixelIframeHtml,\n  getWindowSelf,\n  getWindowTop,\n  getAncestorOrigins,\n  getTopFrameReferrer,\n  getWindowLocation,\n  getTopWindowLocation,\n  insertUserSyncIframe,\n  insertElement,\n  isFn,\n  triggerPixel,\n  logError,\n  logWarn,\n  logMessage,\n  logInfo\n};\n\nvar uniqueRef = {};\nexport let bind = function(a, b) { return b; }.bind(null, 1, uniqueRef)() === uniqueRef\n  ? Function.prototype.bind\n  : function(bind) {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function() {\n      return self.apply(bind, args.concat(Array.prototype.slice.call(arguments)));\n    };\n  };\n\n/*\n *   Substitutes into a string from a given map using the token\n *   Usage\n *   var str = 'text %%REPLACE%% this text with %%SOMETHING%%';\n *   var map = {};\n *   map['replace'] = 'it was subbed';\n *   map['something'] = 'something else';\n *   console.log(replaceTokenInString(str, map, '%%')); => \"text it was subbed this text with something else\"\n */\nexport function replaceTokenInString(str, map, token) {\n  _each(map, function (value, key) {\n    value = (value === undefined) ? '' : value;\n\n    var keyString = token + key.toUpperCase() + token;\n    var re = new RegExp(keyString, 'g');\n\n    str = str.replace(re, value);\n  });\n\n  return str;\n}\n\n/* utility method to get incremental integer starting from 1 */\nvar getIncrementalInteger = (function () {\n  var count = 0;\n  return function () {\n    count++;\n    return count;\n  };\n})();\n\n// generate a random string (to be used as a dynamic JSONP callback)\nexport function getUniqueIdentifierStr() {\n  return getIncrementalInteger() + Math.random().toString(16).substr(2);\n}\n\n/**\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f,\n * and y is replaced with a random hexadecimal digit from 8 to b.\n * https://gist.github.com/jed/982883 via node-uuid\n */\nexport function generateUUID(placeholder) {\n  return placeholder\n    ? (placeholder ^ _getRandomData() >> placeholder / 4).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, generateUUID);\n}\n\n/**\n * Returns random data using the Crypto API if available and Math.random if not\n * Method is from https://gist.github.com/jed/982883 like generateUUID, direct link https://gist.github.com/jed/982883#gistcomment-45104\n */\nfunction _getRandomData() {\n  if (window && window.crypto && window.crypto.getRandomValues) {\n    return crypto.getRandomValues(new Uint8Array(1))[0] % 16;\n  } else {\n    return Math.random() * 16;\n  }\n}\n\nexport function getBidIdParameter(key, paramsObj) {\n  if (paramsObj && paramsObj[key]) {\n    return paramsObj[key];\n  }\n\n  return '';\n}\n\nexport function tryAppendQueryString(existingUrl, key, value) {\n  if (value) {\n    return existingUrl += key + '=' + encodeURIComponent(value) + '&';\n  }\n\n  return existingUrl;\n}\n\n// parse a query string object passed in bid params\n// bid params should be an object such as {key: \"value\", key1 : \"value1\"}\nexport function parseQueryStringParameters(queryObj) {\n  let result = '';\n  for (var k in queryObj) {\n    if (queryObj.hasOwnProperty(k)) { result += k + '=' + encodeURIComponent(queryObj[k]) + '&'; }\n  }\n\n  return result;\n}\n\n// transform an AdServer targeting bids into a query string to send to the adserver\nexport function transformAdServerTargetingObj(targeting) {\n  // we expect to receive targeting for a single slot at a time\n  if (targeting && Object.getOwnPropertyNames(targeting).length > 0) {\n    return getKeys(targeting)\n      .map(key => `${key}=${encodeURIComponent(getValue(targeting, key))}`).join('&');\n  } else {\n    return '';\n  }\n}\n\n/**\n * Read an adUnit object and return the sizes used in an [[728, 90]] format (even if they had [728, 90] defined)\n * Preference is given to the `adUnit.mediaTypes.banner.sizes` object over the `adUnit.sizes`\n * @param {object} adUnit one adUnit object from the normal list of adUnits\n * @returns {Array.<number[]>} array of arrays containing numeric sizes\n */\nexport function getAdUnitSizes(adUnit) {\n  if (!adUnit) {\n    return;\n  }\n\n  let sizes = [];\n  if (adUnit.mediaTypes && adUnit.mediaTypes.banner && Array.isArray(adUnit.mediaTypes.banner.sizes)) {\n    let bannerSizes = adUnit.mediaTypes.banner.sizes;\n    if (Array.isArray(bannerSizes[0])) {\n      sizes = bannerSizes;\n    } else {\n      sizes.push(bannerSizes);\n    }\n  } else if (Array.isArray(adUnit.sizes)) {\n    if (Array.isArray(adUnit.sizes[0])) {\n      sizes = adUnit.sizes;\n    } else {\n      sizes.push(adUnit.sizes);\n    }\n  }\n  return sizes;\n}\n\n/**\n * Parse a GPT-Style general size Array like `[[300, 250]]` or `\"300x250,970x90\"` into an array of sizes `[\"300x250\"]` or '['300x250', '970x90']'\n * @param  {(Array.<number[]>|Array.<number>)} sizeObj Input array or double array [300,250] or [[300,250], [728,90]]\n * @return {Array.<string>}  Array of strings like `[\"300x250\"]` or `[\"300x250\", \"728x90\"]`\n */\nexport function parseSizesInput(sizeObj) {\n  var parsedSizes = [];\n\n  // if a string for now we can assume it is a single size, like \"300x250\"\n  if (typeof sizeObj === 'string') {\n    // multiple sizes will be comma-separated\n    var sizes = sizeObj.split(',');\n\n    // regular expression to match strigns like 300x250\n    // start of line, at least 1 number, an \"x\" , then at least 1 number, and the then end of the line\n    var sizeRegex = /^(\\d)+x(\\d)+$/i;\n    if (sizes) {\n      for (var curSizePos in sizes) {\n        if (hasOwn(sizes, curSizePos) && sizes[curSizePos].match(sizeRegex)) {\n          parsedSizes.push(sizes[curSizePos]);\n        }\n      }\n    }\n  } else if (typeof sizeObj === 'object') {\n    var sizeArrayLength = sizeObj.length;\n\n    // don't process empty array\n    if (sizeArrayLength > 0) {\n      // if we are a 2 item array of 2 numbers, we must be a SingleSize array\n      if (sizeArrayLength === 2 && typeof sizeObj[0] === 'number' && typeof sizeObj[1] === 'number') {\n        parsedSizes.push(parseGPTSingleSizeArray(sizeObj));\n      } else {\n        // otherwise, we must be a MultiSize array\n        for (var i = 0; i < sizeArrayLength; i++) {\n          parsedSizes.push(parseGPTSingleSizeArray(sizeObj[i]));\n        }\n      }\n    }\n  }\n\n  return parsedSizes;\n}\n\n// parse a GPT style sigle size array, (i.e [300,250])\n// into an AppNexus style string, (i.e. 300x250)\nexport function parseGPTSingleSizeArray(singleSize) {\n  // if we aren't exactly 2 items in this array, it is invalid\n  if (isArray(singleSize) && singleSize.length === 2 && (!isNaN(singleSize[0]) && !isNaN(singleSize[1]))) {\n    return singleSize[0] + 'x' + singleSize[1];\n  }\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopWindowLocation() {\n  if (inIframe()) {\n    let loc;\n    try {\n      loc = internal.getAncestorOrigins() || internal.getTopFrameReferrer();\n    } catch (e) {\n      logInfo('could not obtain top window location', e);\n    }\n    if (loc) return parse(loc, {'decodeSearchAsString': true});\n  }\n  return internal.getWindowLocation();\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopFrameReferrer() {\n  try {\n    // force an exception in x-domain environments. #1509\n    window.top.location.toString();\n    let referrerLoc = '';\n    let currentWindow;\n    do {\n      currentWindow = currentWindow ? currentWindow.parent : window;\n      if (currentWindow.document && currentWindow.document.referrer) {\n        referrerLoc = currentWindow.document.referrer;\n      }\n    }\n    while (currentWindow !== window.top);\n    return referrerLoc;\n  } catch (e) {\n    return window.document.referrer;\n  }\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getAncestorOrigins() {\n  if (window.document.location && window.document.location.ancestorOrigins &&\n    window.document.location.ancestorOrigins.length >= 1) {\n    return window.document.location.ancestorOrigins[window.document.location.ancestorOrigins.length - 1];\n  }\n}\n\nexport function getWindowTop() {\n  return window.top;\n}\n\nexport function getWindowSelf() {\n  return window.self;\n}\n\nexport function getWindowLocation() {\n  return window.location;\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopWindowUrl() {\n  let href;\n  try {\n    href = internal.getTopWindowLocation().href;\n  } catch (e) {\n    href = '';\n  }\n  return href;\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopWindowReferrer() {\n  try {\n    return window.top.document.referrer;\n  } catch (e) {\n    return document.referrer;\n  }\n}\n\n/**\n * Wrappers to console.(log | info | warn | error). Takes N arguments, the same as the native methods\n */\nexport function logMessage() {\n  if (debugTurnedOn() && consoleLogExists) {\n    console.log.apply(console, decorateLog(arguments, 'MESSAGE:'));\n  }\n}\n\nexport function logInfo() {\n  if (debugTurnedOn() && consoleInfoExists) {\n    console.info.apply(console, decorateLog(arguments, 'INFO:'));\n  }\n}\n\nexport function logWarn() {\n  if (debugTurnedOn() && consoleWarnExists) {\n    console.warn.apply(console, decorateLog(arguments, 'WARNING:'));\n  }\n}\n\nexport function logError() {\n  if (debugTurnedOn() && consoleErrorExists) {\n    console.error.apply(console, decorateLog(arguments, 'ERROR:'));\n  }\n}\n\nfunction decorateLog(args, prefix) {\n  args = [].slice.call(args);\n  prefix && args.unshift(prefix);\n  args.unshift('display: inline-block; color: #fff; background: #3b88c3; padding: 1px 4px; border-radius: 3px;');\n  args.unshift('%cPrebid');\n  return args;\n}\n\nexport function hasConsoleLogger() {\n  return consoleLogExists;\n}\n\nexport function debugTurnedOn() {\n  if (config.getConfig('debug') === false && _loggingChecked === false) {\n    const debug = getParameterByName(CONSTANTS.DEBUG_MODE).toUpperCase() === 'TRUE';\n    config.setConfig({ debug });\n    _loggingChecked = true;\n  }\n\n  return !!config.getConfig('debug');\n}\n\nexport function createInvisibleIframe() {\n  var f = document.createElement('iframe');\n  f.id = getUniqueIdentifierStr();\n  f.height = 0;\n  f.width = 0;\n  f.border = '0px';\n  f.hspace = '0';\n  f.vspace = '0';\n  f.marginWidth = '0';\n  f.marginHeight = '0';\n  f.style.border = '0';\n  f.scrolling = 'no';\n  f.frameBorder = '0';\n  f.src = 'about:blank';\n  f.style.display = 'none';\n  return f;\n}\n\n/*\n *   Check if a given parameter name exists in query string\n *   and if it does return the value\n */\nexport function getParameterByName(name) {\n  var regexS = '[\\\\?&]' + name + '=([^&#]*)';\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return '';\n  }\n\n  return decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\n/**\n * This function validates paramaters.\n * @param  {Object} paramObj          [description]\n * @param  {string[]} requiredParamsArr [description]\n * @return {boolean}                   Bool if paramaters are valid\n */\nexport function hasValidBidRequest(paramObj, requiredParamsArr, adapter) {\n  var found = false;\n\n  function findParam(value, key) {\n    if (key === requiredParamsArr[i]) {\n      found = true;\n    }\n  }\n\n  for (var i = 0; i < requiredParamsArr.length; i++) {\n    found = false;\n\n    _each(paramObj, findParam);\n\n    if (!found) {\n      logError('Params are missing for bid request. One of these required paramaters are missing: ' + requiredParamsArr, adapter);\n      return false;\n    }\n  }\n\n  return true;\n}\n\n// Handle addEventListener gracefully in older browsers\nexport function addEventHandler(element, event, func) {\n  if (element.addEventListener) {\n    element.addEventListener(event, func, true);\n  } else if (element.attachEvent) {\n    element.attachEvent('on' + event, func);\n  }\n}\n/**\n * Return if the object is of the\n * given type.\n * @param {*} object to test\n * @param {String} _t type string (e.g., Array)\n * @return {Boolean} if object is of type _t\n */\nexport function isA(object, _t) {\n  return toString.call(object) === '[object ' + _t + ']';\n}\n\nexport function isFn(object) {\n  return isA(object, tFn);\n}\n\nexport function isStr(object) {\n  return isA(object, tStr);\n}\n\nexport function isArray(object) {\n  return isA(object, tArr);\n}\n\nexport function isNumber(object) {\n  return isA(object, tNumb);\n}\n\nexport function isPlainObject(object) {\n  return isA(object, tObject);\n}\n\nexport function isBoolean(object) {\n  return isA(object, tBoolean);\n}\n\n/**\n * Return if the object is \"empty\";\n * this includes falsey, no keys, or no items at indices\n * @param {*} object object to test\n * @return {Boolean} if object is empty\n */\nexport function isEmpty(object) {\n  if (!object) return true;\n  if (isArray(object) || isStr(object)) {\n    return !(object.length > 0);\n  }\n\n  for (var k in object) {\n    if (hasOwnProperty.call(object, k)) return false;\n  }\n\n  return true;\n}\n\n/**\n * Return if string is empty, null, or undefined\n * @param str string to test\n * @returns {boolean} if string is empty\n */\nexport function isEmptyStr(str) {\n  return isStr(str) && (!str || str.length === 0);\n}\n\n/**\n * Iterate object with the function\n * falls back to es5 `forEach`\n * @param {Array|Object} object\n * @param {Function(value, key, object)} fn\n */\nexport function _each(object, fn) {\n  if (isEmpty(object)) return;\n  if (isFn(object.forEach)) return object.forEach(fn, this);\n\n  var k = 0;\n  var l = object.length;\n\n  if (l > 0) {\n    for (; k < l; k++) fn(object[k], k, object);\n  } else {\n    for (k in object) {\n      if (hasOwnProperty.call(object, k)) fn.call(this, object[k], k);\n    }\n  }\n}\n\nexport function contains(a, obj) {\n  if (isEmpty(a)) {\n    return false;\n  }\n\n  if (isFn(a.indexOf)) {\n    return a.indexOf(obj) !== -1;\n  }\n\n  var i = a.length;\n  while (i--) {\n    if (a[i] === obj) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport let indexOf = (function () {\n  if (Array.prototype.indexOf) {\n    return Array.prototype.indexOf;\n  }\n\n  // ie8 no longer supported\n  // return polyfills.indexOf;\n}());\n\n/**\n * Map an array or object into another array\n * given a function\n * @param {Array|Object} object\n * @param {Function(value, key, object)} callback\n * @return {Array}\n */\nexport function _map(object, callback) {\n  if (isEmpty(object)) return [];\n  if (isFn(object.map)) return object.map(callback);\n  var output = [];\n  _each(object, function (value, key) {\n    output.push(callback(value, key, object));\n  });\n\n  return output;\n}\n\nvar hasOwn = function (objectToCheck, propertyToCheckFor) {\n  if (objectToCheck.hasOwnProperty) {\n    return objectToCheck.hasOwnProperty(propertyToCheckFor);\n  } else {\n    return (typeof objectToCheck[propertyToCheckFor] !== 'undefined') && (objectToCheck.constructor.prototype[propertyToCheckFor] !== objectToCheck[propertyToCheckFor]);\n  }\n};\n\n/*\n* Inserts an element(elm) as targets child, by default as first child\n* @param {HTMLElement} elm\n* @param {HTMLElement} [doc]\n* @param {HTMLElement} [target]\n* @param {Boolean} [asLastChildChild]\n* @return {HTMLElement}\n*/\nexport function insertElement(elm, doc, target, asLastChildChild) {\n  doc = doc || document;\n  let parentEl;\n  if (target) {\n    parentEl = doc.getElementsByTagName(target);\n  } else {\n    parentEl = doc.getElementsByTagName('head');\n  }\n  try {\n    parentEl = parentEl.length ? parentEl : doc.getElementsByTagName('body');\n    if (parentEl.length) {\n      parentEl = parentEl[0];\n      let insertBeforeEl = asLastChildChild ? null : parentEl.firstChild;\n      return parentEl.insertBefore(elm, insertBeforeEl);\n    }\n  } catch (e) {}\n}\n\n/**\n * Inserts an image pixel with the specified `url` for cookie sync\n * @param {string} url URL string of the image pixel to load\n * @param  {function} [done] an optional exit callback, used when this usersync pixel is added during an async process\n */\nexport function triggerPixel(url, done) {\n  const img = new Image();\n  if (done && internal.isFn(done)) {\n    img.addEventListener('load', done);\n    img.addEventListener('error', done);\n  }\n  img.src = url;\n}\n\nexport function callBurl({ source, burl }) {\n  if (source === CONSTANTS.S2S.SRC && burl) {\n    internal.triggerPixel(burl);\n  }\n}\n\n/**\n * Inserts an empty iframe with the specified `html`, primarily used for tracking purposes\n * (though could be for other purposes)\n * @param {string} htmlCode snippet of HTML code used for tracking purposes\n */\nexport function insertHtmlIntoIframe(htmlCode) {\n  if (!htmlCode) {\n    return;\n  }\n\n  let iframe = document.createElement('iframe');\n  iframe.id = getUniqueIdentifierStr();\n  iframe.width = 0;\n  iframe.height = 0;\n  iframe.hspace = '0';\n  iframe.vspace = '0';\n  iframe.marginWidth = '0';\n  iframe.marginHeight = '0';\n  iframe.style.display = 'none';\n  iframe.style.height = '0px';\n  iframe.style.width = '0px';\n  iframe.scrolling = 'no';\n  iframe.frameBorder = '0';\n  iframe.allowtransparency = 'true';\n\n  internal.insertElement(iframe, document, 'body');\n\n  iframe.contentWindow.document.open();\n  iframe.contentWindow.document.write(htmlCode);\n  iframe.contentWindow.document.close();\n}\n\n/**\n * Inserts empty iframe with the specified `url` for cookie sync\n * @param  {string} url URL to be requested\n * @param  {string} encodeUri boolean if URL should be encoded before inserted. Defaults to true\n * @param  {function} [done] an optional exit callback, used when this usersync pixel is added during an async process\n */\nexport function insertUserSyncIframe(url, done) {\n  let iframeHtml = internal.createTrackPixelIframeHtml(url, false, 'allow-scripts allow-same-origin');\n  let div = document.createElement('div');\n  div.innerHTML = iframeHtml;\n  let iframe = div.firstChild;\n  if (done && internal.isFn(done)) {\n    iframe.addEventListener('load', done);\n    iframe.addEventListener('error', done);\n  }\n  internal.insertElement(iframe, document, 'html', true);\n};\n\n/**\n * Creates a snippet of HTML that retrieves the specified `url`\n * @param  {string} url URL to be requested\n * @return {string}     HTML snippet that contains the img src = set to `url`\n */\nexport function createTrackPixelHtml(url) {\n  if (!url) {\n    return '';\n  }\n\n  let escapedUrl = encodeURI(url);\n  let img = '<div style=\"position:absolute;left:0px;top:0px;visibility:hidden;\">';\n  img += '<img src=\"' + escapedUrl + '\"></div>';\n  return img;\n};\n\n/**\n * Creates a snippet of Iframe HTML that retrieves the specified `url`\n * @param  {string} url plain URL to be requested\n * @param  {string} encodeUri boolean if URL should be encoded before inserted. Defaults to true\n * @param  {string} sandbox string if provided the sandbox attribute will be included with the given value\n * @return {string}     HTML snippet that contains the iframe src = set to `url`\n */\nexport function createTrackPixelIframeHtml(url, encodeUri = true, sandbox = '') {\n  if (!url) {\n    return '';\n  }\n  if (encodeUri) {\n    url = encodeURI(url);\n  }\n  if (sandbox) {\n    sandbox = `sandbox=\"${sandbox}\"`;\n  }\n\n  return `<iframe ${sandbox} id=\"${getUniqueIdentifierStr()}\"\n      frameborder=\"0\"\n      allowtransparency=\"true\"\n      marginheight=\"0\" marginwidth=\"0\"\n      width=\"0\" hspace=\"0\" vspace=\"0\" height=\"0\"\n      style=\"height:0px;width:0px;display:none;\"\n      scrolling=\"no\"\n      src=\"${url}\">\n    </iframe>`;\n}\n\n/**\n * Returns iframe document in a browser agnostic way\n * @param  {Object} iframe reference\n * @return {Object}        iframe `document` reference\n */\nexport function getIframeDocument(iframe) {\n  if (!iframe) {\n    return;\n  }\n\n  let doc;\n  try {\n    if (iframe.contentWindow) {\n      doc = iframe.contentWindow.document;\n    } else if (iframe.contentDocument.document) {\n      doc = iframe.contentDocument.document;\n    } else {\n      doc = iframe.contentDocument;\n    }\n  } catch (e) {\n    internal.logError('Cannot get iframe document', e);\n  }\n\n  return doc;\n}\n\nexport function getValueString(param, val, defaultValue) {\n  if (val === undefined || val === null) {\n    return defaultValue;\n  }\n  if (isStr(val)) {\n    return val;\n  }\n  if (isNumber(val)) {\n    return val.toString();\n  }\n  internal.logWarn('Unsuported type for param: ' + param + ' required type: String');\n}\n\nexport function uniques(value, index, arry) {\n  return arry.indexOf(value) === index;\n}\n\nexport function flatten(a, b) {\n  return a.concat(b);\n}\n\nexport function getBidRequest(id, bidderRequests) {\n  if (!id) {\n    return;\n  }\n  let bidRequest;\n  bidderRequests.some(bidderRequest => {\n    let result = find(bidderRequest.bids, bid => ['bidId', 'adId', 'bid_id'].some(type => bid[type] === id));\n    if (result) {\n      bidRequest = result;\n    }\n    return result;\n  });\n  return bidRequest;\n}\n\nexport function getKeys(obj) {\n  return Object.keys(obj);\n}\n\nexport function getValue(obj, key) {\n  return obj[key];\n}\n\n/**\n * Get the key of an object for a given value\n */\nexport function getKeyByValue(obj, value) {\n  for (let prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      if (obj[prop] === value) {\n        return prop;\n      }\n    }\n  }\n}\n\nexport function getBidderCodes(adUnits = $$PREBID_GLOBAL$$.adUnits) {\n  // this could memoize adUnits\n  return adUnits.map(unit => unit.bids.map(bid => bid.bidder)\n    .reduce(flatten, [])).reduce(flatten).filter(uniques);\n}\n\nexport function isGptPubadsDefined() {\n  if (window.googletag && isFn(window.googletag.pubads) && isFn(window.googletag.pubads().getSlots)) {\n    return true;\n  }\n}\n\n// This function will get highest cpm value bid, in case of tie it will return the bid with lowest timeToRespond\nexport const getHighestCpm = getHighestCpmCallback('timeToRespond', (previous, current) => previous > current);\n\n// This function will get the oldest hightest cpm value bid, in case of tie it will return the bid which came in first\n// Use case for tie: https://github.com/prebid/Prebid.js/issues/2448\nexport const getOldestHighestCpmBid = getHighestCpmCallback('responseTimestamp', (previous, current) => previous > current);\n\n// This function will get the latest hightest cpm value bid, in case of tie it will return the bid which came in last\n// Use case for tie: https://github.com/prebid/Prebid.js/issues/2539\nexport const getLatestHighestCpmBid = getHighestCpmCallback('responseTimestamp', (previous, current) => previous < current);\n\nfunction getHighestCpmCallback(useTieBreakerProperty, tieBreakerCallback) {\n  return (previous, current) => {\n    if (previous.cpm === current.cpm) {\n      return tieBreakerCallback(previous[useTieBreakerProperty], current[useTieBreakerProperty]) ? current : previous;\n    }\n    return previous.cpm < current.cpm ? current : previous;\n  }\n}\n\n/**\n * FisherYates shuffle\n * http://stackoverflow.com/a/6274398\n * https://bost.ocks.org/mike/shuffle/\n * istanbul ignore next\n */\nexport function shuffle(array) {\n  let counter = array.length;\n\n  // while there are elements in the array\n  while (counter > 0) {\n    // pick a random index\n    let index = Math.floor(Math.random() * counter);\n\n    // decrease counter by 1\n    counter--;\n\n    // and swap the last element with it\n    let temp = array[counter];\n    array[counter] = array[index];\n    array[index] = temp;\n  }\n\n  return array;\n}\n\nexport function adUnitsFilter(filter, bid) {\n  return includes(filter, bid && bid.adUnitCode);\n}\n\n/**\n * Check if parent iframe of passed document supports content rendering via 'srcdoc' property\n * @param {HTMLDocument} doc document to check support of 'srcdoc'\n */\nexport function isSrcdocSupported(doc) {\n  // Firefox is excluded due to https://bugzilla.mozilla.org/show_bug.cgi?id=1265961\n  return doc.defaultView && doc.defaultView.frameElement &&\n    'srcdoc' in doc.defaultView.frameElement && !/firefox/i.test(navigator.userAgent);\n}\n\nexport function deepClone(obj) {\n  return clone(obj);\n}\n\nexport function inIframe() {\n  try {\n    return internal.getWindowSelf() !== internal.getWindowTop();\n  } catch (e) {\n    return true;\n  }\n}\n\nexport function isSafariBrowser() {\n  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n}\n\nexport function replaceAuctionPrice(str, cpm) {\n  if (!str) return;\n  return str.replace(/\\$\\{AUCTION_PRICE\\}/g, cpm);\n}\n\nexport function timestamp() {\n  return new Date().getTime();\n}\n\nexport function checkCookieSupport() {\n  if (window.navigator.cookieEnabled || !!document.cookie.length) {\n    return true;\n  }\n}\nexport function cookiesAreEnabled() {\n  if (internal.checkCookieSupport()) {\n    return true;\n  }\n  window.document.cookie = 'prebid.cookieTest';\n  return window.document.cookie.indexOf('prebid.cookieTest') != -1;\n}\n\nexport function getCookie(name) {\n  let m = window.document.cookie.match('(^|;)\\\\s*' + name + '\\\\s*=\\\\s*([^;]*)\\\\s*(;|$)');\n  return m ? decodeURIComponent(m[2]) : null;\n}\n\n/**\n * Given a function, return a function which only executes the original after\n * it's been called numRequiredCalls times.\n *\n * Note that the arguments from the previous calls will *not* be forwarded to the original function.\n * Only the final call's arguments matter.\n *\n * @param {function} func The function which should be executed, once the returned function has been executed\n *   numRequiredCalls times.\n * @param {int} numRequiredCalls The number of times which the returned function needs to be called before\n *   func is.\n */\nexport function delayExecution(func, numRequiredCalls) {\n  if (numRequiredCalls < 1) {\n    throw new Error(`numRequiredCalls must be a positive number. Got ${numRequiredCalls}`);\n  }\n  let numCalls = 0;\n  return function () {\n    numCalls++;\n    if (numCalls === numRequiredCalls) {\n      func.apply(null, arguments);\n    }\n  }\n}\n\n/**\n * https://stackoverflow.com/a/34890276/428704\n * @export\n * @param {array} xs\n * @param {string} key\n * @returns {Object} {${key_value}: ${groupByArray}, key_value: {groupByArray}}\n */\nexport function groupBy(xs, key) {\n  return xs.reduce(function(rv, x) {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n  }, {});\n}\n\n/**\n * deepAccess utility function useful for doing safe access (will not throw exceptions) of deep object paths.\n * @param {Object} obj The object containing the values you would like to access.\n * @param {string|number} path Object path to the value you would like to access.  Non-strings are coerced to strings.\n * @returns {*} The value found at the specified object path, or undefined if path is not found.\n */\nexport function deepAccess(obj, path) {\n  if (!obj) {\n    return;\n  }\n  path = String(path).split('.');\n  for (let i = 0; i < path.length; i++) {\n    obj = obj[path[i]];\n    if (typeof obj === 'undefined') {\n      return;\n    }\n  }\n  return obj;\n}\n\n/**\n * Returns content for a friendly iframe to execute a URL in script tag\n * @param {string} url URL to be executed in a script tag in a friendly iframe\n * <!--PRE_SCRIPT_TAG_MACRO--> and <!--POST_SCRIPT_TAG_MACRO--> are macros left to be replaced if required\n */\nexport function createContentToExecuteExtScriptInFriendlyFrame(url) {\n  if (!url) {\n    return '';\n  }\n\n  return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"><html><head><base target=\"_top\" /><script>inDapIF=true;</script></head><body><!--PRE_SCRIPT_TAG_MACRO--><script src=\"${url}\"></script><!--POST_SCRIPT_TAG_MACRO--></body></html>`;\n}\n\n/**\n * Build an object consisting of only defined parameters to avoid creating an\n * object with defined keys and undefined values.\n * @param {Object} object The object to pick defined params out of\n * @param {string[]} params An array of strings representing properties to look for in the object\n * @returns {Object} An object containing all the specified values that are defined\n */\nexport function getDefinedParams(object, params) {\n  return params\n    .filter(param => object[param])\n    .reduce((bid, param) => Object.assign(bid, { [param]: object[param] }), {});\n}\n\n/**\n * @typedef {Object} MediaTypes\n * @property {Object} banner banner configuration\n * @property {Object} native native configuration\n * @property {Object} video video configuration\n */\n\n/**\n * Validates an adunit's `mediaTypes` parameter\n * @param {MediaTypes} mediaTypes mediaTypes parameter to validate\n * @return {boolean} If object is valid\n */\nexport function isValidMediaTypes(mediaTypes) {\n  const SUPPORTED_MEDIA_TYPES = ['banner', 'native', 'video'];\n  const SUPPORTED_STREAM_TYPES = ['instream', 'outstream', 'adpod'];\n\n  const types = Object.keys(mediaTypes);\n\n  if (!types.every(type => includes(SUPPORTED_MEDIA_TYPES, type))) {\n    return false;\n  }\n\n  if (mediaTypes.video && mediaTypes.video.context) {\n    return includes(SUPPORTED_STREAM_TYPES, mediaTypes.video.context);\n  }\n\n  return true;\n}\n\nexport function getBidderRequest(bidRequests, bidder, adUnitCode) {\n  return find(bidRequests, request => {\n    return request.bids\n      .filter(bid => bid.bidder === bidder && bid.adUnitCode === adUnitCode).length > 0;\n  }) || { start: null, auctionId: null };\n}\n/**\n * Returns user configured bidder params from adunit\n * @param {Object} adUnits\n * @param {string} adUnitCode code\n * @param {string} bidder code\n * @return {Array} user configured param for the given bidder adunit configuration\n */\nexport function getUserConfiguredParams(adUnits, adUnitCode, bidder) {\n  return adUnits\n    .filter(adUnit => adUnit.code === adUnitCode)\n    .map((adUnit) => adUnit.bids)\n    .reduce(flatten, [])\n    .filter((bidderData) => bidderData.bidder === bidder)\n    .map((bidderData) => bidderData.params || {});\n}\n/**\n * Returns the origin\n */\nexport function getOrigin() {\n  // IE10 does not have this property. https://gist.github.com/hbogs/7908703\n  if (!window.location.origin) {\n    return window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n  } else {\n    return window.location.origin;\n  }\n}\n\n/**\n * Returns Do Not Track state\n */\nexport function getDNT() {\n  return navigator.doNotTrack === '1' || window.doNotTrack === '1' || navigator.msDoNotTrack === '1' || navigator.doNotTrack === 'yes';\n}\n\nconst compareCodeAndSlot = (slot, adUnitCode) => slot.getAdUnitPath() === adUnitCode || slot.getSlotElementId() === adUnitCode;\n\n/**\n * Returns filter function to match adUnitCode in slot\n * @param {Object} slot GoogleTag slot\n * @return {function} filter function\n */\nexport function isAdUnitCodeMatchingSlot(slot) {\n  return (adUnitCode) => compareCodeAndSlot(slot, adUnitCode);\n}\n\n/**\n * Returns filter function to match adUnitCode in slot\n * @param {string} adUnitCode AdUnit code\n * @return {function} filter function\n */\nexport function isSlotMatchingAdUnitCode(adUnitCode) {\n  return (slot) => compareCodeAndSlot(slot, adUnitCode);\n}\n\n/**\n * Constructs warning message for when unsupported bidders are dropped from an adunit\n * @param {Object} adUnit ad unit from which the bidder is being dropped\n * @param {string} bidder bidder code that is not compatible with the adUnit\n * @return {string} warning message to display when condition is met\n */\nexport function unsupportedBidderMessage(adUnit, bidder) {\n  const mediaType = Object.keys(adUnit.mediaTypes || {'banner': 'banner'}).join(', ');\n\n  return `\n    ${adUnit.code} is a ${mediaType} ad unit\n    containing bidders that don't support ${mediaType}: ${bidder}.\n    This bidder won't fetch demand.\n  `;\n}\n\n/**\n * Delete property from object\n * @param {Object} object\n * @param {string} prop\n * @return {Object} object\n */\nexport function deletePropertyFromObject(object, prop) {\n  let result = Object.assign({}, object);\n  delete result[prop];\n  return result;\n}\n\n/**\n * Delete requestId from external bid object.\n * @param {Object} bid\n * @return {Object} bid\n */\nexport function removeRequestId(bid) {\n  return deletePropertyFromObject(bid, 'requestId');\n}\n\n/**\n * Checks input is integer or not\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n * @param {*} value\n */\nexport function isInteger(value) {\n  if (Number.isInteger) {\n    return Number.isInteger(value);\n  } else {\n    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n  }\n}\n\n/**\n * Converts a string value in camel-case to underscore eg 'placementId' becomes 'placement_id'\n * @param {string} value string value to convert\n */\nexport function convertCamelToUnderscore(value) {\n  return value.replace(/(?:^|\\.?)([A-Z])/g, function (x, y) { return '_' + y.toLowerCase() }).replace(/^_/, '');\n}\n\n/**\n * Converts an object of arrays (either strings or numbers) into an array of objects containing key and value properties\n * normally read from bidder params\n * eg { foo: ['bar', 'baz'], fizz: ['buzz'] }\n * becomes [{ key: 'foo', value: ['bar', 'baz']}, {key: 'fizz', value: ['buzz']}]\n * @param {Object} keywords object of arrays representing keyvalue pairs\n * @param {string} paramName name of parent object (eg 'keywords') containing keyword data, used in error handling\n */\nexport function transformBidderParamKeywords(keywords, paramName = 'keywords') {\n  let arrs = [];\n\n  _each(keywords, (v, k) => {\n    if (isArray(v)) {\n      let values = [];\n      _each(v, (val) => {\n        val = getValueString(paramName + '.' + k, val);\n        if (val || val === '') { values.push(val); }\n      });\n      v = values;\n    } else {\n      v = getValueString(paramName + '.' + k, v);\n      if (isStr(v)) {\n        v = [v];\n      } else {\n        return;\n      } // unsuported types - don't send a key\n    }\n    arrs.push({key: k, value: v});\n  });\n\n  return arrs;\n}\n\n/**\n * Try to convert a value to a type.\n * If it can't be done, the value will be returned.\n *\n * @param {string} typeToConvert The target type. e.g. \"string\", \"number\", etc.\n * @param {*} value The value to be converted into typeToConvert.\n */\nfunction tryConvertType(typeToConvert, value) {\n  if (typeToConvert === 'string') {\n    return value && value.toString();\n  } else if (typeToConvert === 'number') {\n    return Number(value);\n  } else {\n    return value;\n  }\n}\n\nexport function convertTypes(types, params) {\n  Object.keys(types).forEach(key => {\n    if (params[key]) {\n      if (isFn(types[key])) {\n        params[key] = types[key](params[key]);\n      } else {\n        params[key] = tryConvertType(types[key], params[key]);\n      }\n\n      // don't send invalid values\n      if (isNaN(params[key])) {\n        delete params.key;\n      }\n    }\n  });\n  return params;\n}\n\nexport function setDataInLocalStorage(key, value) {\n  if (hasLocalStorage()) {\n    window.localStorage.setItem(key, value);\n  }\n}\n\nexport function getDataFromLocalStorage(key) {\n  if (hasLocalStorage()) {\n    return window.localStorage.getItem(key);\n  }\n}\n\nexport function hasLocalStorage() {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    logError('Local storage api disabled');\n  }\n}\n\nexport function isArrayOfNums(val, size) {\n  return (isArray(val)) && ((size) ? val.length === size : true) && (val.every(v => isInteger(v)));\n}\n\n/**\n * Creates an array of n length and fills each item with the given value\n */\nexport function fill(value, length) {\n  let newArray = [];\n\n  for (let i = 0; i < length; i++) {\n    let valueToPush = isPlainObject(value) ? deepClone(value) : value;\n    newArray.push(valueToPush);\n  }\n\n  return newArray;\n}\n\n/**\n * http://npm.im/chunk\n * Returns an array with *size* chunks from given array\n *\n * Example:\n * ['a', 'b', 'c', 'd', 'e'] chunked by 2 =>\n * [['a', 'b'], ['c', 'd'], ['e']]\n */\nexport function chunk(array, size) {\n  let newArray = [];\n\n  for (let i = 0; i < Math.ceil(array.length / size); i++) {\n    let start = i * size;\n    let end = start + size;\n    newArray.push(array.slice(start, end));\n  }\n\n  return newArray;\n}\n\nexport function getMinValueFromArray(array) {\n  return Math.min(...array);\n}\n\nexport function getMaxValueFromArray(array) {\n  return Math.max(...array);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","require('../../modules/es6.array.find');\nmodule.exports = require('../../modules/_core').Array.find;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/find.js\n// module id = 1\n// module chunks = 0","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 2\n// module chunks = 0","var core = module.exports = { version: '2.6.5' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 3\n// module chunks = 0","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 4\n// module chunks = 0","const adapters = [];\nexport function registerBidder(spec) {\n  const aliases = Array.isArray(spec.aliases) ? spec.aliases : [];\n  aliases.push(spec.code);\n  aliases.forEach(alias => {\n    adapters.push({\n      code: alias,\n      spec,\n    });\n  });\n}\nexport function getAdapter(bid) {\n  if (!bid || !bid.bidder) {\n    return null;\n  }\n\n  let spec;\n  for (const adapter of adapters) {\n    if (adapter.code == bid.bidder) {\n      spec = adapter.spec;\n      break;\n    }\n  }\n  return spec;\n}\nexport function getIabSubCategory() { return ''; }\n\n\n\n// WEBPACK FOOTER //\n// ./cedato/bidderFactory.js","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 6\n// module chunks = 0","require('../../modules/es7.array.includes');\nmodule.exports = require('../../modules/_core').Array.includes;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/includes.js\n// module id = 7\n// module chunks = 0","/**\n * This file contains the valid Media Types in Prebid.\n *\n * All adapters are assumed to support banner ads. Other media types are specified by Adapters when they\n * register themselves with prebid-core.\n */\n\n/**\n * @typedef {('native'|'video'|'banner')} MediaType\n * @typedef {('adpod')} VideoContext\n */\n\n/** @type MediaType */\nexport const NATIVE = 'native';\n/** @type MediaType */\nexport const VIDEO = 'video';\n/** @type MediaType */\nexport const BANNER = 'banner';\n/** @type VideoContext */\nexport const ADPOD = 'adpod';\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediaTypes.js","export const Renderer = {\n  install: () => ({\n    setRender: () => { },\n    setEventHandlers: () => { },\n  }),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./cedato/Renderer.js","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 10\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 11\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 12\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 13\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 14\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 15\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 16\n// module chunks = 0","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 17\n// module chunks = 0","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 18\n// module chunks = 0","export const config = {\n  getConfig: () => false,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./cedato/config.js","import * as CEDATO_BID from './cedato-bid';\n\nwindow.CEDATO_BID = CEDATO_BID;\n\n\n\n// WEBPACK FOOTER //\n// ./cedato/bid-adapters.js","import { Renderer } from '../src/Renderer';\nimport * as utils from '../src/utils';\nimport { config } from '../src/config';\nimport { registerBidder, getIabSubCategory } from '../src/adapters/bidderFactory';\nimport { BANNER, NATIVE, VIDEO, ADPOD } from '../src/mediaTypes';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst BIDDER_CODE = 'appnexus';\nconst URL = '//ib.adnxs.com/ut/v3/prebid';\nconst VIDEO_TARGETING = ['id', 'mimes', 'minduration', 'maxduration',\n  'startdelay', 'skippable', 'playback_method', 'frameworks'];\nconst USER_PARAMS = ['age', 'external_uid', 'segments', 'gender', 'dnt', 'language'];\nconst APP_DEVICE_PARAMS = ['geo', 'device_id']; // appid is collected separately\nconst DEBUG_PARAMS = ['enabled', 'dongle', 'member_id', 'debug_timeout'];\nconst NATIVE_MAPPING = {\n  body: 'description',\n  body2: 'desc2',\n  cta: 'ctatext',\n  image: {\n    serverName: 'main_image',\n    requiredParams: { required: true },\n    minimumParams: { sizes: [{}] },\n  },\n  icon: {\n    serverName: 'icon',\n    requiredParams: { required: true },\n    minimumParams: { sizes: [{}] },\n  },\n  sponsoredBy: 'sponsored_by',\n  privacyLink: 'privacy_link',\n  salePrice: 'saleprice',\n  displayUrl: 'displayurl'\n};\nconst SOURCE = 'pbjs';\nconst MAX_IMPS_PER_REQUEST = 15;\nconst mappingFileUrl = '//acdn.adnxs.com/prebid/appnexus-mapping/mappings.json';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['appnexusAst', 'brealtime', 'emxdigital', 'pagescience', 'defymedia', 'gourmetads', 'matomy', 'featureforward', 'oftmedia', 'districtm'],\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.placementId || (bid.params.member && bid.params.invCode));\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests, bidderRequest) {\n    const tags = bidRequests.map(bidToTag);\n    const userObjBid = find(bidRequests, hasUserInfo);\n    let userObj;\n    if (userObjBid) {\n      userObj = {};\n      Object.keys(userObjBid.params.user)\n        .filter(param => includes(USER_PARAMS, param))\n        .forEach(param => userObj[param] = userObjBid.params.user[param]);\n    }\n\n    const appDeviceObjBid = find(bidRequests, hasAppDeviceInfo);\n    let appDeviceObj;\n    if (appDeviceObjBid && appDeviceObjBid.params && appDeviceObjBid.params.app) {\n      appDeviceObj = {};\n      Object.keys(appDeviceObjBid.params.app)\n        .filter(param => includes(APP_DEVICE_PARAMS, param))\n        .forEach(param => appDeviceObj[param] = appDeviceObjBid.params.app[param]);\n    }\n\n    const appIdObjBid = find(bidRequests, hasAppId);\n    let appIdObj;\n    if (appIdObjBid && appIdObjBid.params && appDeviceObjBid.params.app && appDeviceObjBid.params.app.id) {\n      appIdObj = {\n        appid: appIdObjBid.params.app.id\n      };\n    }\n\n    let debugObj = {};\n    let debugObjParams = {};\n    const debugCookieName = 'apn_prebid_debug';\n    const debugCookie = utils.getCookie(debugCookieName) || null;\n\n    if (debugCookie) {\n      try {\n        debugObj = JSON.parse(debugCookie);\n      } catch (e) {\n        utils.logError('AppNexus Debug Auction Cookie Error:\\n\\n' + e);\n      }\n    } else {\n      const debugBidRequest = find(bidRequests, hasDebug);\n      if (debugBidRequest && debugBidRequest.debug) {\n        debugObj = debugBidRequest.debug;\n      }\n    }\n\n    if (debugObj && debugObj.enabled) {\n      Object.keys(debugObj)\n        .filter(param => includes(DEBUG_PARAMS, param))\n        .forEach(param => {\n          debugObjParams[param] = debugObj[param];\n        });\n    }\n\n    const memberIdBid = find(bidRequests, hasMemberId);\n    const member = memberIdBid ? parseInt(memberIdBid.params.member, 10) : 0;\n\n    const payload = {\n      tags: [...tags],\n      user: userObj,\n      sdk: {\n        source: SOURCE,\n        version: '$prebid.version$'\n      }\n    };\n\n    if (member > 0) {\n      payload.member_id = member;\n    }\n\n    if (appDeviceObjBid) {\n      payload.device = appDeviceObj\n    }\n    if (appIdObjBid) {\n      payload.app = appIdObj;\n    }\n\n    if (config.getConfig('adpod.brandCategoryExclusion')) {\n      payload.brand_category_uniqueness = true;\n    }\n\n    if (debugObjParams.enabled) {\n      payload.debug = debugObjParams;\n      utils.logInfo('AppNexus Debug Auction Settings:\\n\\n' + JSON.stringify(debugObjParams, null, 4));\n    }\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      // note - objects for impbus use underscore instead of camelCase\n      payload.gdpr_consent = {\n        consent_string: bidderRequest.gdprConsent.consentString,\n        consent_required: bidderRequest.gdprConsent.gdprApplies\n      };\n    }\n\n    if (bidderRequest && bidderRequest.refererInfo) {\n      let refererinfo = {\n        rd_ref: encodeURIComponent(bidderRequest.refererInfo.referer),\n        rd_top: bidderRequest.refererInfo.reachedTop,\n        rd_ifs: bidderRequest.refererInfo.numIframes,\n        rd_stk: bidderRequest.refererInfo.stack.map((url) => encodeURIComponent(url)).join(',')\n      }\n      payload.referrer_detection = refererinfo;\n    }\n\n    const hasAdPodBid = find(bidRequests, hasAdPod);\n    if (hasAdPodBid) {\n      bidRequests.filter(hasAdPod).forEach(adPodBid => {\n        const adPodTags = createAdPodRequest(tags, adPodBid);\n        // don't need the original adpod placement because it's in adPodTags\n        const nonPodTags = payload.tags.filter(tag => tag.uuid !== adPodBid.bidId);\n        payload.tags = [...nonPodTags, ...adPodTags];\n      });\n    }\n\n    const request = formatRequest(payload, bidderRequest);\n    return request;\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, {bidderRequest}) {\n    serverResponse = serverResponse.body;\n    const bids = [];\n    if (!serverResponse || serverResponse.error) {\n      let errorMessage = `in response for ${bidderRequest.bidderCode} adapter`;\n      if (serverResponse && serverResponse.error) { errorMessage += `: ${serverResponse.error}`; }\n      utils.logError(errorMessage);\n      return bids;\n    }\n\n    if (serverResponse.tags) {\n      serverResponse.tags.forEach(serverBid => {\n        const rtbBid = getRtbBid(serverBid);\n        if (rtbBid) {\n          if (rtbBid.cpm !== 0 && includes(this.supportedMediaTypes, rtbBid.ad_type)) {\n            const bid = newBid(serverBid, rtbBid, bidderRequest);\n            bid.mediaType = parseMediaType(rtbBid);\n            bids.push(bid);\n          }\n        }\n      });\n    }\n\n    if (serverResponse.debug && serverResponse.debug.debug_info) {\n      let debugHeader = 'AppNexus Debug Auction for Prebid\\n\\n'\n      let debugText = debugHeader + serverResponse.debug.debug_info\n      debugText = debugText\n        .replace(/(<td>|<th>)/gm, '\\t') // Tables\n        .replace(/(<\\/td>|<\\/th>)/gm, '\\n') // Tables\n        .replace(/^<br>/gm, '') // Remove leading <br>\n        .replace(/(<br>\\n|<br>)/gm, '\\n') // <br>\n        .replace(/<h1>(.*)<\\/h1>/gm, '\\n\\n===== $1 =====\\n\\n') // Header H1\n        .replace(/<h[2-6]>(.*)<\\/h[2-6]>/gm, '\\n\\n*** $1 ***\\n\\n') // Headers\n        .replace(/(<([^>]+)>)/igm, ''); // Remove any other tags\n      utils.logMessage('https://console.appnexus.com/docs/understanding-the-debug-auction');\n      utils.logMessage(debugText);\n    }\n\n    return bids;\n  },\n\n  /**\n   * @typedef {Object} mappingFileInfo\n   * @property {string} url  mapping file json url\n   * @property {number} refreshInDays prebid stores mapping data in localstorage so you can return in how many days you want to update value stored in localstorage.\n   * @property {string} localStorageKey unique key to store your mapping json in localstorage\n   */\n\n  /**\n   * Returns mapping file info. This info will be used by bidderFactory to preload mapping file and store data in local storage\n   * @returns {mappingFileInfo}\n   */\n  getMappingFileInfo: function() {\n    return {\n      url: mappingFileUrl,\n      refreshInDays: 7\n    }\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html'\n      }];\n    }\n  },\n\n  transformBidParams: function(params, isOpenRtb) {\n    params = utils.convertTypes({\n      'member': 'string',\n      'invCode': 'string',\n      'placementId': 'number',\n      'keywords': utils.transformBidderParamKeywords\n    }, params);\n\n    if (isOpenRtb) {\n      params.use_pmt_rule = (typeof params.usePaymentRule === 'boolean') ? params.usePaymentRule : false;\n      if (params.usePaymentRule) { delete params.usePaymentRule; }\n\n      if (isPopulatedArray(params.keywords)) {\n        params.keywords.forEach(deleteValues);\n      }\n\n      Object.keys(params).forEach(paramKey => {\n        let convertedKey = utils.convertCamelToUnderscore(paramKey);\n        if (convertedKey !== paramKey) {\n          params[convertedKey] = params[paramKey];\n          delete params[paramKey];\n        }\n      });\n    }\n\n    return params;\n  }\n}\n\nfunction isPopulatedArray(arr) {\n  return !!(utils.isArray(arr) && arr.length > 0);\n}\n\nfunction deleteValues(keyPairObj) {\n  if (isPopulatedArray(keyPairObj.value) && keyPairObj.value[0] === '') {\n    delete keyPairObj.value;\n  }\n}\n\nfunction formatRequest(payload, bidderRequest) {\n  let request = [];\n\n  if (payload.tags.length > MAX_IMPS_PER_REQUEST) {\n    const clonedPayload = utils.deepClone(payload);\n\n    utils.chunk(payload.tags, MAX_IMPS_PER_REQUEST).forEach(tags => {\n      clonedPayload.tags = tags;\n      const payloadString = JSON.stringify(clonedPayload);\n      request.push({\n        method: 'POST',\n        url: URL,\n        data: payloadString,\n        bidderRequest\n      });\n    });\n  } else {\n    const payloadString = JSON.stringify(payload);\n    request = {\n      method: 'POST',\n      url: URL,\n      data: payloadString,\n      bidderRequest\n    };\n  }\n\n  return request;\n}\n\nfunction newRenderer(adUnitCode, rtbBid, rendererOptions = {}) {\n  const renderer = Renderer.install({\n    id: rtbBid.renderer_id,\n    url: rtbBid.renderer_url,\n    config: rendererOptions,\n    loaded: false,\n    adUnitCode\n  });\n\n  try {\n    renderer.setRender(outstreamRender);\n  } catch (err) {\n    utils.logWarn('Prebid Error calling setRender on renderer', err);\n  }\n\n  renderer.setEventHandlers({\n    impression: () => utils.logMessage('AppNexus outstream video impression event'),\n    loaded: () => utils.logMessage('AppNexus outstream video loaded event'),\n    ended: () => {\n      utils.logMessage('AppNexus outstream renderer video event');\n      document.querySelector(`#${adUnitCode}`).style.display = 'none';\n    }\n  });\n  return renderer;\n}\n\n/**\n * Unpack the Server's Bid into a Prebid-compatible one.\n * @param serverBid\n * @param rtbBid\n * @param bidderRequest\n * @return Bid\n */\nfunction newBid(serverBid, rtbBid, bidderRequest) {\n  const bidRequest = utils.getBidRequest(serverBid.uuid, [bidderRequest]);\n  const bid = {\n    requestId: serverBid.uuid,\n    cpm: rtbBid.cpm,\n    creativeId: rtbBid.creative_id,\n    dealId: rtbBid.deal_id,\n    currency: 'USD',\n    netRevenue: true,\n    ttl: 300,\n    adUnitCode: bidRequest.adUnitCode,\n    appnexus: {\n      buyerMemberId: rtbBid.buyer_member_id,\n      dealPriority: rtbBid.deal_priority,\n      dealCode: rtbBid.deal_code\n    }\n  };\n\n  if (rtbBid.rtb.video) {\n    Object.assign(bid, {\n      width: rtbBid.rtb.video.player_width,\n      height: rtbBid.rtb.video.player_height,\n      vastUrl: rtbBid.rtb.video.asset_url,\n      vastImpUrl: rtbBid.notify_url,\n      ttl: 3600\n    });\n\n    const videoContext = utils.deepAccess(bidRequest, 'mediaTypes.video.context');\n    if (videoContext === ADPOD) {\n      const iabSubCatId = getIabSubCategory(bidRequest.bidder, rtbBid.brand_category_id);\n      bid.meta = {\n        iabSubCatId\n      };\n\n      bid.video = {\n        context: ADPOD,\n        durationSeconds: Math.floor(rtbBid.rtb.video.duration_ms / 1000),\n      };\n    }\n\n    // This supports Outstream Video\n    if (rtbBid.renderer_url) {\n      const rendererOptions = utils.deepAccess(\n        bidderRequest.bids[0],\n        'renderer.options'\n      );\n\n      Object.assign(bid, {\n        adResponse: serverBid,\n        renderer: newRenderer(bid.adUnitCode, rtbBid, rendererOptions)\n      });\n      bid.adResponse.ad = bid.adResponse.ads[0];\n      bid.adResponse.ad.video = bid.adResponse.ad.rtb.video;\n    }\n  } else if (rtbBid.rtb[NATIVE]) {\n    const nativeAd = rtbBid.rtb[NATIVE];\n    bid[NATIVE] = {\n      title: nativeAd.title,\n      body: nativeAd.desc,\n      body2: nativeAd.desc2,\n      cta: nativeAd.ctatext,\n      rating: nativeAd.rating,\n      sponsoredBy: nativeAd.sponsored,\n      privacyLink: nativeAd.privacy_link,\n      address: nativeAd.address,\n      downloads: nativeAd.downloads,\n      likes: nativeAd.likes,\n      phone: nativeAd.phone,\n      price: nativeAd.price,\n      salePrice: nativeAd.saleprice,\n      clickUrl: nativeAd.link.url,\n      displayUrl: nativeAd.displayurl,\n      clickTrackers: nativeAd.link.click_trackers,\n      impressionTrackers: nativeAd.impression_trackers,\n      javascriptTrackers: nativeAd.javascript_trackers\n    };\n    if (nativeAd.main_img) {\n      bid['native'].image = {\n        url: nativeAd.main_img.url,\n        height: nativeAd.main_img.height,\n        width: nativeAd.main_img.width,\n      };\n    }\n    if (nativeAd.icon) {\n      bid['native'].icon = {\n        url: nativeAd.icon.url,\n        height: nativeAd.icon.height,\n        width: nativeAd.icon.width,\n      };\n    }\n  } else {\n    Object.assign(bid, {\n      width: rtbBid.rtb.banner.width,\n      height: rtbBid.rtb.banner.height,\n      ad: rtbBid.rtb.banner.content\n    });\n    try {\n      const url = rtbBid.rtb.trackers[0].impression_urls[0];\n      const tracker = utils.createTrackPixelHtml(url);\n      bid.ad += tracker;\n    } catch (error) {\n      utils.logError('Error appending tracking pixel', error);\n    }\n  }\n\n  return bid;\n}\n\nfunction bidToTag(bid) {\n  const tag = {};\n  tag.sizes = transformSizes(bid.sizes);\n  tag.primary_size = tag.sizes[0];\n  tag.ad_types = [];\n  tag.uuid = bid.bidId;\n  if (bid.params.placementId) {\n    tag.id = parseInt(bid.params.placementId, 10);\n  } else {\n    tag.code = bid.params.invCode;\n  }\n  tag.allow_smaller_sizes = bid.params.allowSmallerSizes || false;\n  tag.use_pmt_rule = bid.params.usePaymentRule || false\n  tag.prebid = true;\n  tag.disable_psa = true;\n  if (bid.params.reserve) {\n    tag.reserve = bid.params.reserve;\n  }\n  if (bid.params.position) {\n    tag.position = {'above': 1, 'below': 2}[bid.params.position] || 0;\n  }\n  if (bid.params.trafficSourceCode) {\n    tag.traffic_source_code = bid.params.trafficSourceCode;\n  }\n  if (bid.params.privateSizes) {\n    tag.private_sizes = transformSizes(bid.params.privateSizes);\n  }\n  if (bid.params.supplyType) {\n    tag.supply_type = bid.params.supplyType;\n  }\n  if (bid.params.pubClick) {\n    tag.pubclick = bid.params.pubClick;\n  }\n  if (bid.params.extInvCode) {\n    tag.ext_inv_code = bid.params.extInvCode;\n  }\n  if (bid.params.externalImpId) {\n    tag.external_imp_id = bid.params.externalImpId;\n  }\n  if (!utils.isEmpty(bid.params.keywords)) {\n    let keywords = utils.transformBidderParamKeywords(bid.params.keywords);\n\n    if (keywords.length > 0) {\n      keywords.forEach(deleteValues);\n    }\n    tag.keywords = keywords;\n  }\n\n  if (bid.mediaType === NATIVE || utils.deepAccess(bid, `mediaTypes.${NATIVE}`)) {\n    tag.ad_types.push(NATIVE);\n\n    if (bid.nativeParams) {\n      const nativeRequest = buildNativeRequest(bid.nativeParams);\n      tag[NATIVE] = {layouts: [nativeRequest]};\n    }\n  }\n\n  const videoMediaType = utils.deepAccess(bid, `mediaTypes.${VIDEO}`);\n  const context = utils.deepAccess(bid, 'mediaTypes.video.context');\n\n  if (bid.mediaType === VIDEO || videoMediaType) {\n    tag.ad_types.push(VIDEO);\n  }\n\n  // instream gets vastUrl, outstream gets vastXml\n  if (bid.mediaType === VIDEO || (videoMediaType && context !== 'outstream')) {\n    tag.require_asset_url = true;\n  }\n\n  if (bid.params.video) {\n    tag.video = {};\n    // place any valid video params on the tag\n    Object.keys(bid.params.video)\n      .filter(param => includes(VIDEO_TARGETING, param))\n      .forEach(param => tag.video[param] = bid.params.video[param]);\n  }\n\n  if (\n    (utils.isEmpty(bid.mediaType) && utils.isEmpty(bid.mediaTypes)) ||\n    (bid.mediaType === BANNER || (bid.mediaTypes && bid.mediaTypes[BANNER]))\n  ) {\n    tag.ad_types.push(BANNER);\n  }\n\n  return tag;\n}\n\n/* Turn bid request sizes into ut-compatible format */\nfunction transformSizes(requestSizes) {\n  let sizes = [];\n  let sizeObj = {};\n\n  if (utils.isArray(requestSizes) && requestSizes.length === 2 &&\n    !utils.isArray(requestSizes[0])) {\n    sizeObj.width = parseInt(requestSizes[0], 10);\n    sizeObj.height = parseInt(requestSizes[1], 10);\n    sizes.push(sizeObj);\n  } else if (typeof requestSizes === 'object') {\n    for (let i = 0; i < requestSizes.length; i++) {\n      let size = requestSizes[i];\n      sizeObj = {};\n      sizeObj.width = parseInt(size[0], 10);\n      sizeObj.height = parseInt(size[1], 10);\n      sizes.push(sizeObj);\n    }\n  }\n\n  return sizes;\n}\n\nfunction hasUserInfo(bid) {\n  return !!bid.params.user;\n}\n\nfunction hasMemberId(bid) {\n  return !!parseInt(bid.params.member, 10);\n}\n\nfunction hasAppDeviceInfo(bid) {\n  if (bid.params) {\n    return !!bid.params.app\n  }\n}\n\nfunction hasAppId(bid) {\n  if (bid.params && bid.params.app) {\n    return !!bid.params.app.id\n  }\n  return !!bid.params.app\n}\n\nfunction hasDebug(bid) {\n  return !!bid.debug\n}\n\nfunction hasAdPod(bid) {\n  return (\n    bid.mediaTypes &&\n    bid.mediaTypes.video &&\n    bid.mediaTypes.video.context === ADPOD\n  );\n}\n\n/**\n * Expand an adpod placement into a set of request objects according to the\n * total adpod duration and the range of duration seconds. Sets minduration/\n * maxduration video property according to requireExactDuration configuration\n */\nfunction createAdPodRequest(tags, adPodBid) {\n  const { durationRangeSec, requireExactDuration } = adPodBid.mediaTypes.video;\n\n  const numberOfPlacements = getAdPodPlacementNumber(adPodBid.mediaTypes.video);\n  const maxDuration = utils.getMaxValueFromArray(durationRangeSec);\n\n  const tagToDuplicate = tags.filter(tag => tag.uuid === adPodBid.bidId);\n  let request = utils.fill(...tagToDuplicate, numberOfPlacements);\n\n  if (requireExactDuration) {\n    const divider = Math.ceil(numberOfPlacements / durationRangeSec.length);\n    const chunked = utils.chunk(request, divider);\n\n    // each configured duration is set as min/maxduration for a subset of requests\n    durationRangeSec.forEach((duration, index) => {\n      chunked[index].map(tag => {\n        setVideoProperty(tag, 'minduration', duration);\n        setVideoProperty(tag, 'maxduration', duration);\n      });\n    });\n  } else {\n    // all maxdurations should be the same\n    request.map(tag => setVideoProperty(tag, 'maxduration', maxDuration));\n  }\n\n  return request;\n}\n\nfunction getAdPodPlacementNumber(videoParams) {\n  const { adPodDurationSec, durationRangeSec, requireExactDuration } = videoParams;\n  const minAllowedDuration = utils.getMinValueFromArray(durationRangeSec);\n  const numberOfPlacements = Math.floor(adPodDurationSec / minAllowedDuration);\n\n  return requireExactDuration\n    ? Math.max(numberOfPlacements, durationRangeSec.length)\n    : numberOfPlacements;\n}\n\nfunction setVideoProperty(tag, key, value) {\n  if (utils.isEmpty(tag.video)) { tag.video = {}; }\n  tag.video[key] = value;\n}\n\nfunction getRtbBid(tag) {\n  return tag && tag.ads && tag.ads.length && find(tag.ads, ad => ad.rtb);\n}\n\nfunction buildNativeRequest(params) {\n  const request = {};\n\n  // map standard prebid native asset identifier to /ut parameters\n  // e.g., tag specifies `body` but /ut only knows `description`.\n  // mapping may be in form {tag: '<server name>'} or\n  // {tag: {serverName: '<server name>', requiredParams: {...}}}\n  Object.keys(params).forEach(key => {\n    // check if one of the <server name> forms is used, otherwise\n    // a mapping wasn't specified so pass the key straight through\n    const requestKey =\n      (NATIVE_MAPPING[key] && NATIVE_MAPPING[key].serverName) ||\n      NATIVE_MAPPING[key] ||\n      key;\n\n    // required params are always passed on request\n    const requiredParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].requiredParams;\n    request[requestKey] = Object.assign({}, requiredParams, params[key]);\n\n    // minimum params are passed if no non-required params given on adunit\n    const minimumParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].minimumParams;\n\n    if (requiredParams && minimumParams) {\n      // subtract required keys from adunit keys\n      const adunitKeys = Object.keys(params[key]);\n      const requiredKeys = Object.keys(requiredParams);\n      const remaining = adunitKeys.filter(key => !includes(requiredKeys, key));\n\n      // if none are left over, the minimum params needs to be sent\n      if (remaining.length === 0) {\n        request[requestKey] = Object.assign({}, request[requestKey], minimumParams);\n      }\n    }\n  });\n\n  return request;\n}\n\nfunction outstreamRender(bid) {\n  // push to render queue because ANOutstreamVideo may not be loaded yet\n  bid.renderer.push(() => {\n    window.ANOutstreamVideo.renderAd({\n      tagId: bid.adResponse.tag_id,\n      sizes: [bid.getSize().split('x')],\n      targetId: bid.adUnitCode, // target div id to render video\n      uuid: bid.adResponse.uuid,\n      adResponse: bid.adResponse,\n      rendererOptions: bid.renderer.getConfig()\n    }, handleOutstreamRendererEvents.bind(null, bid));\n  });\n}\n\nfunction handleOutstreamRendererEvents(bid, id, eventName) {\n  bid.renderer.handleVideoEvent({ id, eventName });\n}\n\nfunction parseMediaType(rtbBid) {\n  const adType = rtbBid.ad_type;\n  if (adType === VIDEO) {\n    return VIDEO;\n  } else if (adType === NATIVE) {\n    return NATIVE;\n  } else {\n    return BANNER;\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/appnexusBidAdapter.js","/*\n * Module for getting and setting Prebid configuration.\n *\n * Prebid previously defined these properties directly on the global object:\n * pbjs.logging = true;\n *\n * Defining and access properties in this way is now deprecated, but these will\n * continue to work during a deprecation window.\n */\nimport { isValidPriceConfig } from './cpmBucketManager';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\nimport { hook } from './hook';\nconst utils = require('./utils');\n\nconst DEFAULT_DEBUG = false;\nconst DEFAULT_BIDDER_TIMEOUT = 3000;\nconst DEFAULT_PUBLISHER_DOMAIN = window.location.origin;\nconst DEFAULT_ENABLE_SEND_ALL_BIDS = true;\nconst DEFAULT_DISABLE_AJAX_TIMEOUT = false;\nconst DEFAULT_BID_CACHE = false;\n\nconst DEFAULT_TIMEOUTBUFFER = 400;\n\nexport const RANDOM = 'random';\nconst FIXED = 'fixed';\n\nconst VALID_ORDERS = {};\nVALID_ORDERS[RANDOM] = true;\nVALID_ORDERS[FIXED] = true;\n\nconst DEFAULT_BIDDER_SEQUENCE = RANDOM;\n\nconst GRANULARITY_OPTIONS = {\n  LOW: 'low',\n  MEDIUM: 'medium',\n  HIGH: 'high',\n  AUTO: 'auto',\n  DENSE: 'dense',\n  CUSTOM: 'custom'\n};\n\nconst ALL_TOPICS = '*';\n\n/**\n * @typedef {object} PrebidConfig\n *\n * @property {string} cache.url Set a url if we should use prebid-cache to store video bids before adding\n *   bids to the auction. **NOTE** This must be set if you want to use the dfpAdServerVideo module.\n */\n\nexport function newConfig() {\n  let listeners = [];\n  let defaults;\n  let config;\n\n  function resetConfig() {\n    defaults = {};\n    let newConfig = {\n      // `debug` is equivalent to legacy `pbjs.logging` property\n      _debug: DEFAULT_DEBUG,\n      get debug() {\n        return this._debug;\n      },\n      set debug(val) {\n        this._debug = val;\n      },\n\n      // default timeout for all bids\n      _bidderTimeout: DEFAULT_BIDDER_TIMEOUT,\n      get bidderTimeout() {\n        return this._bidderTimeout;\n      },\n      set bidderTimeout(val) {\n        this._bidderTimeout = val;\n      },\n\n      // domain where prebid is running for cross domain iframe communication\n      _publisherDomain: DEFAULT_PUBLISHER_DOMAIN,\n      get publisherDomain() {\n        return this._publisherDomain;\n      },\n      set publisherDomain(val) {\n        this._publisherDomain = val;\n      },\n\n      // calls existing function which may be moved after deprecation\n      _priceGranularity: GRANULARITY_OPTIONS.MEDIUM,\n      set priceGranularity(val) {\n        if (validatePriceGranularity(val)) {\n          if (typeof val === 'string') {\n            this._priceGranularity = (hasGranularity(val)) ? val : GRANULARITY_OPTIONS.MEDIUM;\n          } else if (typeof val === 'object') {\n            this._customPriceBucket = val;\n            this._priceGranularity = GRANULARITY_OPTIONS.CUSTOM;\n            utils.logMessage('Using custom price granularity');\n          }\n        }\n      },\n      get priceGranularity() {\n        return this._priceGranularity;\n      },\n\n      _customPriceBucket: {},\n      get customPriceBucket() {\n        return this._customPriceBucket;\n      },\n\n      _mediaTypePriceGranularity: {},\n      get mediaTypePriceGranularity() {\n        return this._mediaTypePriceGranularity;\n      },\n      set mediaTypePriceGranularity(val) {\n        this._mediaTypePriceGranularity = Object.keys(val).reduce((aggregate, item) => {\n          if (validatePriceGranularity(val[item])) {\n            if (typeof val === 'string') {\n              aggregate[item] = (hasGranularity(val[item])) ? val[item] : this._priceGranularity;\n            } else if (typeof val === 'object') {\n              aggregate[item] = val[item];\n              utils.logMessage(`Using custom price granularity for ${item}`);\n            }\n          } else {\n            utils.logWarn(`Invalid price granularity for media type: ${item}`);\n          }\n          return aggregate;\n        }, {});\n      },\n\n      _sendAllBids: DEFAULT_ENABLE_SEND_ALL_BIDS,\n      get enableSendAllBids() {\n        return this._sendAllBids;\n      },\n      set enableSendAllBids(val) {\n        this._sendAllBids = val;\n      },\n\n      _useBidCache: DEFAULT_BID_CACHE,\n      get useBidCache() {\n        return this._useBidCache;\n      },\n      set useBidCache(val) {\n        this._useBidCache = val;\n      },\n\n      _bidderSequence: DEFAULT_BIDDER_SEQUENCE,\n      get bidderSequence() {\n        return this._bidderSequence;\n      },\n      set bidderSequence(val) {\n        if (VALID_ORDERS[val]) {\n          this._bidderSequence = val;\n        } else {\n          utils.logWarn(`Invalid order: ${val}. Bidder Sequence was not set.`);\n        }\n      },\n\n      // timeout buffer to adjust for bidder CDN latency\n      _timeoutBuffer: DEFAULT_TIMEOUTBUFFER,\n      get timeoutBuffer() {\n        return this._timeoutBuffer;\n      },\n      set timeoutBuffer(val) {\n        this._timeoutBuffer = val;\n      },\n\n      _disableAjaxTimeout: DEFAULT_DISABLE_AJAX_TIMEOUT,\n      get disableAjaxTimeout() {\n        return this._disableAjaxTimeout;\n      },\n      set disableAjaxTimeout(val) {\n        this._disableAjaxTimeout = val;\n      },\n\n    };\n\n    if (config) {\n      callSubscribers(\n        Object.keys(config).reduce((memo, topic) => {\n          if (config[topic] !== newConfig[topic]) {\n            memo[topic] = newConfig[topic] || {};\n          }\n          return memo;\n        },\n        {})\n      );\n    }\n\n    config = newConfig;\n\n    function hasGranularity(val) {\n      return find(Object.keys(GRANULARITY_OPTIONS), option => val === GRANULARITY_OPTIONS[option]);\n    }\n\n    function validatePriceGranularity(val) {\n      if (!val) {\n        utils.logError('Prebid Error: no value passed to `setPriceGranularity()`');\n        return false;\n      }\n      if (typeof val === 'string') {\n        if (!hasGranularity(val)) {\n          utils.logWarn('Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.');\n        }\n      } else if (typeof val === 'object') {\n        if (!isValidPriceConfig(val)) {\n          utils.logError('Invalid custom price value passed to `setPriceGranularity()`');\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n  /*\n   * Returns configuration object if called without parameters,\n   * or single configuration property if given a string matching a configuration\n   * property name.  Allows deep access e.g. getConfig('currency.adServerCurrency')\n   *\n   * If called with callback parameter, or a string and a callback parameter,\n   * subscribes to configuration updates. See `subscribe` function for usage.\n   */\n  function getConfig(...args) {\n    if (args.length <= 1 && typeof args[0] !== 'function') {\n      const option = args[0];\n      return option ? utils.deepAccess(config, option) : config;\n    }\n\n    return subscribe(...args);\n  }\n\n  /*\n   * Sets configuration given an object containing key-value pairs and calls\n   * listeners that were added by the `subscribe` function\n   */\n  let setConfig = hook('async', function setConfig(options) {\n    if (typeof options !== 'object') {\n      utils.logError('setConfig options must be an object');\n      return;\n    }\n\n    let topics = Object.keys(options);\n    let topicalConfig = {};\n\n    topics.forEach(topic => {\n      let option = options[topic];\n\n      if (typeof defaults[topic] === 'object' && typeof option === 'object') {\n        option = Object.assign({}, defaults[topic], option);\n      }\n\n      topicalConfig[topic] = config[topic] = option;\n    });\n\n    callSubscribers(topicalConfig);\n  });\n\n  /**\n   * Sets configuration defaults which setConfig values can be applied on top of\n   * @param {object} options\n   */\n  function setDefaults(options) {\n    if (typeof defaults !== 'object') {\n      utils.logError('defaults must be an object');\n      return;\n    }\n\n    Object.assign(defaults, options);\n    // Add default values to config as well\n    Object.assign(config, options);\n  }\n\n  /*\n   * Adds a function to a set of listeners that are invoked whenever `setConfig`\n   * is called. The subscribed function will be passed the options object that\n   * was used in the `setConfig` call. Topics can be subscribed to to only get\n   * updates when specific properties are updated by passing a topic string as\n   * the first parameter.\n   *\n   * Returns an `unsubscribe` function for removing the subscriber from the\n   * set of listeners\n   *\n   * Example use:\n   * // subscribe to all configuration changes\n   * subscribe((config) => console.log('config set:', config));\n   *\n   * // subscribe to only 'logging' changes\n   * subscribe('logging', (config) => console.log('logging set:', config));\n   *\n   * // unsubscribe\n   * const unsubscribe = subscribe(...);\n   * unsubscribe(); // no longer listening\n   */\n  function subscribe(topic, listener) {\n    let callback = listener;\n\n    if (typeof topic !== 'string') {\n      // first param should be callback function in this case,\n      // meaning it gets called for any config change\n      callback = topic;\n      topic = ALL_TOPICS;\n    }\n\n    if (typeof callback !== 'function') {\n      utils.logError('listener must be a function');\n      return;\n    }\n\n    listeners.push({ topic, callback });\n\n    // save and call this function to remove the listener\n    return function unsubscribe() {\n      listeners.splice(listeners.indexOf(listener), 1);\n    };\n  }\n\n  /*\n   * Calls listeners that were added by the `subscribe` function\n   */\n  function callSubscribers(options) {\n    const TOPICS = Object.keys(options);\n\n    // call subscribers of a specific topic, passing only that configuration\n    listeners\n      .filter(listener => includes(TOPICS, listener.topic))\n      .forEach(listener => {\n        listener.callback({ [listener.topic]: options[listener.topic] });\n      });\n\n    // call subscribers that didn't give a topic, passing everything that was set\n    listeners\n      .filter(listener => listener.topic === ALL_TOPICS)\n      .forEach(listener => listener.callback(options));\n  }\n\n  resetConfig();\n\n  return {\n    getConfig,\n    setConfig,\n    setDefaults,\n    resetConfig\n  };\n}\n\nexport const config = newConfig();\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","import find from 'core-js/library/fn/array/find';\nconst utils = require('./utils');\n\nconst _defaultPrecision = 2;\nconst _lgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.5\n  }]\n};\nconst _mgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.1\n  }]\n};\nconst _hgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.01\n  }]\n};\nconst _densePriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 3,\n    'increment': 0.01\n  },\n  {\n    'min': 3,\n    'max': 8,\n    'increment': 0.05\n  },\n  {\n    'min': 8,\n    'max': 20,\n    'increment': 0.5\n  }]\n};\nconst _autoPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.05\n  },\n  {\n    'min': 5,\n    'max': 10,\n    'increment': 0.1\n  },\n  {\n    'min': 10,\n    'max': 20,\n    'increment': 0.5\n  }]\n};\n\nfunction getPriceBucketString(cpm, customConfig, granularityMultiplier = 1) {\n  let cpmFloat = parseFloat(cpm);\n  if (isNaN(cpmFloat)) {\n    cpmFloat = '';\n  }\n\n  return {\n    low: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _lgPriceConfig, granularityMultiplier),\n    med: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _mgPriceConfig, granularityMultiplier),\n    high: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _hgPriceConfig, granularityMultiplier),\n    auto: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _autoPriceConfig, granularityMultiplier),\n    dense: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _densePriceConfig, granularityMultiplier),\n    custom: (cpmFloat === '') ? '' : getCpmStringValue(cpm, customConfig, granularityMultiplier)\n  };\n}\n\nfunction getCpmStringValue(cpm, config, granularityMultiplier) {\n  let cpmStr = '';\n  if (!isValidPriceConfig(config)) {\n    return cpmStr;\n  }\n  const cap = config.buckets.reduce((prev, curr) => {\n    if (prev.max > curr.max) {\n      return prev;\n    }\n    return curr;\n  }, {\n    'max': 0,\n  });\n  let bucket = find(config.buckets, bucket => {\n    if (cpm > cap.max * granularityMultiplier) {\n      // cpm exceeds cap, just return the cap.\n      let precision = bucket.precision;\n      if (typeof precision === 'undefined') {\n        precision = _defaultPrecision;\n      }\n      cpmStr = (bucket.max * granularityMultiplier).toFixed(precision);\n    } else if (cpm <= bucket.max * granularityMultiplier && cpm >= bucket.min * granularityMultiplier) {\n      return bucket;\n    }\n  });\n  if (bucket) {\n    cpmStr = getCpmTarget(cpm, bucket, granularityMultiplier);\n  }\n  return cpmStr;\n}\n\nfunction isValidPriceConfig(config) {\n  if (utils.isEmpty(config) || !config.buckets || !Array.isArray(config.buckets)) {\n    return false;\n  }\n  let isValid = true;\n  config.buckets.forEach(bucket => {\n    if (typeof bucket.min === 'undefined' || !bucket.max || !bucket.increment) {\n      isValid = false;\n    }\n  });\n  return isValid;\n}\n\nfunction getCpmTarget(cpm, bucket, granularityMultiplier) {\n  const precision = typeof bucket.precision !== 'undefined' ? bucket.precision : _defaultPrecision;\n  const increment = bucket.increment * granularityMultiplier;\n  const bucketMin = bucket.min * granularityMultiplier;\n\n  // start increments at the bucket min and then add bucket min back to arrive at the correct rounding\n  // note - we're padding the values to avoid using decimals in the math prior to flooring\n  // this is done as JS can return values slightly below the expected mark which would skew the price bucket target\n  //   (eg 4.01 / 0.01 = 400.99999999999994)\n  // min precison should be 2 to move decimal place over.\n  let pow = Math.pow(10, precision + 2);\n  let cpmToFloor = ((cpm * pow) - (bucketMin * pow)) / (increment * pow);\n  let cpmTarget = ((Math.floor(cpmToFloor)) * increment) + bucketMin;\n  // force to 10 decimal places to deal with imprecise decimal/binary conversions\n  //    (for example 0.1 * 3 = 0.30000000000000004)\n  cpmTarget = Number(cpmTarget.toFixed(10));\n  return cpmTarget.toFixed(precision);\n}\n\nexport { getPriceBucketString, isValidPriceConfig };\n\n\n\n// WEBPACK FOOTER //\n// ./src/cpmBucketManager.js","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.find.js\n// module id = 24\n// module chunks = 0","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 25\n// module chunks = 0","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 26\n// module chunks = 0","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 27\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 28\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 29\n// module chunks = 0","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 30\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 31\n// module chunks = 0","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 32\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 33\n// module chunks = 0","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-methods.js\n// module id = 34\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 35\n// module chunks = 0","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-species-create.js\n// module id = 36\n// module chunks = 0","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-species-constructor.js\n// module id = 37\n// module chunks = 0","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 38\n// module chunks = 0","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 39\n// module chunks = 0","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2019 Denis Pushkarev (zloirock.ru)'\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 40\n// module chunks = 0","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 41\n// module chunks = 0","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 42\n// module chunks = 0","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.array.includes.js\n// module id = 43\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 44\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 45\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 46\n// module chunks = 0","\nimport funHooks from 'fun-hooks';\n\nexport let hook = funHooks({\n  ready: funHooks.SYNC | funHooks.ASYNC | funHooks.QUEUE\n});\n\nexport const getHook = hook.get;\n\nexport function setupBeforeHookFnOnce(baseFn, hookFn, priority = 15) {\n  let result = baseFn.getHooks({hook: hookFn});\n  if (result.length === 0) {\n    baseFn.before(hookFn, priority);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hook.js","create.SYNC = 1;\ncreate.ASYNC = 2;\ncreate.QUEUE = 4;\n\nvar packageName = \"fun-hooks\";\n\nvar hasProxy = typeof Proxy === \"function\";\n\nvar defaults = Object.freeze({\n  useProxy: hasProxy,\n  ready: 0\n});\n\nvar baseObj = Object.getPrototypeOf({});\n\n// detect incorrectly implemented reduce and if found use polyfill\n// https://github.com/prebid/Prebid.js/issues/3576\n// polyfill from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\nvar reduce =\n  [1]\n    .reduce(function(a, b, c) {\n      return [a, b, c];\n    }, 2)\n    .toString() === \"2,1,0\"\n    ? Array.prototype.reduce\n    : function(callback, initial) {\n        var o = Object(this);\n        var len = o.length >>> 0;\n        var k = 0;\n        var value;\n        if (initial) {\n          value = initial;\n        } else {\n          while (k < len && !(k in o)) {\n            k++;\n          }\n          value = o[k++];\n        }\n        while (k < len) {\n          if (k in o) {\n            value = callback(value, o[k], k, o);\n          }\n          k++;\n        }\n        return value;\n      };\n\n// detect incorrectly implemented bind and if found use polyfill\n// https://github.com/snapwich/fun-hooks/issues/1\nvar bind =\n  function(a, b) {\n    return b;\n  }.bind(null, 1, 4)() === 4\n    ? Function.prototype.bind\n    : function(bind) {\n        var self = this;\n        var args = rest(arguments, 1);\n        return function() {\n          return self.apply(bind, args.concat(rest(arguments)));\n        };\n      };\n\nfunction assign(target) {\n  return reduce.call(\n    rest(arguments, 1),\n    function(target, obj) {\n      if (obj) {\n        Object.keys(obj).forEach(function(prop) {\n          target[prop] = obj[prop];\n        });\n      }\n      return target;\n    },\n    target\n  );\n}\n\nfunction rest(args, skip) {\n  return Array.prototype.slice.call(args, skip);\n}\n\nfunction runAll(queue) {\n  var queued;\n  // eslint-disable-next-line no-cond-assign\n  while ((queued = queue.shift())) {\n    queued();\n  }\n}\n\nfunction create(config) {\n  var hooks = {};\n  var postReady = [];\n\n  config = assign({}, defaults, config);\n\n  function dispatch(arg1, arg2) {\n    if (typeof arg1 === \"function\") {\n      return hookFn.call(null, \"sync\", arg1, arg2);\n    } else if (typeof arg1 === \"string\" && typeof arg2 === \"function\") {\n      return hookFn.apply(null, arguments);\n    } else if (typeof arg1 === \"object\") {\n      return hookObj.apply(null, arguments);\n    }\n  }\n\n  var ready;\n  if (config.ready) {\n    dispatch.ready = function() {\n      ready = true;\n      runAll(postReady);\n    };\n  } else {\n    ready = true;\n  }\n\n  function hookObj(obj, props, objName) {\n    var walk = true;\n    if (typeof props === \"undefined\") {\n      props = Object.getOwnPropertyNames(obj);\n      walk = false;\n    }\n    var objHooks = {};\n    var doNotHook = [\"constructor\"];\n    do {\n      props = props.filter(function(prop) {\n        return (\n          typeof obj[prop] === \"function\" &&\n          !(doNotHook.indexOf(prop) !== -1) &&\n          !prop.match(/^_/)\n        );\n      });\n      props.forEach(function(prop) {\n        var parts = prop.split(\":\");\n        var name = parts[0];\n        var type = parts[1] || \"sync\";\n        if (!objHooks[name]) {\n          var fn = obj[name];\n          objHooks[name] = obj[name] = hookFn(\n            type,\n            fn,\n            objName ? [objName, name] : undefined\n          );\n        }\n      });\n      obj = Object.getPrototypeOf(obj);\n    } while (walk && obj !== baseObj);\n    return objHooks;\n  }\n\n  /**\n   * Navigates a string path to return a hookable function.  If not found, creates a placeholder for hooks.\n   * @param {(Array<string> | string)} path\n   */\n  function get(path) {\n    var parts = Array.isArray(path) ? path : path.split(\".\");\n    return reduce.call(\n      parts,\n      function(memo, part, i) {\n        var item = memo[part];\n        var installed = false;\n        if (item) {\n          return item;\n        } else if (i === parts.length - 1) {\n          if (!ready) {\n            postReady.push(function() {\n              if (!installed) {\n                // eslint-disable-next-line no-console\n                console.warn(\n                  packageName +\n                    \": referenced '\" +\n                    path +\n                    \"' but it was never created\"\n                );\n              }\n            });\n          }\n          return (memo[part] = newHookable(function(fn) {\n            memo[part] = fn;\n            installed = true;\n          }));\n        }\n        return (memo[part] = {});\n      },\n      hooks\n    );\n  }\n\n  function newHookable(onInstall) {\n    var before = [];\n    var after = [];\n    var generateTrap = function() {};\n\n    return {\n      __funHook: {\n        install: function(type, fn, generate) {\n          this.type = type;\n          this.fn = fn;\n          generateTrap = generate;\n          generate(before, after);\n          onInstall && onInstall(fn);\n        }\n      },\n      before: function(hook, priority) {\n        return add.call(this, before, \"before\", hook, priority);\n      },\n      after: function(hook, priority) {\n        return add.call(this, after, \"after\", hook, priority);\n      },\n      getHooks: function(match) {\n        var hooks = before.concat(after);\n        if (typeof match === \"object\") {\n          hooks = hooks.filter(function(entry) {\n            return Object.keys(match).every(function(prop) {\n              return entry[prop] === match[prop];\n            });\n          });\n        }\n        return assign(hooks, {\n          remove: function() {\n            hooks.forEach(function(entry) {\n              entry.remove();\n            });\n            return this;\n          }\n        });\n      },\n      removeAll: function() {\n        return this.getHooks().remove();\n      }\n    };\n\n    function add(store, type, hook, priority) {\n      var entry = {\n        hook: hook,\n        type: type,\n        priority: priority || 10,\n        remove: function() {\n          var index = store.indexOf(entry);\n          if (index !== -1) {\n            store.splice(index, 1);\n            generateTrap(before, after);\n          }\n        }\n      };\n      store.push(entry);\n      store.sort(function(a, b) {\n        return b.priority - a.priority;\n      });\n      generateTrap(before, after);\n      return this;\n    }\n  }\n\n  function hookFn(type, fn, name) {\n    if (fn.__funHook) {\n      if (fn.__funHook.type !== type) {\n        throw packageName + \": recreated hookable with different type\";\n      } else {\n        return fn.__funHook.fn;\n      }\n    }\n\n    var hookable = name ? get(name) : newHookable();\n\n    var trap;\n    var hookedFn;\n    var handlers = {\n      get: function(target, prop) {\n        return hookable[prop] || Reflect.get.apply(Reflect, arguments);\n      }\n    };\n\n    if (!ready) {\n      postReady.push(setTrap);\n    }\n\n    if (config.useProxy) {\n      hookedFn = new Proxy(fn, handlers);\n    } else {\n      hookedFn = function() {\n        return handlers.apply\n          ? handlers.apply(fn, this, rest(arguments))\n          : fn.apply(this, arguments);\n      };\n      assign(hookedFn, hookable);\n    }\n\n    hookable.__funHook.install(type, hookedFn, generateTrap);\n\n    return hookedFn;\n\n    function generateTrap(before, after) {\n      if (before.length || after.length) {\n        var code;\n        if (type === \"sync\") {\n          var beforeCode =\n            \"r=t.apply(h,\" + (before.length ? \"arguments\" : \"g\") + \")\";\n          var afterCode;\n          if (after.length) {\n            afterCode = chainHooks(after, \"a\", \"n(function extract(s){r=s},e)\");\n          }\n          if (before.length) {\n            beforeCode = chainHooks(\n              before,\n              \"b\",\n              \"n(function extract(){\" + beforeCode + \";\" + afterCode + \"},e)\"\n            );\n            afterCode = \"\";\n          }\n          code = [\n            \"var r,e={bail:function(a){r=a}}\",\n            beforeCode,\n            afterCode,\n            \"return r\"\n          ].join(\";\");\n        } else if (type === \"async\") {\n          code =\n            \"t.apply(h,\" +\n            (before.length\n              ? \"Array.prototype.slice.call(arguments)\" // if we're wrapped in partial, extract arguments\n              : \"g\") + // otherwise, we can just use passed in arguments\n            \".concat(\" +\n            chainHooks(after, \"a\", \"z?n(z,e):[]\") +\n            \"))\";\n          if (before.length) {\n            code = \"n(function partial(){\" + code + \"},e)\";\n          }\n          code = [\n            \"var z\",\n            'typeof g[g.length-1]===\"function\"&&(z=i.call(g.pop(),null))',\n            \"var e={bail:z}\",\n            chainHooks(before, \"b\", code)\n          ].join(\";\");\n        }\n        trap = bind.call(\n          new Function(\"i,b,a,n,t,h,g\", code),\n          null,\n          bind,\n          before,\n          after,\n          Object.assign || assign\n        );\n      } else {\n        trap = undefined;\n      }\n      setTrap();\n\n      function chainHooks(hooks, name, code) {\n        for (var i = hooks.length; i-- > 0; ) {\n          if (i === 0 && !(type === \"async\" && name === \"a\")) {\n            code =\n              name +\n              \"[\" +\n              i +\n              \"].hook.apply(h,[\" +\n              code +\n              (name === \"b\" ? \"].concat(g))\" : \",r])\");\n          } else {\n            code = \"i.call(\" + name + \"[\" + i + \"].hook, h,\" + code + \")\";\n            if (!(type === \"async\" && name === \"a\" && i === 0)) {\n              code = \"n(\" + code + \",e)\";\n            }\n          }\n        }\n        return code;\n      }\n    }\n\n    function setTrap() {\n      if (\n        ready ||\n        (type === \"sync\" && !(config.ready & create.SYNC)) ||\n        (type === \"async\" && !(config.ready & create.ASYNC))\n      ) {\n        handlers.apply = trap;\n      } else if (type === \"sync\" || !(config.ready & create.QUEUE)) {\n        handlers.apply = function() {\n          throw packageName + \": hooked function not ready\";\n        };\n      } else {\n        handlers.apply = function() {\n          var args = arguments;\n          postReady.push(function() {\n            hookedFn.apply(args[1], args[2]);\n          });\n        };\n      }\n    }\n  }\n\n  dispatch.get = get;\n  return dispatch;\n}\n\nmodule.exports = create;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fun-hooks/index.js\n// module id = 48\n// module chunks = 0","module.exports = clone;\n\n/*\n  Identical to `just-extend(true, {}, obj1)`\n\n  var arr = [1, 2, 3];\n  var subObj = {aa: 1};\n  var obj = {a: 3, b: 5, c: arr, d: subObj};\n  var objClone = clone(obj);\n  arr.push(4);\n  subObj.bb = 2;\n  obj; // {a: 3, b: 5, c: [1, 2, 3, 4], d: {aa: 1}}  \n  objClone; // {a: 3, b: 5, c: [1, 2, 3], d: {aa: 1, bb: 2}}\n*/\n\nfunction clone(obj) {\n  var result = Array.isArray(obj) ? [] : {};\n  for (var key in obj) {\n    // include prototype properties\n    var value = obj[key];\n    if (value && typeof value == 'object') {\n      result[key] = clone(value);\n    } else {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/just-clone/index.js\n// module id = 49\n// module chunks = 0","export function parseQS(query) {\r\n  return !query ? {} : query\r\n    .replace(/^\\?/, '')\r\n    .split('&')\r\n    .reduce((acc, criteria) => {\r\n      let [k, v] = criteria.split('=');\r\n      if (/\\[\\]$/.test(k)) {\r\n        k = k.replace('[]', '');\r\n        acc[k] = acc[k] || [];\r\n        acc[k].push(v);\r\n      } else {\r\n        acc[k] = v || '';\r\n      }\r\n      return acc;\r\n    }, {});\r\n}\r\n\r\nexport function formatQS(query) {\r\n  return Object\r\n    .keys(query)\r\n    .map(k => Array.isArray(query[k])\r\n      ? query[k].map(v => `${k}[]=${v}`).join('&')\r\n      : `${k}=${query[k]}`)\r\n    .join('&');\r\n}\r\n\r\nexport function parse(url, options) {\r\n  let parsed = document.createElement('a');\r\n  if (options && 'noDecodeWholeURL' in options && options.noDecodeWholeURL) {\r\n    parsed.href = url;\r\n  } else {\r\n    parsed.href = decodeURIComponent(url);\r\n  }\r\n  // in window.location 'search' is string, not object\r\n  let qsAsString = (options && 'decodeSearchAsString' in options && options.decodeSearchAsString);\r\n  return {\r\n    href: parsed.href,\r\n    protocol: (parsed.protocol || '').replace(/:$/, ''),\r\n    hostname: parsed.hostname,\r\n    port: +parsed.port,\r\n    pathname: parsed.pathname.replace(/^(?!\\/)/, '/'),\r\n    search: (qsAsString) ? parsed.search : parseQS(parsed.search || ''),\r\n    hash: (parsed.hash || '').replace(/^#/, ''),\r\n    host: parsed.host || window.location.host\r\n  };\r\n}\r\n\r\nexport function format(obj) {\r\n  return (obj.protocol || 'http') + '://' +\r\n         (obj.host ||\r\n          obj.hostname + (obj.port ? `:${obj.port}` : '')) +\r\n         (obj.pathname || '') +\r\n         (obj.search ? `?${formatQS(obj.search || '')}` : '') +\r\n         (obj.hash ? `#${obj.hash}` : '');\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/url.js","module.exports = {\"JSON_MAPPING\":{\"PL_CODE\":\"code\",\"PL_SIZE\":\"sizes\",\"PL_BIDS\":\"bids\",\"BD_BIDDER\":\"bidder\",\"BD_ID\":\"paramsd\",\"BD_PL_ID\":\"placementId\",\"ADSERVER_TARGETING\":\"adserverTargeting\",\"BD_SETTING_STANDARD\":\"standard\"},\"DEBUG_MODE\":\"pbjs_debug\",\"STATUS\":{\"GOOD\":1,\"NO_BID\":2},\"CB\":{\"TYPE\":{\"ALL_BIDS_BACK\":\"allRequestedBidsBack\",\"AD_UNIT_BIDS_BACK\":\"adUnitBidsBack\",\"BID_WON\":\"bidWon\",\"REQUEST_BIDS\":\"requestBids\"}},\"EVENTS\":{\"AUCTION_INIT\":\"auctionInit\",\"AUCTION_END\":\"auctionEnd\",\"BID_ADJUSTMENT\":\"bidAdjustment\",\"BID_TIMEOUT\":\"bidTimeout\",\"BID_REQUESTED\":\"bidRequested\",\"BID_RESPONSE\":\"bidResponse\",\"NO_BID\":\"noBid\",\"BID_WON\":\"bidWon\",\"BIDDER_DONE\":\"bidderDone\",\"SET_TARGETING\":\"setTargeting\",\"REQUEST_BIDS\":\"requestBids\",\"ADD_AD_UNITS\":\"addAdUnits\",\"AD_RENDER_FAILED\":\"adRenderFailed\"},\"AD_RENDER_FAILED_REASON\":{\"PREVENT_WRITING_ON_MAIN_DOCUMENT\":\"preventWritingOnMainDocuemnt\",\"NO_AD\":\"noAd\",\"EXCEPTION\":\"exception\",\"CANNOT_FIND_AD\":\"cannotFindAd\",\"MISSING_DOC_OR_ADID\":\"missingDocOrAdid\"},\"EVENT_ID_PATHS\":{\"bidWon\":\"adUnitCode\"},\"GRANULARITY_OPTIONS\":{\"LOW\":\"low\",\"MEDIUM\":\"medium\",\"HIGH\":\"high\",\"AUTO\":\"auto\",\"DENSE\":\"dense\",\"CUSTOM\":\"custom\"},\"TARGETING_KEYS\":{\"BIDDER\":\"hb_bidder\",\"AD_ID\":\"hb_adid\",\"PRICE_BUCKET\":\"hb_pb\",\"SIZE\":\"hb_size\",\"DEAL\":\"hb_deal\",\"SOURCE\":\"hb_source\",\"FORMAT\":\"hb_format\"},\"NATIVE_KEYS\":{\"title\":\"hb_native_title\",\"body\":\"hb_native_body\",\"body2\":\"hb_native_body2\",\"privacyLink\":\"hb_native_privacy\",\"sponsoredBy\":\"hb_native_brand\",\"image\":\"hb_native_image\",\"icon\":\"hb_native_icon\",\"clickUrl\":\"hb_native_linkurl\",\"displayUrl\":\"hb_native_displayurl\",\"cta\":\"hb_native_cta\",\"rating\":\"hb_native_rating\",\"address\":\"hb_native_address\",\"downloads\":\"hb_native_downloads\",\"likes\":\"hb_native_likes\",\"phone\":\"hb_native_phone\",\"price\":\"hb_native_price\",\"salePrice\":\"hb_native_saleprice\"},\"S2S\":{\"SRC\":\"s2s\",\"DEFAULT_ENDPOINT\":\"https://prebid.adnxs.com/pbs/v1/openrtb2/auction\",\"SYNCED_BIDDERS_KEY\":\"pbjsSyncs\"},\"BID_STATUS\":{\"BID_TARGETING_SET\":\"targetingSet\",\"RENDERED\":\"rendered\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/constants.json\n// module id = 51\n// module chunks = 0","import * as utils from '../src/utils';\nimport { registerBidder } from '../src/adapters/bidderFactory';\nimport { BANNER, VIDEO, NATIVE } from '../src/mediaTypes';\nimport {config} from '../src/config';\n\nconst BIDDER_CODE = 'pubmatic';\nconst ENDPOINT = '//hbopenbid.pubmatic.com/translator?source=prebid-client';\nconst USYNCURL = '//ads.pubmatic.com/AdServer/js/showad.js#PIX&kdntuid=1&p=';\nconst DEFAULT_CURRENCY = 'USD';\nconst AUCTION_TYPE = 1;\nconst PUBMATIC_DIGITRUST_KEY = 'nFIn8aLzbd';\nconst UNDEFINED = undefined;\nconst DEFAULT_WIDTH = 0;\nconst DEFAULT_HEIGHT = 0;\nconst PREBID_NATIVE_HELP_LINK = 'http://prebid.org/dev-docs/show-native-ads.html';\nconst CUSTOM_PARAMS = {\n  'kadpageurl': '', // Custom page url\n  'gender': '', // User gender\n  'yob': '', // User year of birth\n  'lat': '', // User location - Latitude\n  'lon': '', // User Location - Longitude\n  'wiid': '', // OpenWrap Wrapper Impression ID\n  'profId': '', // OpenWrap Legacy: Profile ID\n  'verId': '' // OpenWrap Legacy: version ID\n};\nconst DATA_TYPES = {\n  'NUMBER': 'number',\n  'STRING': 'string',\n  'BOOLEAN': 'boolean',\n  'ARRAY': 'array',\n  'OBJECT': 'object'\n};\nconst VIDEO_CUSTOM_PARAMS = {\n  'mimes': DATA_TYPES.ARRAY,\n  'minduration': DATA_TYPES.NUMBER,\n  'maxduration': DATA_TYPES.NUMBER,\n  'startdelay': DATA_TYPES.NUMBER,\n  'playbackmethod': DATA_TYPES.ARRAY,\n  'api': DATA_TYPES.ARRAY,\n  'protocols': DATA_TYPES.ARRAY,\n  'w': DATA_TYPES.NUMBER,\n  'h': DATA_TYPES.NUMBER,\n  'battr': DATA_TYPES.ARRAY,\n  'linearity': DATA_TYPES.NUMBER,\n  'placement': DATA_TYPES.NUMBER,\n  'minbitrate': DATA_TYPES.NUMBER,\n  'maxbitrate': DATA_TYPES.NUMBER\n}\n\nconst NATIVE_ASSET_ID = {\n  'TITLE': 1,\n  'IMAGE': 2,\n  'ICON': 3,\n  'SPONSOREDBY': 4,\n  'BODY': 5,\n  'CLICKURL': 6,\n  'VIDEO': 7,\n  'EXT': 8,\n  'DATA': 9,\n  'LOGO': 10,\n  'SPONSORED': 11,\n  'DESC': 12,\n  'RATING': 13,\n  'LIKES': 14,\n  'DOWNLOADS': 15,\n  'PRICE': 16,\n  'SALEPRICE': 17,\n  'PHONE': 18,\n  'ADDRESS': 19,\n  'DESC2': 20,\n  'DISPLAYURL': 21,\n  'CTA': 22\n}\n\nconst NATIVE_ASSET_REVERSE_ID = {\n  4: 'sponsoredBy',\n  5: 'body',\n  6: 'clickUrl',\n  7: 'video',\n  8: 'ext',\n  9: 'data',\n  10: 'logo',\n  11: 'sponsored',\n  12: 'desc',\n  13: 'rating',\n  14: 'likes',\n  15: 'downloads',\n  16: 'price',\n  17: 'saleprice',\n  18: 'phone',\n  19: 'address',\n  20: 'desc2',\n  21: 'displayurl',\n  22: 'cta'\n}\n\nconst NATIVE_ASSET_KEY = {\n  'TITLE': 'title',\n  'IMAGE': 'image',\n  'ICON': 'icon',\n  'SPONSOREDBY': 'sponsoredBy',\n  'BODY': 'body',\n  'VIDEO': 'video',\n  'EXT': 'ext',\n  'DATA': 'data',\n  'LOGO': 'logo',\n  'DESC': 'desc',\n  'RATING': 'rating',\n  'LIKES': 'likes',\n  'DOWNLOADS': 'downloads',\n  'PRICE': 'price',\n  'SALEPRICE': 'saleprice',\n  'PHONE': 'phone',\n  'ADDRESS': 'address',\n  'DESC2': 'desc2',\n  'DISPLAYURL': 'displayurl',\n  'CTA': 'cta'\n}\n\nconst NATIVE_ASSET_IMAGE_TYPE = {\n  'ICON': 1,\n  'LOGO': 2,\n  'IMAGE': 3\n}\n\nconst NATIVE_ASSET_DATA_TYPE = {\n  'SPONSORED': 1,\n  'DESC': 2,\n  'RATING': 3,\n  'LIKES': 4,\n  'DOWNLOADS': 5,\n  'PRICE': 6,\n  'SALEPRICE': 7,\n  'PHONE': 8,\n  'ADDRESS': 9,\n  'DESC2': 10,\n  'DISPLAYURL': 11,\n  'CTA': 12\n}\n\n// check if title, image can be added with mandatory field default values\nconst NATIVE_MINIMUM_REQUIRED_IMAGE_ASSETS = [\n  {\n    id: NATIVE_ASSET_ID.SPONSOREDBY,\n    required: true,\n    data: {\n      type: 1\n    }\n  },\n  {\n    id: NATIVE_ASSET_ID.TITLE,\n    required: true,\n  },\n  {\n    id: NATIVE_ASSET_ID.IMAGE,\n    required: true,\n  }\n]\n\nconst NET_REVENUE = false;\nconst dealChannelValues = {\n  1: 'PMP',\n  5: 'PREF',\n  6: 'PMPG'\n};\n\nlet publisherId = 0;\nlet isInvalidNativeRequest = false;\n\nfunction _getDomainFromURL(url) {\n  let anchor = document.createElement('a');\n  anchor.href = url;\n  return anchor.hostname;\n}\n\nfunction _parseSlotParam(paramName, paramValue) {\n  if (!utils.isStr(paramValue)) {\n    paramValue && utils.logWarn('PubMatic: Ignoring param key: ' + paramName + ', expects string-value, found ' + typeof paramValue);\n    return UNDEFINED;\n  }\n\n  switch (paramName) {\n    case 'pmzoneid':\n      return paramValue.split(',').slice(0, 50).map(id => id.trim()).join();\n    case 'kadfloor':\n      return parseFloat(paramValue) || UNDEFINED;\n    case 'lat':\n      return parseFloat(paramValue) || UNDEFINED;\n    case 'lon':\n      return parseFloat(paramValue) || UNDEFINED;\n    case 'yob':\n      return parseInt(paramValue) || UNDEFINED;\n    default:\n      return paramValue;\n  }\n}\n\nfunction _cleanSlot(slotName) {\n  if (utils.isStr(slotName)) {\n    return slotName.replace(/^\\s+/g, '').replace(/\\s+$/g, '');\n  }\n  return '';\n}\n\nfunction _parseAdSlot(bid) {\n  bid.params.adUnit = '';\n  bid.params.adUnitIndex = '0';\n  bid.params.width = 0;\n  bid.params.height = 0;\n  var sizesArrayExists = (bid.hasOwnProperty('sizes') && utils.isArray(bid.sizes) && bid.sizes.length >= 1);\n  bid.params.adSlot = _cleanSlot(bid.params.adSlot);\n\n  var slot = bid.params.adSlot;\n  var splits = slot.split(':');\n\n  slot = splits[0];\n  if (splits.length == 2) {\n    bid.params.adUnitIndex = splits[1];\n  }\n  // check if size is mentioned in sizes array. in that case do not check for @ in adslot\n  splits = slot.split('@');\n  if (splits.length != 2) {\n    if (!(sizesArrayExists)) {\n      utils.logWarn('AdSlot Error: adSlot not in required format');\n      return;\n    }\n  }\n  bid.params.adUnit = splits[0];\n  if (splits.length > 1) { // i.e size is specified in adslot, so consider that and ignore sizes array\n    splits = splits[1].split('x');\n    if (splits.length != 2) {\n      utils.logWarn('AdSlot Error: adSlot not in required format');\n      return;\n    }\n    bid.params.width = parseInt(splits[0]);\n    bid.params.height = parseInt(splits[1]);\n    delete bid.sizes;\n  } else if (sizesArrayExists) {\n    bid.params.width = parseInt(bid.sizes[0][0]);\n    bid.params.height = parseInt(bid.sizes[0][1]);\n  }\n}\n\nfunction _initConf(refererInfo) {\n  var conf = {};\n  conf.pageURL = utils.getTopWindowUrl();\n  if (refererInfo && refererInfo.referer) {\n    conf.refURL = refererInfo.referer;\n  } else {\n    conf.refURL = '';\n  }\n  return conf;\n}\n\nfunction _handleCustomParams(params, conf) {\n  if (!conf.kadpageurl) {\n    conf.kadpageurl = conf.pageURL;\n  }\n\n  var key, value, entry;\n  for (key in CUSTOM_PARAMS) {\n    if (CUSTOM_PARAMS.hasOwnProperty(key)) {\n      value = params[key];\n      if (value) {\n        entry = CUSTOM_PARAMS[key];\n\n        if (typeof entry === 'object') {\n          // will be used in future when we want to process a custom param before using\n          // 'keyname': {f: function() {}}\n          value = entry.f(value, conf);\n        }\n\n        if (utils.isStr(value)) {\n          conf[key] = value;\n        } else {\n          utils.logWarn('PubMatic: Ignoring param : ' + key + ' with value : ' + CUSTOM_PARAMS[key] + ', expects string-value, found ' + typeof value);\n        }\n      }\n    }\n  }\n  return conf;\n}\n\nfunction _createOrtbTemplate(conf) {\n  return {\n    id: '' + new Date().getTime(),\n    at: AUCTION_TYPE,\n    cur: [DEFAULT_CURRENCY],\n    imp: [],\n    site: {\n      page: conf.pageURL,\n      ref: conf.refURL,\n      publisher: {}\n    },\n    device: {\n      ua: navigator.userAgent,\n      js: 1,\n      dnt: (navigator.doNotTrack == 'yes' || navigator.doNotTrack == '1' || navigator.msDoNotTrack == '1') ? 1 : 0,\n      h: screen.height,\n      w: screen.width,\n      language: navigator.language\n    },\n    user: {},\n    ext: {}\n  };\n}\n\n// similar functionality as parseSlotParam. Check if the 2 functions can be clubbed.\nfunction _checkParamDataType(key, value, datatype) {\n  var errMsg = 'PubMatic: Ignoring param key: ' + key + ', expects ' + datatype + ', found ' + typeof value;\n  switch (datatype) {\n    case DATA_TYPES.BOOLEAN:\n      if (!utils.isBoolean(value)) {\n        utils.logWarn(errMsg);\n        return UNDEFINED;\n      }\n      return value;\n    case DATA_TYPES.NUMBER:\n      if (!utils.isNumber(value)) {\n        utils.logWarn(errMsg);\n        return UNDEFINED;\n      }\n      return value;\n    case DATA_TYPES.STRING:\n      if (!utils.isStr(value)) {\n        utils.logWarn(errMsg);\n        return UNDEFINED;\n      }\n      return value;\n    case DATA_TYPES.ARRAY:\n      if (!utils.isArray(value)) {\n        utils.logWarn(errMsg);\n        return UNDEFINED;\n      }\n      return value;\n  }\n}\n\nfunction _createNativeRequest(params) {\n  var nativeRequestObject = {\n    assets: []\n  };\n  for (var key in params) {\n    if (params.hasOwnProperty(key)) {\n      var assetObj = {};\n      if (!(nativeRequestObject.assets && nativeRequestObject.assets.length > 0 && nativeRequestObject.assets.hasOwnProperty(key))) {\n        switch (key) {\n          case NATIVE_ASSET_KEY.TITLE:\n            if (params[key].len || params[key].length) {\n              assetObj = {\n                id: NATIVE_ASSET_ID.TITLE,\n                required: params[key].required ? 1 : 0,\n                title: {\n                  len: params[key].len || params[key].length,\n                  ext: params[key].ext\n                }\n              };\n            } else {\n              utils.logWarn(BIDDER_CODE + ' Error: Title Length is required for native ad: ' + JSON.stringify(params));\n            }\n            break;\n          case NATIVE_ASSET_KEY.IMAGE:\n            if (params[key].sizes && params[key].sizes.length > 0) {\n              assetObj = {\n                id: NATIVE_ASSET_ID.IMAGE,\n                required: params[key].required ? 1 : 0,\n                img: {\n                  type: NATIVE_ASSET_IMAGE_TYPE.IMAGE,\n                  w: params[key].w || params[key].width || (params[key].sizes ? params[key].sizes[0] : undefined),\n                  h: params[key].h || params[key].height || (params[key].sizes ? params[key].sizes[1] : undefined),\n                  wmin: params[key].wmin || params[key].minimumWidth || (params[key].minsizes ? params[key].minsizes[0] : undefined),\n                  hmin: params[key].hmin || params[key].minimumHeight || (params[key].minsizes ? params[key].minsizes[1] : undefined),\n                  mimes: params[key].mimes,\n                  ext: params[key].ext,\n                }\n              };\n            } else {\n              // Log Warn\n              utils.logWarn(BIDDER_CODE + ' Error: Image sizes is required for native ad: ' + JSON.stringify(params));\n            }\n            break;\n          case NATIVE_ASSET_KEY.ICON:\n            if (params[key].sizes && params[key].sizes.length > 0) {\n              assetObj = {\n                id: NATIVE_ASSET_ID.ICON,\n                required: params[key].required ? 1 : 0,\n                img: {\n                  type: NATIVE_ASSET_IMAGE_TYPE.ICON,\n                  w: params[key].w || params[key].width || (params[key].sizes ? params[key].sizes[0] : undefined),\n                  h: params[key].h || params[key].height || (params[key].sizes ? params[key].sizes[1] : undefined),\n                }\n              };\n            } else {\n              // Log Warn\n              utils.logWarn(BIDDER_CODE + ' Error: Icon sizes is required for native ad: ' + JSON.stringify(params));\n            };\n            break;\n          case NATIVE_ASSET_KEY.SPONSOREDBY:\n            assetObj = {\n              id: NATIVE_ASSET_ID.SPONSOREDBY,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.SPONSORED,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.BODY:\n            assetObj = {\n              id: NATIVE_ASSET_ID.BODY,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.DESC,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.VIDEO:\n            assetObj = {\n              id: NATIVE_ASSET_ID.VIDEO,\n              required: params[key].required ? 1 : 0,\n              video: {\n                minduration: params[key].minduration,\n                maxduration: params[key].maxduration,\n                protocols: params[key].protocols,\n                mimes: params[key].mimes,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.EXT:\n            assetObj = {\n              id: NATIVE_ASSET_ID.EXT,\n              required: params[key].required ? 1 : 0,\n            };\n            break;\n          case NATIVE_ASSET_KEY.LOGO:\n            assetObj = {\n              id: NATIVE_ASSET_ID.LOGO,\n              required: params[key].required ? 1 : 0,\n              img: {\n                type: NATIVE_ASSET_IMAGE_TYPE.LOGO,\n                w: params[key].w || params[key].width || (params[key].sizes ? params[key].sizes[0] : undefined),\n                h: params[key].h || params[key].height || (params[key].sizes ? params[key].sizes[1] : undefined)\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.RATING:\n            assetObj = {\n              id: NATIVE_ASSET_ID.RATING,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.RATING,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.LIKES:\n            assetObj = {\n              id: NATIVE_ASSET_ID.LIKES,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.LIKES,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.DOWNLOADS:\n            assetObj = {\n              id: NATIVE_ASSET_ID.DOWNLOADS,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.DOWNLOADS,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.PRICE:\n            assetObj = {\n              id: NATIVE_ASSET_ID.PRICE,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.PRICE,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.SALEPRICE:\n            assetObj = {\n              id: NATIVE_ASSET_ID.SALEPRICE,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.SALEPRICE,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.PHONE:\n            assetObj = {\n              id: NATIVE_ASSET_ID.PHONE,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.PHONE,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.ADDRESS:\n            assetObj = {\n              id: NATIVE_ASSET_ID.ADDRESS,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.ADDRESS,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.DESC2:\n            assetObj = {\n              id: NATIVE_ASSET_ID.DESC2,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.DESC2,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.DISPLAYURL:\n            assetObj = {\n              id: NATIVE_ASSET_ID.DISPLAYURL,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.DISPLAYURL,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n          case NATIVE_ASSET_KEY.CTA:\n            assetObj = {\n              id: NATIVE_ASSET_ID.CTA,\n              required: params[key].required ? 1 : 0,\n              data: {\n                type: NATIVE_ASSET_DATA_TYPE.CTA,\n                len: params[key].len,\n                ext: params[key].ext\n              }\n            };\n            break;\n        }\n      }\n    }\n    if (assetObj && assetObj.id) {\n      nativeRequestObject.assets[nativeRequestObject.assets.length] = assetObj;\n    }\n  };\n\n  // for native image adtype prebid has to have few required assests i.e. title,sponsoredBy, image\n  // if any of these are missing from the request then request will not be sent\n  var requiredAssetCount = NATIVE_MINIMUM_REQUIRED_IMAGE_ASSETS.length;\n  var presentrequiredAssetCount = 0;\n  NATIVE_MINIMUM_REQUIRED_IMAGE_ASSETS.forEach(ele => {\n    var lengthOfExistingAssets = nativeRequestObject.assets.length;\n    for (var i = 0; i < lengthOfExistingAssets; i++) {\n      if (ele.id == nativeRequestObject.assets[i].id) {\n        presentrequiredAssetCount++;\n        break;\n      }\n    }\n  });\n  if (requiredAssetCount == presentrequiredAssetCount) {\n    isInvalidNativeRequest = false;\n  } else {\n    isInvalidNativeRequest = true;\n  }\n  return nativeRequestObject;\n}\n\nfunction _createImpressionObject(bid, conf) {\n  var impObj = {};\n  var bannerObj = {};\n  var videoObj = {};\n  var sizes = bid.hasOwnProperty('sizes') ? bid.sizes : [];\n\n  impObj = {\n    id: bid.bidId,\n    tagid: bid.params.adUnit,\n    bidfloor: _parseSlotParam('kadfloor', bid.params.kadfloor),\n    secure: window.location.protocol === 'https:' ? 1 : 0,\n    ext: {\n      pmZoneId: _parseSlotParam('pmzoneid', bid.params.pmzoneid)\n    },\n    bidfloorcur: bid.params.currency ? _parseSlotParam('currency', bid.params.currency) : DEFAULT_CURRENCY\n  };\n\n  if (bid.params.hasOwnProperty('video')) {\n    var videoData = bid.params.video;\n\n    for (var key in VIDEO_CUSTOM_PARAMS) {\n      if (videoData.hasOwnProperty(key)) {\n        videoObj[key] = _checkParamDataType(key, videoData[key], VIDEO_CUSTOM_PARAMS[key])\n      }\n    }\n    // read playersize and assign to h and w.\n    if (utils.isArray(bid.mediaTypes.video.playerSize[0])) {\n      videoObj.w = bid.mediaTypes.video.playerSize[0][0];\n      videoObj.h = bid.mediaTypes.video.playerSize[0][1];\n    } else if (utils.isNumber(bid.mediaTypes.video.playerSize[0])) {\n      videoObj.w = bid.mediaTypes.video.playerSize[0];\n      videoObj.h = bid.mediaTypes.video.playerSize[1];\n    }\n    if (bid.params.video.hasOwnProperty('skippable')) {\n      videoObj.ext = {\n        'video_skippable': bid.params.video.skippable ? 1 : 0\n      }\n    }\n\n    impObj.video = videoObj;\n  } else if (bid.nativeParams) {\n    impObj.native = {};\n    impObj.native['request'] = JSON.stringify(_createNativeRequest(bid.nativeParams));\n  } else {\n    bannerObj = {\n      pos: 0,\n      w: bid.params.width,\n      h: bid.params.height,\n      topframe: utils.inIframe() ? 0 : 1,\n    }\n    if (utils.isArray(sizes) && sizes.length > 1) {\n      sizes = sizes.splice(1, sizes.length - 1);\n      var format = [];\n      sizes.forEach(size => {\n        format.push({\n          w: size[0],\n          h: size[1]\n        });\n      });\n      bannerObj.format = format;\n    }\n    impObj.banner = bannerObj;\n  }\n  if (isInvalidNativeRequest && impObj.hasOwnProperty('native')) {\n    utils.logWarn(BIDDER_CODE + ': Call to OpenBid will not be sent for  native ad unit as it does not contain required valid native params.' + JSON.stringify(bid) + ' Refer:' + PREBID_NATIVE_HELP_LINK);\n    return;\n  }\n  return impObj;\n}\n\nfunction _getDigiTrustObject(key) {\n  function getDigiTrustId() {\n    let digiTrustUser = window.DigiTrust && (config.getConfig('digiTrustId') || window.DigiTrust.getUser({member: key}));\n    return (digiTrustUser && digiTrustUser.success && digiTrustUser.identity) || null;\n  }\n  let digiTrustId = getDigiTrustId();\n  // Verify there is an ID and this user has not opted out\n  if (!digiTrustId || (digiTrustId.privacy && digiTrustId.privacy.optout)) {\n    return null;\n  }\n  return digiTrustId;\n}\n\nfunction _handleDigitrustId(eids) {\n  let digiTrustId = _getDigiTrustObject(PUBMATIC_DIGITRUST_KEY);\n  if (digiTrustId !== null) {\n    eids.push({\n      'source': 'digitru.st',\n      'uids': [{\n        'id': digiTrustId.id || '',\n        'atype': 1,\n        'ext': {\n          'keyv': parseInt(digiTrustId.keyv) || 0\n        }\n      }]\n    });\n  }\n}\n\nfunction _handleTTDId(eids) {\n  let adsrvrOrgId = config.getConfig('adsrvrOrgId');\n  if (adsrvrOrgId && utils.isStr(adsrvrOrgId.TDID)) {\n    eids.push({\n      'source': 'adserver.org',\n      'uids': [{\n        'id': adsrvrOrgId.TDID,\n        'atype': 1,\n        'ext': {\n          'rtiPartner': 'TDID'\n        }\n      }]\n    });\n  }\n}\n\nfunction _handleEids(payload) {\n  let eids = [];\n  _handleDigitrustId(eids);\n  _handleTTDId(eids);\n  if (eids.length > 0) {\n    payload.user.eids = eids;\n  }\n}\n\nfunction _parseNativeResponse(bid, newBid) {\n  newBid.native = {};\n  if (bid.hasOwnProperty('adm')) {\n    var adm = '';\n    try {\n      adm = JSON.parse(bid.adm.replace(/\\\\/g, ''));\n    } catch (ex) {\n      utils.logWarn(BIDDER_CODE + ' Error: Cannot parse native reponse for ad response: ' + newBid.adm);\n      return;\n    }\n    if (adm && adm.native && adm.native.assets && adm.native.assets.length > 0) {\n      newBid.mediaType = 'native';\n      for (let i = 0, len = adm.native.assets.length; i < len; i++) {\n        switch (adm.native.assets[i].id) {\n          case NATIVE_ASSET_ID.TITLE:\n            newBid.native.title = adm.native.assets[i].title && adm.native.assets[i].title.text;\n            break;\n          case NATIVE_ASSET_ID.IMAGE:\n            newBid.native.image = {\n              url: adm.native.assets[i].img && adm.native.assets[i].img.url,\n              height: adm.native.assets[i].img && adm.native.assets[i].img.h,\n              width: adm.native.assets[i].img && adm.native.assets[i].img.w,\n            };\n            break;\n          case NATIVE_ASSET_ID.ICON:\n            newBid.native.icon = {\n              url: adm.native.assets[i].img && adm.native.assets[i].img.url,\n              height: adm.native.assets[i].img && adm.native.assets[i].img.h,\n              width: adm.native.assets[i].img && adm.native.assets[i].img.w,\n            };\n            break;\n          case NATIVE_ASSET_ID.SPONSOREDBY:\n          case NATIVE_ASSET_ID.BODY:\n          case NATIVE_ASSET_ID.LIKES:\n          case NATIVE_ASSET_ID.DOWNLOADS:\n          case NATIVE_ASSET_ID.PRICE:\n          case NATIVE_ASSET_ID.SALEPRICE:\n          case NATIVE_ASSET_ID.PHONE:\n          case NATIVE_ASSET_ID.ADDRESS:\n          case NATIVE_ASSET_ID.DESC2:\n          case NATIVE_ASSET_ID.CTA:\n          case NATIVE_ASSET_ID.RATING:\n          case NATIVE_ASSET_ID.DISPLAYURL:\n            //  Remove Redundant code\n            newBid.native[NATIVE_ASSET_REVERSE_ID[adm.native.assets[i].id]] = adm.native.assets[i].data && adm.native.assets[i].data.value;\n            break;\n        }\n      }\n      newBid.native.clickUrl = adm.native.link && adm.native.link.url;\n      newBid.native.clickTrackers = (adm.native.link && adm.native.link.clicktrackers) || [];\n      newBid.native.impressionTrackers = adm.native.imptrackers || [];\n      newBid.native.jstracker = adm.native.jstracker || [];\n      if (!newBid.width) {\n        newBid.width = DEFAULT_WIDTH;\n      }\n      if (!newBid.height) {\n        newBid.height = DEFAULT_HEIGHT;\n      }\n    }\n  }\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n  /**\n  * Determines whether or not the given bid request is valid. Valid bid request must have placementId and hbid\n  *\n  * @param {BidRequest} bid The bid params to validate.\n  * @return boolean True if this is a valid bid, and false otherwise.\n  */\n  isBidRequestValid: bid => {\n    if (bid && bid.params) {\n      if (!utils.isStr(bid.params.publisherId)) {\n        utils.logWarn(BIDDER_CODE + ' Error: publisherId is mandatory and cannot be numeric. Call to OpenBid will not be sent for ad unit: ' + JSON.stringify(bid));\n        return false;\n      }\n      if (!utils.isStr(bid.params.adSlot)) {\n        utils.logWarn(BIDDER_CODE + ': adSlotId is mandatory and cannot be numeric. Call to OpenBid will not be sent for ad unit: ' + JSON.stringify(bid));\n        return false;\n      }\n      // video ad validation\n      if (bid.params.hasOwnProperty('video')) {\n        if (!bid.params.video.hasOwnProperty('mimes') || !utils.isArray(bid.params.video.mimes) || bid.params.video.mimes.length === 0) {\n          utils.logWarn(BIDDER_CODE + ': For video ads, mimes is mandatory and must specify atlease 1 mime value. Call to OpenBid will not be sent for ad unit:' + JSON.stringify(bid));\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: (validBidRequests, bidderRequest) => {\n    var refererInfo;\n    if (bidderRequest && bidderRequest.refererInfo) {\n      refererInfo = bidderRequest.refererInfo;\n    }\n    var conf = _initConf(refererInfo);\n    var payload = _createOrtbTemplate(conf);\n    var bidCurrency = '';\n    var dctr = '';\n    var dctrLen;\n    var dctrArr = [];\n    var bid;\n    validBidRequests.forEach(originalBid => {\n      bid = utils.deepClone(originalBid);\n      _parseAdSlot(bid);\n      if (bid.params.hasOwnProperty('video')) {\n        if (!(bid.params.adSlot && bid.params.adUnit && bid.params.adUnitIndex)) {\n          utils.logWarn(BIDDER_CODE + ': Skipping the non-standard adslot: ', bid.params.adSlot, JSON.stringify(bid));\n          return;\n        }\n      } else {\n        if (!(bid.params.adSlot && bid.params.adUnit && bid.params.adUnitIndex && bid.params.width && bid.params.height)) {\n          utils.logWarn(BIDDER_CODE + ': Skipping the non-standard adslot: ', bid.params.adSlot, JSON.stringify(bid));\n          return;\n        }\n      }\n      conf.pubId = conf.pubId || bid.params.publisherId;\n      conf = _handleCustomParams(bid.params, conf);\n      conf.transactionId = bid.transactionId;\n      if (bidCurrency === '') {\n        bidCurrency = bid.params.currency || undefined;\n      } else if (bid.params.hasOwnProperty('currency') && bidCurrency !== bid.params.currency) {\n        utils.logWarn(BIDDER_CODE + ': Currency specifier ignored. Only one currency permitted.');\n      }\n      bid.params.currency = bidCurrency;\n      // check if dctr is added to more than 1 adunit\n      if (bid.params.hasOwnProperty('dctr') && utils.isStr(bid.params.dctr)) {\n        dctrArr.push(bid.params.dctr);\n      }\n      var impObj = _createImpressionObject(bid, conf);\n      if (impObj) {\n        payload.imp.push(impObj);\n      }\n    });\n\n    if (payload.imp.length == 0) {\n      return;\n    }\n\n    payload.site.publisher.id = conf.pubId.trim();\n    publisherId = conf.pubId.trim();\n    payload.ext.wrapper = {};\n    payload.ext.wrapper.profile = parseInt(conf.profId) || UNDEFINED;\n    payload.ext.wrapper.version = parseInt(conf.verId) || UNDEFINED;\n    payload.ext.wrapper.wiid = conf.wiid || UNDEFINED;\n    payload.ext.wrapper.wv = $$REPO_AND_VERSION$$;\n    payload.ext.wrapper.transactionId = conf.transactionId;\n    payload.ext.wrapper.wp = 'pbjs';\n    payload.user.gender = (conf.gender ? conf.gender.trim() : UNDEFINED);\n    payload.user.geo = {};\n\n    // Attaching GDPR Consent Params\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      payload.user.ext = {\n        consent: bidderRequest.gdprConsent.consentString\n      };\n\n      payload.regs = {\n        ext: {\n          gdpr: (bidderRequest.gdprConsent.gdprApplies ? 1 : 0)\n        }\n      };\n    }\n\n    payload.user.geo.lat = _parseSlotParam('lat', conf.lat);\n    payload.user.geo.lon = _parseSlotParam('lon', conf.lon);\n    payload.user.yob = _parseSlotParam('yob', conf.yob);\n    payload.device.geo = {};\n    payload.device.geo.lat = _parseSlotParam('lat', conf.lat);\n    payload.device.geo.lon = _parseSlotParam('lon', conf.lon);\n    payload.site.page = conf.kadpageurl.trim() || payload.site.page.trim();\n    payload.site.domain = _getDomainFromURL(payload.site.page);\n\n    // set dctr value in site.ext, if present in validBidRequests[0], else ignore\n    if (dctrArr.length > 0) {\n      if (validBidRequests[0].params.hasOwnProperty('dctr')) {\n        dctr = validBidRequests[0].params.dctr;\n        if (utils.isStr(dctr) && dctr.length > 0) {\n          var arr = dctr.split('|');\n          dctr = '';\n          arr.forEach(val => {\n            dctr += (val.length > 0) ? (val.trim() + '|') : '';\n          });\n          dctrLen = dctr.length;\n          if (dctr.substring(dctrLen, dctrLen - 1) === '|') {\n            dctr = dctr.substring(0, dctrLen - 1);\n          }\n          payload.site.ext = {\n            key_val: dctr.trim()\n          }\n        } else {\n          utils.logWarn(BIDDER_CODE + ': Ignoring param : dctr with value : ' + dctr + ', expects string-value, found empty or non-string value');\n        }\n        if (dctrArr.length > 1) {\n          utils.logWarn(BIDDER_CODE + ': dctr value found in more than 1 adunits. Value from 1st adunit will be picked. Ignoring values from subsequent adunits');\n        }\n      } else {\n        utils.logWarn(BIDDER_CODE + ': dctr value not found in 1st adunit, ignoring values from subsequent adunits');\n      }\n    }\n\n    _handleEids(payload);\n    return {\n      method: 'POST',\n      url: ENDPOINT,\n      data: JSON.stringify(payload)\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} response A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: (response, request) => {\n    const bidResponses = [];\n    var respCur = DEFAULT_CURRENCY;\n    try {\n      if (response.body && response.body.seatbid && utils.isArray(response.body.seatbid)) {\n        // Supporting multiple bid responses for same adSize\n        respCur = response.body.cur || respCur;\n        response.body.seatbid.forEach(seatbidder => {\n          seatbidder.bid &&\n            utils.isArray(seatbidder.bid) &&\n            seatbidder.bid.forEach(bid => {\n              let parsedRequest = JSON.parse(request.data);\n              let newBid = {\n                requestId: bid.impid,\n                cpm: (parseFloat(bid.price) || 0).toFixed(2),\n                width: bid.w,\n                height: bid.h,\n                creativeId: bid.crid || bid.id,\n                dealId: bid.dealid,\n                currency: respCur,\n                netRevenue: NET_REVENUE,\n                ttl: 300,\n                referrer: parsedRequest.site && parsedRequest.site.ref ? parsedRequest.site.ref : '',\n                ad: bid.adm\n              };\n              if (parsedRequest.imp && parsedRequest.imp.length > 0) {\n                parsedRequest.imp.forEach(req => {\n                  if (bid.impid === req.id && req.hasOwnProperty('video')) {\n                    newBid.mediaType = 'video';\n                    newBid.width = bid.hasOwnProperty('w') ? bid.w : req.video.w;\n                    newBid.height = bid.hasOwnProperty('h') ? bid.h : req.video.h;\n                    newBid.vastXml = bid.adm;\n                  }\n                  if (bid.impid === req.id && req.hasOwnProperty('native')) {\n                    _parseNativeResponse(bid, newBid);\n                  }\n                });\n              }\n              if (bid.ext && bid.ext.deal_channel) {\n                newBid['dealChannel'] = dealChannelValues[bid.ext.deal_channel] || null;\n              }\n\n              bidResponses.push(newBid);\n            });\n        });\n      }\n    } catch (error) {\n      utils.logError(error);\n    }\n    return bidResponses;\n  },\n\n  /**\n   * Register User Sync.\n   */\n  getUserSyncs: (syncOptions, responses, gdprConsent) => {\n    let syncurl = USYNCURL + publisherId;\n\n    // Attaching GDPR Consent Params in UserSync url\n    if (gdprConsent) {\n      syncurl += '&gdpr=' + (gdprConsent.gdprApplies ? 1 : 0);\n      syncurl += '&gdpr_consent=' + encodeURIComponent(gdprConsent.consentString || '');\n    }\n\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: syncurl\n      }];\n    } else {\n      utils.logWarn('PubMatic: Please enable iframe based user sync.');\n    }\n  },\n\n  /**\n   * Covert bid param types for S2S\n   * @param {Object} params bid params\n   * @param {Boolean} isOpenRtb boolean to check openrtb2 protocol\n   * @return {Object} params bid params\n   */\n  transformBidParams: function (params, isOpenRtb) {\n    return utils.convertTypes({\n      'publisherId': 'string',\n      'adSlot': 'string'\n    }, params);\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/pubmaticBidAdapter.js","import * as utils from '../src/utils';\nimport { Renderer } from '../src/Renderer';\nimport { registerBidder } from '../src/adapters/bidderFactory';\nimport { VIDEO } from '../src/mediaTypes';\n\nconst BIDDER_CODE = 'spotx';\nconst URL = '//search.spotxchange.com/openrtb/2.3/dados/';\nconst ORTB_VERSION = '2.3';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['spotx'],\n  supportedMediaTypes: [VIDEO],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   * From Prebid.js: isBidRequestValid - Verify the the AdUnits.bids, respond with true (valid) or false (invalid).\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    if (bid && typeof bid.params !== 'object') {\n      utils.logError(BIDDER_CODE + ': params is not defined or is incorrect in the bidder settings.');\n      return false;\n    }\n\n    if (!utils.deepAccess(bid, 'mediaTypes.video')) {\n      utils.logError(BIDDER_CODE + ': mediaTypes.video is not present in the bidder settings.');\n      return false;\n    }\n\n    const playerSize = utils.deepAccess(bid, 'mediaTypes.video.playerSize');\n    if (!playerSize || !utils.isArray(playerSize)) {\n      utils.logError(BIDDER_CODE + ': mediaTypes.video.playerSize is not defined in the bidder settings.');\n      return false;\n    }\n\n    if (!utils.getBidIdParameter('channel_id', bid.params)) {\n      utils.logError(BIDDER_CODE + ': channel_id is not present in bidder params');\n      return false;\n    }\n\n    if (utils.deepAccess(bid, 'mediaTypes.video.context') == 'outstream' || utils.deepAccess(bid, 'params.ad_unit') == 'outstream') {\n      if (!utils.getBidIdParameter('outstream_function', bid.params)) {\n        if (!utils.getBidIdParameter('outstream_options', bid.params)) {\n          utils.logError(BIDDER_CODE + ': please define outstream_options parameter or override the default SpotX outstream rendering by defining your own Outstream function using field outstream_function.');\n          return false;\n        }\n        if (!utils.getBidIdParameter('slot', bid.params.outstream_options)) {\n          utils.logError(BIDDER_CODE + ': please define parameters slot outstream_options object in the configuration.');\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   * from Prebid.js: buildRequests - Takes an array of valid bid requests, all of which are guaranteed to have passed the isBidRequestValid() test.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests, bidderRequest) {\n    const page = bidderRequest.refererInfo.referer;\n    const isPageSecure = !!page.match(/^https:/)\n\n    const siteId = '';\n    const spotxRequests = bidRequests.map(function(bid) {\n      const channelId = utils.getBidIdParameter('channel_id', bid.params);\n      let pubcid = null;\n\n      const playerSize = utils.deepAccess(bid, 'mediaTypes.video.playerSize');\n      const contentWidth = playerSize[0][0];\n      const contentHeight = playerSize[0][1];\n\n      const secure = isPageSecure || (utils.getBidIdParameter('secure', bid.params) ? 1 : 0);\n\n      const ext = {\n        sdk_name: 'Prebid 1+',\n        versionOrtb: ORTB_VERSION\n      };\n\n      if (utils.getBidIdParameter('ad_volume', bid.params) != '') {\n        ext.ad_volume = utils.getBidIdParameter('ad_volume', bid.params);\n      }\n\n      if (utils.getBidIdParameter('ad_unit', bid.params) != '') {\n        ext.ad_unit = utils.getBidIdParameter('ad_unit', bid.params);\n      }\n\n      if (utils.getBidIdParameter('outstream_options', bid.params) != '') {\n        ext.outstream_options = utils.getBidIdParameter('outstream_options', bid.params);\n      }\n\n      if (utils.getBidIdParameter('outstream_function', bid.params) != '') {\n        ext.outstream_function = utils.getBidIdParameter('outstream_function', bid.params);\n      }\n\n      if (utils.getBidIdParameter('custom', bid.params) != '') {\n        ext.custom = utils.getBidIdParameter('custom', bid.params);\n      }\n\n      if (utils.getBidIdParameter('pre_market_bids', bid.params) != '' && utils.isArray(utils.getBidIdParameter('pre_market_bids', bid.params))) {\n        const preMarketBids = utils.getBidIdParameter('pre_market_bids', bid.params);\n        ext.pre_market_bids = [];\n        for (let i in preMarketBids) {\n          const preMarketBid = preMarketBids[i];\n          let vastStr = '';\n          if (preMarketBid['vast_url']) {\n            vastStr = '<?xml version=\"1.0\" encoding=\"utf-8\"?><VAST version=\"2.0\"><Ad><Wrapper><VASTAdTagURI>' + preMarketBid['vast_url'] + '</VASTAdTagURI></Wrapper></Ad></VAST>';\n          } else if (preMarketBid['vast_string']) {\n            vastStr = preMarketBid['vast_string'];\n          }\n          ext.pre_market_bids.push({\n            id: preMarketBid['deal_id'],\n            seatbid: [{\n              bid: [{\n                impid: Date.now(),\n                dealid: preMarketBid['deal_id'],\n                price: preMarketBid['price'],\n                adm: vastStr\n              }]\n            }],\n            cur: preMarketBid['currency'],\n            ext: {\n              event_log: [{}]\n            }\n          });\n        }\n      }\n\n      const mimes = utils.getBidIdParameter('mimes', bid.params) || ['application/javascript', 'video/mp4', 'video/webm'];\n\n      const spotxReq = {\n        id: bid.bidId,\n        secure: secure,\n        video: {\n          w: contentWidth,\n          h: contentHeight,\n          ext: ext,\n          mimes: mimes\n        }\n      };\n\n      if (utils.getBidIdParameter('price_floor', bid.params) != '') {\n        spotxReq.bidfloor = utils.getBidIdParameter('price_floor', bid.params);\n      }\n\n      if (utils.getBidIdParameter('start_delay', bid.params) != '') {\n        spotxReq.video.startdelay = 0 + Boolean(utils.getBidIdParameter('start_delay', bid.params));\n      }\n\n      if (bid.crumbs && bid.crumbs.pubcid) {\n        pubcid = bid.crumbs.pubcid;\n      }\n\n      const language = navigator.language ? 'language' : 'userLanguage';\n      const device = {\n        h: screen.height,\n        w: screen.width,\n        dnt: utils.getDNT() ? 1 : 0,\n        language: navigator[language].split('-')[0],\n        make: navigator.vendor ? navigator.vendor : '',\n        ua: navigator.userAgent\n      };\n\n      const requestPayload = {\n        id: channelId,\n        imp: spotxReq,\n        site: {\n          id: siteId,\n          page: page,\n          content: 'content',\n        },\n        device: device,\n        ext: {\n          wrap_response: 1\n        }\n      };\n\n      if (utils.getBidIdParameter('number_of_ads', bid.params)) {\n        requestPayload['ext']['number_of_ads'] = utils.getBidIdParameter('number_of_ads', bid.params);\n      }\n\n      const userExt = {};\n\n      // Add GDPR flag and consent string\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        userExt.consent = bidderRequest.gdprConsent.consentString;\n\n        if (typeof bidderRequest.gdprConsent.gdprApplies !== 'undefined') {\n          requestPayload.regs = {\n            ext: {\n              gdpr: (bidderRequest.gdprConsent.gdprApplies ? 1 : 0)\n            }\n          };\n        }\n      }\n\n      // Add common id if available\n      if (pubcid) {\n        userExt.fpc = pubcid;\n      }\n\n      // Only add the user object if it's not empty\n      if (!utils.isEmpty(userExt)) {\n        requestPayload.user = { ext: userExt };\n      }\n      return {\n        method: 'POST',\n        url: URL + channelId,\n        data: requestPayload,\n        bidRequest: bidderRequest\n      };\n    });\n\n    return spotxRequests;\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidderRequest) {\n    const bidResponses = [];\n    const serverResponseBody = serverResponse.body;\n\n    if (serverResponseBody && utils.isArray(serverResponseBody.seatbid)) {\n      utils._each(serverResponseBody.seatbid, function(bids) {\n        utils._each(bids.bid, function(spotxBid) {\n          let currentBidRequest = {};\n          for (let i in bidderRequest.bidRequest.bids) {\n            if (spotxBid.impid == bidderRequest.bidRequest.bids[i].bidId) {\n              currentBidRequest = bidderRequest.bidRequest.bids[i];\n            }\n          }\n\n          /**\n           * Make sure currency and price are the right ones\n           * TODO: what about the pre_market_bid partners sizes?\n           */\n          utils._each(currentBidRequest.params.pre_market_bids, function(pmb) {\n            if (pmb.deal_id == spotxBid.id) {\n              spotxBid.price = pmb.price;\n              serverResponseBody.cur = pmb.currency;\n            }\n          });\n\n          const bid = {\n            requestId: currentBidRequest.bidId,\n            currency: serverResponseBody.cur || 'USD',\n            cpm: spotxBid.price,\n            creativeId: spotxBid.crid || '',\n            ttl: 360,\n            netRevenue: true,\n            channel_id: serverResponseBody.id,\n            cache_key: spotxBid.ext.cache_key,\n            vastUrl: '//search.spotxchange.com/ad/vast.html?key=' + spotxBid.ext.cache_key,\n            mediaType: VIDEO,\n            width: spotxBid.w,\n            height: spotxBid.h\n          };\n\n          const context1 = utils.deepAccess(currentBidRequest, 'mediaTypes.video.context');\n          const context2 = utils.deepAccess(currentBidRequest, 'params.ad_unit');\n          if (context1 == 'outstream' || context2 == 'outstream') {\n            const playersize = utils.deepAccess(currentBidRequest, 'mediaTypes.video.playerSize');\n            const renderer = Renderer.install({\n              id: 0,\n              url: '//',\n              config: {\n                adText: 'SpotX Outstream Video Ad via Prebid.js',\n                player_width: playersize[0][0],\n                player_height: playersize[0][1],\n                content_page_url: utils.deepAccess(bidderRequest, 'data.site.page'),\n                ad_mute: +!!utils.deepAccess(currentBidRequest, 'params.ad_mute'),\n                hide_skin: +!!utils.deepAccess(currentBidRequest, 'params.hide_skin'),\n                outstream_options: utils.deepAccess(currentBidRequest, 'params.outstream_options'),\n                outstream_function: utils.deepAccess(currentBidRequest, 'params.outstream_function')\n              }\n            });\n\n            try {\n              renderer.setRender(outstreamRender);\n              renderer.setEventHandlers({\n                impression: function impression() {\n                  return utils.logMessage('SpotX outstream video impression event');\n                },\n                loaded: function loaded() {\n                  return utils.logMessage('SpotX outstream video loaded event');\n                },\n                ended: function ended() {\n                  utils.logMessage('SpotX outstream renderer video event');\n                }\n              });\n            } catch (err) {\n              utils.logWarn('Prebid Error calling setRender or setEve,tHandlers on renderer', err);\n            }\n            bid.renderer = renderer;\n          }\n\n          bidResponses.push(bid);\n        })\n      });\n    }\n\n    return bidResponses;\n  }\n}\n\nfunction createOutstreamScript(bid) {\n  const slot = utils.getBidIdParameter('slot', bid.renderer.config.outstream_options);\n  utils.logMessage('[SPOTX][renderer] Handle SpotX outstream renderer');\n  const script = window.document.createElement('script');\n  script.type = 'text/javascript';\n  script.src = '//js.spotx.tv/easi/v1/' + bid.channel_id + '.js';\n  let dataSpotXParams = {};\n  dataSpotXParams['data-spotx_channel_id'] = '' + bid.channel_id;\n  dataSpotXParams['data-spotx_vast_url'] = '' + bid.vastUrl;\n  dataSpotXParams['data-spotx_content_page_url'] = bid.renderer.config.content_page_url;\n  dataSpotXParams['data-spotx_ad_unit'] = 'incontent';\n\n  utils.logMessage('[SPOTX][renderer] Default beahavior');\n  if (utils.getBidIdParameter('ad_mute', bid.renderer.config.outstream_options)) {\n    dataSpotXParams['data-spotx_ad_mute'] = '0';\n  }\n  dataSpotXParams['data-spotx_collapse'] = '0';\n  dataSpotXParams['data-spotx_autoplay'] = '1';\n  dataSpotXParams['data-spotx_blocked_autoplay_override_mode'] = '1';\n  dataSpotXParams['data-spotx_video_slot_can_autoplay'] = '1';\n\n  const playersizeAutoAdapt = utils.getBidIdParameter('playersize_auto_adapt', bid.renderer.config.outstream_options);\n  if (playersizeAutoAdapt && utils.isBoolean(playersizeAutoAdapt) && playersizeAutoAdapt === true) {\n    if (bid.width && utils.isNumber(bid.width) && bid.height && utils.isNumber(bid.height)) {\n      const ratio = bid.width / bid.height;\n      const slotClientWidth = window.document.getElementById(slot).clientWidth;\n      let playerWidth = bid.renderer.config.player_width;\n      let playerHeight = bid.renderer.config.player_height;\n      let contentWidth = 0;\n      let contentHeight = 0;\n      if (slotClientWidth < playerWidth) {\n        playerWidth = slotClientWidth;\n        playerHeight = playerWidth / ratio;\n      }\n      if (ratio <= 1) {\n        contentWidth = Math.round(playerHeight * ratio);\n        contentHeight = playerHeight;\n      } else {\n        contentWidth = playerWidth;\n        contentHeight = Math.round(playerWidth / ratio);\n      }\n\n      dataSpotXParams['data-spotx_content_width'] = '' + contentWidth;\n      dataSpotXParams['data-spotx_content_height'] = '' + contentHeight;\n    } else {\n      utils.logWarn('[SPOTX][renderer] PlayerSize auto adapt: bid.width and bid.height are incorrect');\n    }\n  }\n\n  const customOverride = utils.getBidIdParameter('custom_override', bid.renderer.config.outstream_options);\n  if (customOverride && utils.isPlainObject(customOverride)) {\n    utils.logMessage('[SPOTX][renderer] Custom beahavior.');\n    for (let name in customOverride) {\n      if (customOverride.hasOwnProperty(name)) {\n        if (name === 'channel_id' || name === 'vast_url' || name === 'content_page_url' || name === 'ad_unit') {\n          utils.logWarn('[SPOTX][renderer] Custom beahavior: following option cannot be overrided: ' + name);\n        } else {\n          dataSpotXParams['data-spotx_' + name] = customOverride[name];\n        }\n      }\n    }\n  }\n\n  for (let key in dataSpotXParams) {\n    if (dataSpotXParams.hasOwnProperty(key)) {\n      script.setAttribute(key, dataSpotXParams[key]);\n    }\n  }\n\n  return script;\n}\n\nfunction outstreamRender(bid) {\n  const script = createOutstreamScript(bid);\n  if (bid.renderer.config.outstream_function != null && typeof bid.renderer.config.outstream_function === 'function') {\n    bid.renderer.config.outstream_function(bid, script);\n  } else {\n    try {\n      const inIframe = utils.getBidIdParameter('in_iframe', bid.renderer.config.outstream_options);\n      if (inIframe && window.document.getElementById(inIframe).nodeName == 'IFRAME') {\n        const rawframe = window.document.getElementById(inIframe);\n        let framedoc = rawframe.contentDocument;\n        if (!framedoc && rawframe.contentWindow) {\n          framedoc = rawframe.contentWindow.document;\n        }\n        framedoc.body.appendChild(script);\n      } else {\n        const slot = utils.getBidIdParameter('slot', bid.renderer.config.outstream_options);\n        if (slot && window.document.getElementById(slot)) {\n          window.document.getElementById(slot).appendChild(script);\n        } else {\n          window.document.getElementsByTagName('head')[0].appendChild(script);\n        }\n      }\n    } catch (err) {\n      utils.logError('[SPOTX][renderer] Error:' + err.message)\n    }\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/spotxBidAdapter.js","var getIncrementalInteger = (function () {\n  var count = 0;\n  return function () {\n    count++;\n    return count;\n  };\n})();\n\nexport function getUniqueIdentifierStr() {\n  return getIncrementalInteger() + Math.random().toString(16).substr(2);\n}\n\nexport function generateUUID(placeholder) {\n  return placeholder\n    ? (placeholder ^ _getRandomData() >> placeholder / 4).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, generateUUID);\n}\n\n/**\n * Returns random data using the Crypto API if available and Math.random if not\n * Method is from https://gist.github.com/jed/982883 like generateUUID, direct link https://gist.github.com/jed/982883#gistcomment-45104\n */\nfunction _getRandomData() {\n  if (window && window.crypto && window.crypto.getRandomValues) {\n    return crypto.getRandomValues(new Uint8Array(1))[0] % 16;\n  } else {\n    return Math.random() * 16;\n  }\n}\n\nexport function triggerPixel(url, done) {\n  const img = new Image();\n  if (done && typeof done == 'function') {\n    img.addEventListener('load', done);\n    img.addEventListener('error', done);\n  }\n  img.src = url;\n}\n\nexport function insertUserSyncIframe(url, done) {\n  let iframeHtml = createTrackPixelIframeHtml(url, false, 'allow-scripts allow-same-origin');\n  let div = document.createElement('div');\n  div.innerHTML = iframeHtml;\n  let iframe = div.firstChild;\n  if (done && internal.isFn(done)) {\n    iframe.addEventListener('load', done);\n    iframe.addEventListener('error', done);\n  }\n  insertElement(iframe, document, 'html', true);\n}\n\nfunction createTrackPixelIframeHtml(url, encodeUri = true, sandbox = '') {\n  if (!url) {\n    return '';\n  }\n  if (encodeUri) {\n    url = encodeURI(url);\n  }\n  if (sandbox) {\n    sandbox = `sandbox=\"${sandbox}\"`;\n  }\n\n  return `<iframe ${sandbox} id=\"${getUniqueIdentifierStr()}\"\n      frameborder=\"0\"\n      allowtransparency=\"true\"\n      marginheight=\"0\" marginwidth=\"0\"\n      width=\"0\" hspace=\"0\" vspace=\"0\" height=\"0\"\n      style=\"height:0px;width:0px;display:none;\"\n      scrolling=\"no\"\n      src=\"${url}\">\n    </iframe>`;\n}\n\nfunction insertElement(elm, doc, target, asLastChildChild) {\n  doc = doc || document;\n  let parentEl;\n  if (target) {\n    parentEl = doc.getElementsByTagName(target);\n  } else {\n    parentEl = doc.getElementsByTagName('head');\n  }\n  try {\n    parentEl = parentEl.length ? parentEl : doc.getElementsByTagName('body');\n    if (parentEl.length) {\n      parentEl = parentEl[0];\n      let insertBeforeEl = asLastChildChild ? null : parentEl.firstChild;\n      return parentEl.insertBefore(elm, insertBeforeEl);\n    }\n  } catch (e) {}\n}\n\nexport function shuffleArray(list) {\n  if (list.length > 1) {\n    for (let i = list.length - 1; i >= 0; i--) {\n      const randomIndex = Math.floor(Math.random() * (i + 1));\n      const randomElement = list[randomIndex];\n      list[randomIndex] = list[i];\n      list[i] = randomElement;\n    }\n  }\n  return list;\n}\n\nexport function parseQueryStringParameters(queryObj) {\n  let result = '';\n  for (var k in queryObj) {\n    if (queryObj.hasOwnProperty(k)) { result += k + '=' + encodeURIComponent(queryObj[k]) + '&'; }\n  }\n\n  return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./cedato/utils.js","import '../modules/appnexusBidAdapter';\nimport '../modules/pubmaticBidAdapter';\n// additional\nimport '../modules/spotxBidAdapter';\n// import '../modules/freewheel-sspBidAdapter';\n// import '../modules/telariaBidAdapter';\n\nimport { getUniqueIdentifierStr, generateUUID, insertUserSyncIframe, triggerPixel, shuffleArray, parseQueryStringParameters } from './utils';\nimport { getAdapter } from './bidderFactory';\n\nconst adapterUserSyncsDone = [];\n\nexport function requestBid(bid, config) {\n  const spec = getAdapter(bid);\n  if (!spec) {\n    console.warn(`Unsupported bid adapter, name: ${bid && bid.bidder}`);\n    return;\n  }\n  const adUnit = {\n    sizes: [640, 480],\n    mediaTypes: {\n      video: {\n        playerSize: [640, 480],\n        context: 'instream',\n      }\n    },\n    bids: [bid],\n  };\n\n  const bidRequests = getBidRequests(adUnit, spec);\n  const bidderRequest = getBidderRequest(bidRequests, config);\n  let request = spec.buildRequests(bidRequests, bidderRequest);\n  if (Array.isArray(request)) {\n    request = request[0];\n  }\n\n  if (!adUnit.bids || adUnit.bids.length == 0) {\n    return null;\n  }\n\n  return processRequest(request).then(response => {\n    if (response && response.error) {\n      throw new Error(response.error);\n    }\n    response = { body: response };\n    const bids = spec.interpretResponse(response, request);\n    if (bids && bids.length) {\n      const bidder = adUnit.bids[0].bidder;\n      setTimeout(() => triggerUserSync(bidder, [response], spec), 3000);\n      return bids[0].vastUrl;\n    }\n    return null;\n  });\n}\n\n// generated bid requests\nfunction filterNonValid(bid, spec) {\n  if (!spec.isBidRequestValid(bid)) {\n    return false;\n  }\n  return true;\n}\n\nfunction getBidRequests(adUnit, spec) {\n  const unitBid = adUnit.bids[0];\n  let bids = [\n    {\n      ...unitBid,\n      mediaTypes: adUnit.mediaTypes,\n      adUnitCode: adUnit.code,\n      sizes: adUnit.sizes,\n\n      bidderRequestId: getUniqueIdentifierStr(),\n      bidId: getUniqueIdentifierStr(),\n      transactionId: generateUUID(),\n      auctionId: generateUUID(),\n      crumbs: {\n        pubcid: generateUUID(),\n      },\n    }\n  ];\n  bids = bids.filter((bid) => filterNonValid(bid, spec));\n\n  return bids;\n}\n\nfunction getBidderRequest(bidRequests, config) {\n  if (!bidRequests || bidRequests.length == 0) {\n    return null;\n  }\n  const domain = (config && config.domain) || window.location.href;\n  const bid = bidRequests[0];\n  const bidderRequest = {\n    bidderCode: bid.bidder,\n    auctionId: bid.auctionId,\n    bidderRequestId: bid.bidderRequestId,\n    bids: [\n      bid,\n    ],\n    // 'auctionStart': 1551439885900,\n    timeout: 700,\n    start: Date.now(),\n    refererInfo: {\n      referer: domain,\n      reachedTop: true,\n      numIframes: 0,\n      stack: [domain],\n    },\n  };\n\n  return bidderRequest;\n}\n\nfunction processRequest(request) {\n  let requestUrl = request.url;\n  const requestInit = {\n    method: request.method,\n    mode: 'cors', // no-cors, cors, *same-origin\n    // headers: {\n    //   contentType: 'text/plain',\n    // },\n  };\n  if (request.data) {\n    if (request.method == 'POST') {\n      requestInit.body = typeof request.data == 'string' ? request.data : JSON.stringify(request.data);\n    } else {\n      requestUrl += `?${typeof request.data === 'object' ? parseQueryStringParameters(request.data) : request.data}`;\n    }\n  }\n  return fetch(requestUrl, requestInit).then(response => response.text()).then(data => {\n    try {\n      data = JSON.parse(data);\n    } catch (e) {}\n    return data;\n  });\n}\n\nfunction triggerUserSync(bidder, responses, spec) {\n  if (!spec.getUserSyncs) {\n    return;\n  }\n  if (adapterUserSyncsDone.indexOf(bidder) != -1) {\n    return;\n  }\n\n  let userSyncs = spec.getUserSyncs({\n    iframeEnabled: true,\n    pixelEnabled: true,\n  }, responses);\n\n  shuffleArray(userSyncs).forEach(({ type, url }) => {\n    if (type == 'iframe') {\n      insertUserSyncIframe(url);\n    }\n    if (type == 'image') {\n      triggerPixel(url);\n    }\n  });\n  adapterUserSyncsDone.push(bidder);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./cedato/cedato-bid.js"],"sourceRoot":""}