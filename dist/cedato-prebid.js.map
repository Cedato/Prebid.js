{"version":3,"sources":["webpack:///webpack/bootstrap c773d09a0a8cd0710ed5","webpack:///./src/utils.js","webpack:///./node_modules/core-js/library/fn/array/includes.js","webpack:///./src/config.js","webpack:///./node_modules/core-js/library/fn/array/find.js","webpack:///./src/constants.json","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./src/hook.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./src/url.js","webpack:///./src/adapters/bidderFactory.js","webpack:///./src/adapterManager.js","webpack:///./src/native.js","webpack:///./src/ajax.js","webpack:///./src/events.js","webpack:///./src/mediaTypes.js","webpack:///./cedato/prebid-cedato.js","webpack:///./modules/appnexusBidAdapter.js","webpack:///./src/Renderer.js","webpack:///./src/adloader.js","webpack:///./node_modules/core-js/library/modules/es7.array.includes.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./src/cpmBucketManager.js","webpack:///./node_modules/core-js/library/modules/es6.array.find.js","webpack:///./node_modules/core-js/library/modules/_array-methods.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./node_modules/core-js/library/modules/_array-species-create.js","webpack:///./node_modules/core-js/library/modules/_array-species-constructor.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/fun-hooks/index.js","webpack:///./node_modules/just-clone/index.js","webpack:///./src/adapter.js","webpack:///./src/sizeMapping.js","webpack:///./src/adUnits.js","webpack:///./src/refererDetection.js","webpack:///./src/bidfactory.js","webpack:///./src/userSync.js","webpack:///./src/video.js"],"names":["CONSTANTS","require","_loggingChecked","tArr","tStr","tFn","tNumb","tObject","tBoolean","toString","Object","prototype","consoleExists","Boolean","window","console","consoleLogExists","log","consoleInfoExists","info","consoleWarnExists","warn","consoleErrorExists","error","internal","checkCookieSupport","createTrackPixelIframeHtml","getWindowSelf","getWindowTop","getAncestorOrigins","getTopFrameReferrer","getWindowLocation","getTopWindowLocation","insertUserSyncIframe","insertElement","isFn","triggerPixel","logError","logWarn","logMessage","logInfo","uniqueRef","bind","a","b","Function","self","args","Array","slice","call","arguments","apply","concat","replaceTokenInString","str","map","token","_each","value","key","undefined","keyString","toUpperCase","re","RegExp","replace","getIncrementalInteger","count","getUniqueIdentifierStr","Math","random","substr","generateUUID","placeholder","_getRandomData","crypto","getRandomValues","Uint8Array","getBidIdParameter","paramsObj","tryAppendQueryString","existingUrl","encodeURIComponent","parseQueryStringParameters","queryObj","result","k","hasOwnProperty","transformAdServerTargetingObj","targeting","getOwnPropertyNames","length","getKeys","getValue","join","getAdUnitSizes","adUnit","sizes","mediaTypes","banner","isArray","bannerSizes","push","parseSizesInput","sizeObj","parsedSizes","split","sizeRegex","curSizePos","hasOwn","match","sizeArrayLength","parseGPTSingleSizeArray","i","singleSize","isNaN","inIframe","loc","e","parse","top","location","referrerLoc","currentWindow","parent","document","referrer","ancestorOrigins","getTopWindowUrl","href","getTopWindowReferrer","debugTurnedOn","decorateLog","prefix","unshift","hasConsoleLogger","config","getConfig","debug","getParameterByName","DEBUG_MODE","setConfig","createInvisibleIframe","f","createElement","id","height","width","border","hspace","vspace","marginWidth","marginHeight","style","scrolling","frameBorder","src","display","name","regexS","regex","results","exec","search","decodeURIComponent","hasValidBidRequest","paramObj","requiredParamsArr","adapter","found","findParam","addEventHandler","element","event","func","addEventListener","attachEvent","isA","object","_t","isStr","isNumber","isPlainObject","isBoolean","isEmpty","isEmptyStr","fn","forEach","l","contains","obj","indexOf","_map","callback","output","objectToCheck","propertyToCheckFor","constructor","elm","doc","target","asLastChildChild","parentEl","getElementsByTagName","insertBeforeEl","firstChild","insertBefore","url","done","img","Image","callBurl","source","burl","S2S","SRC","insertHtmlIntoIframe","htmlCode","iframe","allowtransparency","contentWindow","open","write","close","iframeHtml","div","innerHTML","createTrackPixelHtml","escapedUrl","encodeURI","encodeUri","sandbox","getIframeDocument","contentDocument","getValueString","param","val","defaultValue","uniques","index","arry","flatten","getBidRequest","bidderRequests","bidRequest","some","bidderRequest","find","bids","bid","type","keys","getKeyByValue","prop","getBidderCodes","adUnits","unit","bidder","reduce","filter","isGptPubadsDefined","googletag","pubads","getSlots","getHighestCpm","getHighestCpmCallback","previous","current","getOldestHighestCpmBid","getLatestHighestCpmBid","useTieBreakerProperty","tieBreakerCallback","cpm","shuffle","array","counter","floor","temp","adUnitsFilter","includes","adUnitCode","isSrcdocSupported","defaultView","frameElement","test","navigator","userAgent","deepClone","clone","isSafariBrowser","replaceAuctionPrice","timestamp","Date","getTime","cookieEnabled","cookie","cookiesAreEnabled","getCookie","m","delayExecution","numRequiredCalls","Error","numCalls","groupBy","xs","rv","x","deepAccess","path","String","createContentToExecuteExtScriptInFriendlyFrame","getDefinedParams","params","isValidMediaTypes","SUPPORTED_MEDIA_TYPES","SUPPORTED_STREAM_TYPES","types","every","video","context","getBidderRequest","bidRequests","request","start","auctionId","getUserConfiguredParams","code","bidderData","getOrigin","origin","protocol","hostname","port","getDNT","doNotTrack","msDoNotTrack","compareCodeAndSlot","slot","getAdUnitPath","getSlotElementId","isAdUnitCodeMatchingSlot","isSlotMatchingAdUnitCode","unsupportedBidderMessage","mediaType","deletePropertyFromObject","removeRequestId","isInteger","Number","isFinite","convertCamelToUnderscore","y","toLowerCase","transformBidderParamKeywords","keywords","paramName","arrs","v","values","tryConvertType","typeToConvert","convertTypes","setDataInLocalStorage","hasLocalStorage","localStorage","setItem","getDataFromLocalStorage","getItem","isArrayOfNums","size","fill","newArray","valueToPush","chunk","ceil","end","getMinValueFromArray","min","getMaxValueFromArray","max","utils","DEFAULT_DEBUG","DEFAULT_BIDDER_TIMEOUT","DEFAULT_PUBLISHER_DOMAIN","DEFAULT_ENABLE_SEND_ALL_BIDS","DEFAULT_DISABLE_AJAX_TIMEOUT","DEFAULT_BID_CACHE","DEFAULT_TIMEOUTBUFFER","RANDOM","FIXED","VALID_ORDERS","DEFAULT_BIDDER_SEQUENCE","GRANULARITY_OPTIONS","LOW","MEDIUM","HIGH","AUTO","DENSE","CUSTOM","ALL_TOPICS","newConfig","listeners","defaults","resetConfig","_debug","_bidderTimeout","bidderTimeout","_publisherDomain","publisherDomain","_priceGranularity","priceGranularity","validatePriceGranularity","hasGranularity","_customPriceBucket","customPriceBucket","_mediaTypePriceGranularity","mediaTypePriceGranularity","aggregate","item","_sendAllBids","enableSendAllBids","_useBidCache","useBidCache","_bidderSequence","bidderSequence","_timeoutBuffer","timeoutBuffer","_disableAjaxTimeout","disableAjaxTimeout","callSubscribers","memo","topic","option","isValidPriceConfig","subscribe","hook","options","topics","topicalConfig","setDefaults","listener","unsubscribe","splice","TOPICS","funHooks","ready","SYNC","ASYNC","QUEUE","getHook","get","setupBeforeHookFnOnce","baseFn","hookFn","priority","getHooks","before","parseQS","query","acc","criteria","formatQS","parsed","noDecodeWholeURL","qsAsString","decodeSearchAsString","pathname","hash","host","format","COMMON_BID_RESPONSE_KEYS","DEFAULT_REFRESHIN_DAYS","registerBidder","spec","supportedMediaTypes","putBidder","newBidder","adapterManager","registerBidAdapter","aliases","alias","aliasRegistry","Adapter","getSpec","freeze","registerSyncs","callBids","addBidResponse","ajax","adUnitCodesHandled","addBidWithCode","isValid","responses","afterAllResponses","events","emit","EVENTS","BIDDER_DONE","gdprConsent","validBidRequests","filterAndWarn","bidRequestMap","bidId","placementCode","requests","buildRequests","onResponse","processRequest","formatGetParameters","data","method","success","onSuccess","onFailure","withCredentials","JSON","stringify","contentType","response","responseObj","body","headers","headerParser","interpretResponse","err","addBidUsingRequestMap","requestId","prebidBid","createBid","STATUS","GOOD","xmlHttpResponse","getResponseHeader","getUserSyncs","filterConfig","syncs","iframeEnabled","all","pixelEnabled","image","sync","userSync","registerSync","isBidRequestValid","preloadBidderMappingFile","adPodBidders","ADPOD","bidderSpec","getBidAdapter","getMappingFileInfo","refreshInDays","localStorageKey","mappingData","lastUpdated","mapping","getIabSubCategory","bidderCode","category","getBidderCode","validBidSize","hasValidKeys","bidKeys","errorMessage","msg","nativeBidIsValid","isValidVideoBid","s2sTestingModule","_bidderRegistry","bidderRegistry","_aliasRegistry","_s2sConfig","s2sConfig","_analyticsRegistry","getBids","bidderRequestId","labels","resolveStatus","getLabels","active","filteredMediaTypes","filterResults","after","nativeParams","processNativeAdUnitParams","transactionId","bid_id","bidRequestsCount","adunitCounter","getCounter","getAdUnitCopyForPrebidServer","adaptersServerSide","bidders","adUnitsCopy","doingS2STesting","finalSource","CLIENT","getAdUnitCopyForClientAdapters","adUnitsClientCopy","SERVER","gdprDataHandler","consentData","setConsentData","consentInfo","getConsentData","makeBidRequests","auctionStart","cbTimeout","bidderCodes","refererInfo","getRefererInfo","clientBidderCodes","clientTestAdapters","enabled","getSourceBidderMap","adUnitsS2SCopy","tid","timeout","adUnitCopy","validBids","adUnitBid","reqBid","doneCb","requestCallbacks","requestBidsTimeout","partitions","clientBidRequests","serverBidRequests","s2sAjax","ajaxBuilder","s2sAdapter","s2sBidRequest","ad_units","doneCbs","allBidders","adapters","BID_REQUESTED","testing","getSupportedMediaTypes","videoAdapters","nativeAdapters","bidAdaptor","aliasBidAdapter","existingAlias","s2sBidders","newAdapter","setBidderCode","registerAnalyticsAdapter","enableAnalytics","adapterConfig","provider","setS2STestingModule","module","tryCallBidderMethod","callTimedOutBidders","timedOutBidders","timedOutBidder","callBidWonBidder","callSetTargetingBidder","NATIVE_TARGETING_KEYS","NATIVE_KEYS","IMAGE","required","title","sponsoredBy","clickUrl","icon","SUPPORTED_TYPES","typeIsSupported","nativeAdUnit","nativeBidder","hasNonNativeBidder","requestedAssets","requiredAssets","returnedAssets","asset","fireNativeTrackers","message","adObject","trackers","action","clickTrackers","impressionTrackers","javascriptTrackers","getNativeTargeting","bidReq","keyValues","sendPlaceholder","adId","getAssetMessage","assets","native","XHR_DONE","parser","callbacks","XMLHttpRequest","onreadystatechange","readyState","status","responseText","statusText","ontimeout","urlInfo","parseURL","formatURL","customHeaders","header","setRequestHeader","preflight","send","allEvents","idPaths","EVENT_ID_PATHS","eventsFired","exports","_handlers","_public","_dispatch","eventString","eventPayload","idPath","que","eventKeys","eventType","_checkAvailableEvent","on","handler","off","_handler","getEvents","arrayCopy","newProp","NATIVE","VIDEO","BANNER","requestBid","videoAdUnit","getBidRequests","then","fetch","text","BIDDER_CODE","URL","VIDEO_TARGETING","USER_PARAMS","APP_DEVICE_PARAMS","DEBUG_PARAMS","NATIVE_MAPPING","body2","cta","serverName","requiredParams","minimumParams","privacyLink","salePrice","displayUrl","SOURCE","MAX_IMPS_PER_REQUEST","mappingFileUrl","placementId","member","invCode","tags","bidToTag","userObjBid","hasUserInfo","userObj","user","appDeviceObjBid","hasAppDeviceInfo","appDeviceObj","app","appIdObjBid","hasAppId","appIdObj","appid","debugObj","debugObjParams","debugCookieName","debugCookie","debugBidRequest","hasDebug","memberIdBid","hasMemberId","parseInt","payload","sdk","version","member_id","device","brand_category_uniqueness","gdpr_consent","consent_string","consentString","consent_required","gdprApplies","refererinfo","rd_ref","referer","rd_top","reachedTop","rd_ifs","numIframes","rd_stk","stack","referrer_detection","hasAdPodBid","hasAdPod","adPodBid","adPodTags","createAdPodRequest","nonPodTags","tag","uuid","formatRequest","serverResponse","serverBid","rtbBid","getRtbBid","ad_type","newBid","parseMediaType","debug_info","debugHeader","debugText","syncOptions","transformBidParams","isOpenRtb","use_pmt_rule","usePaymentRule","isPopulatedArray","deleteValues","paramKey","convertedKey","arr","keyPairObj","clonedPayload","payloadString","newRenderer","rendererOptions","renderer","Renderer","install","renderer_id","renderer_url","loaded","setRender","outstreamRender","setEventHandlers","impression","ended","querySelector","creativeId","creative_id","dealId","deal_id","currency","netRevenue","ttl","appnexus","buyerMemberId","buyer_member_id","dealPriority","deal_priority","dealCode","deal_code","rtb","player_width","player_height","vastUrl","asset_url","vastImpUrl","notify_url","videoContext","iabSubCatId","brand_category_id","meta","durationSeconds","duration_ms","adResponse","ad","ads","nativeAd","desc","desc2","ctatext","rating","sponsored","privacy_link","address","downloads","likes","phone","price","saleprice","link","displayurl","click_trackers","impression_trackers","javascript_trackers","main_img","content","impression_urls","tracker","transformSizes","primary_size","ad_types","allow_smaller_sizes","allowSmallerSizes","prebid","disable_psa","reserve","position","trafficSourceCode","traffic_source_code","privateSizes","private_sizes","supplyType","supply_type","pubClick","pubclick","extInvCode","ext_inv_code","externalImpId","external_imp_id","nativeRequest","buildNativeRequest","layouts","videoMediaType","require_asset_url","requestSizes","durationRangeSec","requireExactDuration","numberOfPlacements","getAdPodPlacementNumber","maxDuration","tagToDuplicate","divider","chunked","duration","setVideoProperty","videoParams","adPodDurationSec","minAllowedDuration","requestKey","adunitKeys","requiredKeys","remaining","ANOutstreamVideo","renderAd","tagId","tag_id","getSize","targetId","handleOutstreamRendererEvents","eventName","handleVideoEvent","adType","handlers","cmd","process","isRendererDefinedOnAdUnit","loadScript","render","shift","isRendererRequired","executeRenderer","_requestCache","_vendorWhitelist","loadExternalScript","moduleCode","script","async","tagSrc","cacheRequest","requestResource","jptScript","onload","elToAppend","_defaultPrecision","_lgPriceConfig","_mgPriceConfig","_hgPriceConfig","_densePriceConfig","_autoPriceConfig","getPriceBucketString","customConfig","granularityMultiplier","cpmFloat","parseFloat","low","getCpmStringValue","med","high","auto","dense","custom","cpmStr","cap","buckets","prev","curr","bucket","precision","toFixed","getCpmTarget","increment","bucketMin","pow","cpmToFloor","cpmTarget","sizeConfig","setSizeConfig","bidOrAdUnit","activeLabels","labelAll","labelAny","sizeSupported","configs","maps","evaluateSizeConfig","shouldFilter","sizesSupported","oldSizes","allMediaTypes","label","mediaQuery","matchMedia","matches","thing","incrementCounter","adunit","detectReferer","win","getLevels","levels","walkUpWindows","ancestors","ancestor","getPubUrlStack","defUrl","frameLocation","prevFrame","prevRef","detectedRefererUrl","getCanonicalUrl","isTop","refData","canonicalUrl","stackInfo","Bid","statusCode","_bidSrc","_statusCode","statusMessage","_getStatus","getStatusCode","syncEnabled","syncsPerBidder","syncDelay","newUserSync","userSyncDependencies","publicApi","queue","getDefaultQueue","hasFired","numAdapterBids","permittedPixels","usConfig","conf","fireSyncs","browserSupportsCookies","enableOverride","fireImagePixels","loadIframes","bidderName","trackingPixelUrl","iframeUrl","incrementAdapterBids","filterSettings","shouldBidderBeBlocked","enabledBidders","isFilterConfigValid","activeConfig","biddersToFilter","filterType","checkForFiltering","activeConfigName","filterField","biddersField","bidderInList","syncUsers","setTimeout","triggerUserSyncs","VIDEO_MEDIA_TYPE","OUTSTREAM","videoBidder","hasNonVideoBidder","checkVideoBidSetup","vastXml"],"mappings":"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AAElD;AACA,qEAAqE;AACrE,CAAC;AACD;AACA,QAAQ,mBAAO,CAAC,EAAY;AAC5B;AACA,CAAC;;;;;;;ACXD;;;;;;;ACAA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,CAAC;;AAED,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB;;AAEpB;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,aAAa,yBAAyB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,+BAA+B;AAC/B,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,IAAI;AAC1E;AACA;AACA;AACA;AACA;AACA,oCAAoC,mBAAmB,kBAAkB;AACzE;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB,KAAK;AAC5C;AACA;AACA;AACA,mBAAmB;AACnB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,aAAa;AACtD;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC1YA;;AAEA;AACA,oCAAoC;;AAEpC;AACA,gBAAgB;AAChB,aAAa;AACb;AACA;AACA;AACA,MAAM,KAAK,iCAAiC,O;AAC5C,WAAW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","file":"cedato-prebid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 26);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c773d09a0a8cd0710ed5","import { config } from './config';\nimport clone from 'just-clone';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\nimport { parse } from './url';\nconst CONSTANTS = require('./constants');\n\nvar _loggingChecked = false;\n\nvar tArr = 'Array';\nvar tStr = 'String';\nvar tFn = 'Function';\nvar tNumb = 'Number';\nvar tObject = 'Object';\nvar tBoolean = 'Boolean';\nvar toString = Object.prototype.toString;\nlet consoleExists = Boolean(window.console);\nlet consoleLogExists = Boolean(consoleExists && window.console.log);\nlet consoleInfoExists = Boolean(consoleExists && window.console.info);\nlet consoleWarnExists = Boolean(consoleExists && window.console.warn);\nlet consoleErrorExists = Boolean(consoleExists && window.console.error);\n\n// this allows stubbing of utility functions that are used internally by other utility functions\nexport const internal = {\n  checkCookieSupport,\n  createTrackPixelIframeHtml,\n  getWindowSelf,\n  getWindowTop,\n  getAncestorOrigins,\n  getTopFrameReferrer,\n  getWindowLocation,\n  getTopWindowLocation,\n  insertUserSyncIframe,\n  insertElement,\n  isFn,\n  triggerPixel,\n  logError,\n  logWarn,\n  logMessage,\n  logInfo\n};\n\nvar uniqueRef = {};\nexport let bind = function(a, b) { return b; }.bind(null, 1, uniqueRef)() === uniqueRef\n  ? Function.prototype.bind\n  : function(bind) {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function() {\n      return self.apply(bind, args.concat(Array.prototype.slice.call(arguments)));\n    };\n  };\n\n/*\n *   Substitutes into a string from a given map using the token\n *   Usage\n *   var str = 'text %%REPLACE%% this text with %%SOMETHING%%';\n *   var map = {};\n *   map['replace'] = 'it was subbed';\n *   map['something'] = 'something else';\n *   console.log(replaceTokenInString(str, map, '%%')); => \"text it was subbed this text with something else\"\n */\nexport function replaceTokenInString(str, map, token) {\n  _each(map, function (value, key) {\n    value = (value === undefined) ? '' : value;\n\n    var keyString = token + key.toUpperCase() + token;\n    var re = new RegExp(keyString, 'g');\n\n    str = str.replace(re, value);\n  });\n\n  return str;\n}\n\n/* utility method to get incremental integer starting from 1 */\nvar getIncrementalInteger = (function () {\n  var count = 0;\n  return function () {\n    count++;\n    return count;\n  };\n})();\n\n// generate a random string (to be used as a dynamic JSONP callback)\nexport function getUniqueIdentifierStr() {\n  return getIncrementalInteger() + Math.random().toString(16).substr(2);\n}\n\n/**\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f,\n * and y is replaced with a random hexadecimal digit from 8 to b.\n * https://gist.github.com/jed/982883 via node-uuid\n */\nexport function generateUUID(placeholder) {\n  return placeholder\n    ? (placeholder ^ _getRandomData() >> placeholder / 4).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, generateUUID);\n}\n\n/**\n * Returns random data using the Crypto API if available and Math.random if not\n * Method is from https://gist.github.com/jed/982883 like generateUUID, direct link https://gist.github.com/jed/982883#gistcomment-45104\n */\nfunction _getRandomData() {\n  if (window && window.crypto && window.crypto.getRandomValues) {\n    return crypto.getRandomValues(new Uint8Array(1))[0] % 16;\n  } else {\n    return Math.random() * 16;\n  }\n}\n\nexport function getBidIdParameter(key, paramsObj) {\n  if (paramsObj && paramsObj[key]) {\n    return paramsObj[key];\n  }\n\n  return '';\n}\n\nexport function tryAppendQueryString(existingUrl, key, value) {\n  if (value) {\n    return existingUrl += key + '=' + encodeURIComponent(value) + '&';\n  }\n\n  return existingUrl;\n}\n\n// parse a query string object passed in bid params\n// bid params should be an object such as {key: \"value\", key1 : \"value1\"}\nexport function parseQueryStringParameters(queryObj) {\n  let result = '';\n  for (var k in queryObj) {\n    if (queryObj.hasOwnProperty(k)) { result += k + '=' + encodeURIComponent(queryObj[k]) + '&'; }\n  }\n\n  return result;\n}\n\n// transform an AdServer targeting bids into a query string to send to the adserver\nexport function transformAdServerTargetingObj(targeting) {\n  // we expect to receive targeting for a single slot at a time\n  if (targeting && Object.getOwnPropertyNames(targeting).length > 0) {\n    return getKeys(targeting)\n      .map(key => `${key}=${encodeURIComponent(getValue(targeting, key))}`).join('&');\n  } else {\n    return '';\n  }\n}\n\n/**\n * Read an adUnit object and return the sizes used in an [[728, 90]] format (even if they had [728, 90] defined)\n * Preference is given to the `adUnit.mediaTypes.banner.sizes` object over the `adUnit.sizes`\n * @param {object} adUnit one adUnit object from the normal list of adUnits\n * @returns {Array.<number[]>} array of arrays containing numeric sizes\n */\nexport function getAdUnitSizes(adUnit) {\n  if (!adUnit) {\n    return;\n  }\n\n  let sizes = [];\n  if (adUnit.mediaTypes && adUnit.mediaTypes.banner && Array.isArray(adUnit.mediaTypes.banner.sizes)) {\n    let bannerSizes = adUnit.mediaTypes.banner.sizes;\n    if (Array.isArray(bannerSizes[0])) {\n      sizes = bannerSizes;\n    } else {\n      sizes.push(bannerSizes);\n    }\n  } else if (Array.isArray(adUnit.sizes)) {\n    if (Array.isArray(adUnit.sizes[0])) {\n      sizes = adUnit.sizes;\n    } else {\n      sizes.push(adUnit.sizes);\n    }\n  }\n  return sizes;\n}\n\n/**\n * Parse a GPT-Style general size Array like `[[300, 250]]` or `\"300x250,970x90\"` into an array of sizes `[\"300x250\"]` or '['300x250', '970x90']'\n * @param  {(Array.<number[]>|Array.<number>)} sizeObj Input array or double array [300,250] or [[300,250], [728,90]]\n * @return {Array.<string>}  Array of strings like `[\"300x250\"]` or `[\"300x250\", \"728x90\"]`\n */\nexport function parseSizesInput(sizeObj) {\n  var parsedSizes = [];\n\n  // if a string for now we can assume it is a single size, like \"300x250\"\n  if (typeof sizeObj === 'string') {\n    // multiple sizes will be comma-separated\n    var sizes = sizeObj.split(',');\n\n    // regular expression to match strigns like 300x250\n    // start of line, at least 1 number, an \"x\" , then at least 1 number, and the then end of the line\n    var sizeRegex = /^(\\d)+x(\\d)+$/i;\n    if (sizes) {\n      for (var curSizePos in sizes) {\n        if (hasOwn(sizes, curSizePos) && sizes[curSizePos].match(sizeRegex)) {\n          parsedSizes.push(sizes[curSizePos]);\n        }\n      }\n    }\n  } else if (typeof sizeObj === 'object') {\n    var sizeArrayLength = sizeObj.length;\n\n    // don't process empty array\n    if (sizeArrayLength > 0) {\n      // if we are a 2 item array of 2 numbers, we must be a SingleSize array\n      if (sizeArrayLength === 2 && typeof sizeObj[0] === 'number' && typeof sizeObj[1] === 'number') {\n        parsedSizes.push(parseGPTSingleSizeArray(sizeObj));\n      } else {\n        // otherwise, we must be a MultiSize array\n        for (var i = 0; i < sizeArrayLength; i++) {\n          parsedSizes.push(parseGPTSingleSizeArray(sizeObj[i]));\n        }\n      }\n    }\n  }\n\n  return parsedSizes;\n}\n\n// parse a GPT style sigle size array, (i.e [300,250])\n// into an AppNexus style string, (i.e. 300x250)\nexport function parseGPTSingleSizeArray(singleSize) {\n  // if we aren't exactly 2 items in this array, it is invalid\n  if (isArray(singleSize) && singleSize.length === 2 && (!isNaN(singleSize[0]) && !isNaN(singleSize[1]))) {\n    return singleSize[0] + 'x' + singleSize[1];\n  }\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopWindowLocation() {\n  if (inIframe()) {\n    let loc;\n    try {\n      loc = internal.getAncestorOrigins() || internal.getTopFrameReferrer();\n    } catch (e) {\n      logInfo('could not obtain top window location', e);\n    }\n    if (loc) return parse(loc, {'decodeSearchAsString': true});\n  }\n  return internal.getWindowLocation();\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopFrameReferrer() {\n  try {\n    // force an exception in x-domain environments. #1509\n    window.top.location.toString();\n    let referrerLoc = '';\n    let currentWindow;\n    do {\n      currentWindow = currentWindow ? currentWindow.parent : window;\n      if (currentWindow.document && currentWindow.document.referrer) {\n        referrerLoc = currentWindow.document.referrer;\n      }\n    }\n    while (currentWindow !== window.top);\n    return referrerLoc;\n  } catch (e) {\n    return window.document.referrer;\n  }\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getAncestorOrigins() {\n  if (window.document.location && window.document.location.ancestorOrigins &&\n    window.document.location.ancestorOrigins.length >= 1) {\n    return window.document.location.ancestorOrigins[window.document.location.ancestorOrigins.length - 1];\n  }\n}\n\nexport function getWindowTop() {\n  return window.top;\n}\n\nexport function getWindowSelf() {\n  return window.self;\n}\n\nexport function getWindowLocation() {\n  return window.location;\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopWindowUrl() {\n  let href;\n  try {\n    href = internal.getTopWindowLocation().href;\n  } catch (e) {\n    href = '';\n  }\n  return href;\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopWindowReferrer() {\n  try {\n    return window.top.document.referrer;\n  } catch (e) {\n    return document.referrer;\n  }\n}\n\n/**\n * Wrappers to console.(log | info | warn | error). Takes N arguments, the same as the native methods\n */\nexport function logMessage() {\n  if (debugTurnedOn() && consoleLogExists) {\n    console.log.apply(console, decorateLog(arguments, 'MESSAGE:'));\n  }\n}\n\nexport function logInfo() {\n  if (debugTurnedOn() && consoleInfoExists) {\n    console.info.apply(console, decorateLog(arguments, 'INFO:'));\n  }\n}\n\nexport function logWarn() {\n  if (debugTurnedOn() && consoleWarnExists) {\n    console.warn.apply(console, decorateLog(arguments, 'WARNING:'));\n  }\n}\n\nexport function logError() {\n  if (debugTurnedOn() && consoleErrorExists) {\n    console.error.apply(console, decorateLog(arguments, 'ERROR:'));\n  }\n}\n\nfunction decorateLog(args, prefix) {\n  args = [].slice.call(args);\n  prefix && args.unshift(prefix);\n  args.unshift('display: inline-block; color: #fff; background: #3b88c3; padding: 1px 4px; border-radius: 3px;');\n  args.unshift('%cPrebid');\n  return args;\n}\n\nexport function hasConsoleLogger() {\n  return consoleLogExists;\n}\n\nexport function debugTurnedOn() {\n  if (config.getConfig('debug') === false && _loggingChecked === false) {\n    const debug = getParameterByName(CONSTANTS.DEBUG_MODE).toUpperCase() === 'TRUE';\n    config.setConfig({ debug });\n    _loggingChecked = true;\n  }\n\n  return !!config.getConfig('debug');\n}\n\nexport function createInvisibleIframe() {\n  var f = document.createElement('iframe');\n  f.id = getUniqueIdentifierStr();\n  f.height = 0;\n  f.width = 0;\n  f.border = '0px';\n  f.hspace = '0';\n  f.vspace = '0';\n  f.marginWidth = '0';\n  f.marginHeight = '0';\n  f.style.border = '0';\n  f.scrolling = 'no';\n  f.frameBorder = '0';\n  f.src = 'about:blank';\n  f.style.display = 'none';\n  return f;\n}\n\n/*\n *   Check if a given parameter name exists in query string\n *   and if it does return the value\n */\nexport function getParameterByName(name) {\n  var regexS = '[\\\\?&]' + name + '=([^&#]*)';\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return '';\n  }\n\n  return decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\n/**\n * This function validates paramaters.\n * @param  {Object} paramObj          [description]\n * @param  {string[]} requiredParamsArr [description]\n * @return {boolean}                   Bool if paramaters are valid\n */\nexport function hasValidBidRequest(paramObj, requiredParamsArr, adapter) {\n  var found = false;\n\n  function findParam(value, key) {\n    if (key === requiredParamsArr[i]) {\n      found = true;\n    }\n  }\n\n  for (var i = 0; i < requiredParamsArr.length; i++) {\n    found = false;\n\n    _each(paramObj, findParam);\n\n    if (!found) {\n      logError('Params are missing for bid request. One of these required paramaters are missing: ' + requiredParamsArr, adapter);\n      return false;\n    }\n  }\n\n  return true;\n}\n\n// Handle addEventListener gracefully in older browsers\nexport function addEventHandler(element, event, func) {\n  if (element.addEventListener) {\n    element.addEventListener(event, func, true);\n  } else if (element.attachEvent) {\n    element.attachEvent('on' + event, func);\n  }\n}\n/**\n * Return if the object is of the\n * given type.\n * @param {*} object to test\n * @param {String} _t type string (e.g., Array)\n * @return {Boolean} if object is of type _t\n */\nexport function isA(object, _t) {\n  return toString.call(object) === '[object ' + _t + ']';\n}\n\nexport function isFn(object) {\n  return isA(object, tFn);\n}\n\nexport function isStr(object) {\n  return isA(object, tStr);\n}\n\nexport function isArray(object) {\n  return isA(object, tArr);\n}\n\nexport function isNumber(object) {\n  return isA(object, tNumb);\n}\n\nexport function isPlainObject(object) {\n  return isA(object, tObject);\n}\n\nexport function isBoolean(object) {\n  return isA(object, tBoolean);\n}\n\n/**\n * Return if the object is \"empty\";\n * this includes falsey, no keys, or no items at indices\n * @param {*} object object to test\n * @return {Boolean} if object is empty\n */\nexport function isEmpty(object) {\n  if (!object) return true;\n  if (isArray(object) || isStr(object)) {\n    return !(object.length > 0);\n  }\n\n  for (var k in object) {\n    if (hasOwnProperty.call(object, k)) return false;\n  }\n\n  return true;\n}\n\n/**\n * Return if string is empty, null, or undefined\n * @param str string to test\n * @returns {boolean} if string is empty\n */\nexport function isEmptyStr(str) {\n  return isStr(str) && (!str || str.length === 0);\n}\n\n/**\n * Iterate object with the function\n * falls back to es5 `forEach`\n * @param {Array|Object} object\n * @param {Function(value, key, object)} fn\n */\nexport function _each(object, fn) {\n  if (isEmpty(object)) return;\n  if (isFn(object.forEach)) return object.forEach(fn, this);\n\n  var k = 0;\n  var l = object.length;\n\n  if (l > 0) {\n    for (; k < l; k++) fn(object[k], k, object);\n  } else {\n    for (k in object) {\n      if (hasOwnProperty.call(object, k)) fn.call(this, object[k], k);\n    }\n  }\n}\n\nexport function contains(a, obj) {\n  if (isEmpty(a)) {\n    return false;\n  }\n\n  if (isFn(a.indexOf)) {\n    return a.indexOf(obj) !== -1;\n  }\n\n  var i = a.length;\n  while (i--) {\n    if (a[i] === obj) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport let indexOf = (function () {\n  if (Array.prototype.indexOf) {\n    return Array.prototype.indexOf;\n  }\n\n  // ie8 no longer supported\n  // return polyfills.indexOf;\n}());\n\n/**\n * Map an array or object into another array\n * given a function\n * @param {Array|Object} object\n * @param {Function(value, key, object)} callback\n * @return {Array}\n */\nexport function _map(object, callback) {\n  if (isEmpty(object)) return [];\n  if (isFn(object.map)) return object.map(callback);\n  var output = [];\n  _each(object, function (value, key) {\n    output.push(callback(value, key, object));\n  });\n\n  return output;\n}\n\nvar hasOwn = function (objectToCheck, propertyToCheckFor) {\n  if (objectToCheck.hasOwnProperty) {\n    return objectToCheck.hasOwnProperty(propertyToCheckFor);\n  } else {\n    return (typeof objectToCheck[propertyToCheckFor] !== 'undefined') && (objectToCheck.constructor.prototype[propertyToCheckFor] !== objectToCheck[propertyToCheckFor]);\n  }\n};\n\n/*\n* Inserts an element(elm) as targets child, by default as first child\n* @param {HTMLElement} elm\n* @param {HTMLElement} [doc]\n* @param {HTMLElement} [target]\n* @param {Boolean} [asLastChildChild]\n* @return {HTMLElement}\n*/\nexport function insertElement(elm, doc, target, asLastChildChild) {\n  doc = doc || document;\n  let parentEl;\n  if (target) {\n    parentEl = doc.getElementsByTagName(target);\n  } else {\n    parentEl = doc.getElementsByTagName('head');\n  }\n  try {\n    parentEl = parentEl.length ? parentEl : doc.getElementsByTagName('body');\n    if (parentEl.length) {\n      parentEl = parentEl[0];\n      let insertBeforeEl = asLastChildChild ? null : parentEl.firstChild;\n      return parentEl.insertBefore(elm, insertBeforeEl);\n    }\n  } catch (e) {}\n}\n\n/**\n * Inserts an image pixel with the specified `url` for cookie sync\n * @param {string} url URL string of the image pixel to load\n * @param  {function} [done] an optional exit callback, used when this usersync pixel is added during an async process\n */\nexport function triggerPixel(url, done) {\n  const img = new Image();\n  if (done && internal.isFn(done)) {\n    img.addEventListener('load', done);\n    img.addEventListener('error', done);\n  }\n  img.src = url;\n}\n\nexport function callBurl({ source, burl }) {\n  if (source === CONSTANTS.S2S.SRC && burl) {\n    internal.triggerPixel(burl);\n  }\n}\n\n/**\n * Inserts an empty iframe with the specified `html`, primarily used for tracking purposes\n * (though could be for other purposes)\n * @param {string} htmlCode snippet of HTML code used for tracking purposes\n */\nexport function insertHtmlIntoIframe(htmlCode) {\n  if (!htmlCode) {\n    return;\n  }\n\n  let iframe = document.createElement('iframe');\n  iframe.id = getUniqueIdentifierStr();\n  iframe.width = 0;\n  iframe.height = 0;\n  iframe.hspace = '0';\n  iframe.vspace = '0';\n  iframe.marginWidth = '0';\n  iframe.marginHeight = '0';\n  iframe.style.display = 'none';\n  iframe.style.height = '0px';\n  iframe.style.width = '0px';\n  iframe.scrolling = 'no';\n  iframe.frameBorder = '0';\n  iframe.allowtransparency = 'true';\n\n  internal.insertElement(iframe, document, 'body');\n\n  iframe.contentWindow.document.open();\n  iframe.contentWindow.document.write(htmlCode);\n  iframe.contentWindow.document.close();\n}\n\n/**\n * Inserts empty iframe with the specified `url` for cookie sync\n * @param  {string} url URL to be requested\n * @param  {string} encodeUri boolean if URL should be encoded before inserted. Defaults to true\n * @param  {function} [done] an optional exit callback, used when this usersync pixel is added during an async process\n */\nexport function insertUserSyncIframe(url, done) {\n  let iframeHtml = internal.createTrackPixelIframeHtml(url, false, 'allow-scripts allow-same-origin');\n  let div = document.createElement('div');\n  div.innerHTML = iframeHtml;\n  let iframe = div.firstChild;\n  if (done && internal.isFn(done)) {\n    iframe.addEventListener('load', done);\n    iframe.addEventListener('error', done);\n  }\n  internal.insertElement(iframe, document, 'html', true);\n};\n\n/**\n * Creates a snippet of HTML that retrieves the specified `url`\n * @param  {string} url URL to be requested\n * @return {string}     HTML snippet that contains the img src = set to `url`\n */\nexport function createTrackPixelHtml(url) {\n  if (!url) {\n    return '';\n  }\n\n  let escapedUrl = encodeURI(url);\n  let img = '<div style=\"position:absolute;left:0px;top:0px;visibility:hidden;\">';\n  img += '<img src=\"' + escapedUrl + '\"></div>';\n  return img;\n};\n\n/**\n * Creates a snippet of Iframe HTML that retrieves the specified `url`\n * @param  {string} url plain URL to be requested\n * @param  {string} encodeUri boolean if URL should be encoded before inserted. Defaults to true\n * @param  {string} sandbox string if provided the sandbox attribute will be included with the given value\n * @return {string}     HTML snippet that contains the iframe src = set to `url`\n */\nexport function createTrackPixelIframeHtml(url, encodeUri = true, sandbox = '') {\n  if (!url) {\n    return '';\n  }\n  if (encodeUri) {\n    url = encodeURI(url);\n  }\n  if (sandbox) {\n    sandbox = `sandbox=\"${sandbox}\"`;\n  }\n\n  return `<iframe ${sandbox} id=\"${getUniqueIdentifierStr()}\"\n      frameborder=\"0\"\n      allowtransparency=\"true\"\n      marginheight=\"0\" marginwidth=\"0\"\n      width=\"0\" hspace=\"0\" vspace=\"0\" height=\"0\"\n      style=\"height:0px;width:0px;display:none;\"\n      scrolling=\"no\"\n      src=\"${url}\">\n    </iframe>`;\n}\n\n/**\n * Returns iframe document in a browser agnostic way\n * @param  {Object} iframe reference\n * @return {Object}        iframe `document` reference\n */\nexport function getIframeDocument(iframe) {\n  if (!iframe) {\n    return;\n  }\n\n  let doc;\n  try {\n    if (iframe.contentWindow) {\n      doc = iframe.contentWindow.document;\n    } else if (iframe.contentDocument.document) {\n      doc = iframe.contentDocument.document;\n    } else {\n      doc = iframe.contentDocument;\n    }\n  } catch (e) {\n    internal.logError('Cannot get iframe document', e);\n  }\n\n  return doc;\n}\n\nexport function getValueString(param, val, defaultValue) {\n  if (val === undefined || val === null) {\n    return defaultValue;\n  }\n  if (isStr(val)) {\n    return val;\n  }\n  if (isNumber(val)) {\n    return val.toString();\n  }\n  internal.logWarn('Unsuported type for param: ' + param + ' required type: String');\n}\n\nexport function uniques(value, index, arry) {\n  return arry.indexOf(value) === index;\n}\n\nexport function flatten(a, b) {\n  return a.concat(b);\n}\n\nexport function getBidRequest(id, bidderRequests) {\n  if (!id) {\n    return;\n  }\n  let bidRequest;\n  bidderRequests.some(bidderRequest => {\n    let result = find(bidderRequest.bids, bid => ['bidId', 'adId', 'bid_id'].some(type => bid[type] === id));\n    if (result) {\n      bidRequest = result;\n    }\n    return result;\n  });\n  return bidRequest;\n}\n\nexport function getKeys(obj) {\n  return Object.keys(obj);\n}\n\nexport function getValue(obj, key) {\n  return obj[key];\n}\n\n/**\n * Get the key of an object for a given value\n */\nexport function getKeyByValue(obj, value) {\n  for (let prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      if (obj[prop] === value) {\n        return prop;\n      }\n    }\n  }\n}\n\nexport function getBidderCodes(adUnits = $$PREBID_GLOBAL$$.adUnits) {\n  // this could memoize adUnits\n  return adUnits.map(unit => unit.bids.map(bid => bid.bidder)\n    .reduce(flatten, [])).reduce(flatten).filter(uniques);\n}\n\nexport function isGptPubadsDefined() {\n  if (window.googletag && isFn(window.googletag.pubads) && isFn(window.googletag.pubads().getSlots)) {\n    return true;\n  }\n}\n\n// This function will get highest cpm value bid, in case of tie it will return the bid with lowest timeToRespond\nexport const getHighestCpm = getHighestCpmCallback('timeToRespond', (previous, current) => previous > current);\n\n// This function will get the oldest hightest cpm value bid, in case of tie it will return the bid which came in first\n// Use case for tie: https://github.com/prebid/Prebid.js/issues/2448\nexport const getOldestHighestCpmBid = getHighestCpmCallback('responseTimestamp', (previous, current) => previous > current);\n\n// This function will get the latest hightest cpm value bid, in case of tie it will return the bid which came in last\n// Use case for tie: https://github.com/prebid/Prebid.js/issues/2539\nexport const getLatestHighestCpmBid = getHighestCpmCallback('responseTimestamp', (previous, current) => previous < current);\n\nfunction getHighestCpmCallback(useTieBreakerProperty, tieBreakerCallback) {\n  return (previous, current) => {\n    if (previous.cpm === current.cpm) {\n      return tieBreakerCallback(previous[useTieBreakerProperty], current[useTieBreakerProperty]) ? current : previous;\n    }\n    return previous.cpm < current.cpm ? current : previous;\n  }\n}\n\n/**\n * FisherYates shuffle\n * http://stackoverflow.com/a/6274398\n * https://bost.ocks.org/mike/shuffle/\n * istanbul ignore next\n */\nexport function shuffle(array) {\n  let counter = array.length;\n\n  // while there are elements in the array\n  while (counter > 0) {\n    // pick a random index\n    let index = Math.floor(Math.random() * counter);\n\n    // decrease counter by 1\n    counter--;\n\n    // and swap the last element with it\n    let temp = array[counter];\n    array[counter] = array[index];\n    array[index] = temp;\n  }\n\n  return array;\n}\n\nexport function adUnitsFilter(filter, bid) {\n  return includes(filter, bid && bid.adUnitCode);\n}\n\n/**\n * Check if parent iframe of passed document supports content rendering via 'srcdoc' property\n * @param {HTMLDocument} doc document to check support of 'srcdoc'\n */\nexport function isSrcdocSupported(doc) {\n  // Firefox is excluded due to https://bugzilla.mozilla.org/show_bug.cgi?id=1265961\n  return doc.defaultView && doc.defaultView.frameElement &&\n    'srcdoc' in doc.defaultView.frameElement && !/firefox/i.test(navigator.userAgent);\n}\n\nexport function deepClone(obj) {\n  return clone(obj);\n}\n\nexport function inIframe() {\n  try {\n    return internal.getWindowSelf() !== internal.getWindowTop();\n  } catch (e) {\n    return true;\n  }\n}\n\nexport function isSafariBrowser() {\n  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n}\n\nexport function replaceAuctionPrice(str, cpm) {\n  if (!str) return;\n  return str.replace(/\\$\\{AUCTION_PRICE\\}/g, cpm);\n}\n\nexport function timestamp() {\n  return new Date().getTime();\n}\n\nexport function checkCookieSupport() {\n  if (window.navigator.cookieEnabled || !!document.cookie.length) {\n    return true;\n  }\n}\nexport function cookiesAreEnabled() {\n  if (internal.checkCookieSupport()) {\n    return true;\n  }\n  window.document.cookie = 'prebid.cookieTest';\n  return window.document.cookie.indexOf('prebid.cookieTest') != -1;\n}\n\nexport function getCookie(name) {\n  let m = window.document.cookie.match('(^|;)\\\\s*' + name + '\\\\s*=\\\\s*([^;]*)\\\\s*(;|$)');\n  return m ? decodeURIComponent(m[2]) : null;\n}\n\n/**\n * Given a function, return a function which only executes the original after\n * it's been called numRequiredCalls times.\n *\n * Note that the arguments from the previous calls will *not* be forwarded to the original function.\n * Only the final call's arguments matter.\n *\n * @param {function} func The function which should be executed, once the returned function has been executed\n *   numRequiredCalls times.\n * @param {int} numRequiredCalls The number of times which the returned function needs to be called before\n *   func is.\n */\nexport function delayExecution(func, numRequiredCalls) {\n  if (numRequiredCalls < 1) {\n    throw new Error(`numRequiredCalls must be a positive number. Got ${numRequiredCalls}`);\n  }\n  let numCalls = 0;\n  return function () {\n    numCalls++;\n    if (numCalls === numRequiredCalls) {\n      func.apply(null, arguments);\n    }\n  }\n}\n\n/**\n * https://stackoverflow.com/a/34890276/428704\n * @export\n * @param {array} xs\n * @param {string} key\n * @returns {Object} {${key_value}: ${groupByArray}, key_value: {groupByArray}}\n */\nexport function groupBy(xs, key) {\n  return xs.reduce(function(rv, x) {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n  }, {});\n}\n\n/**\n * deepAccess utility function useful for doing safe access (will not throw exceptions) of deep object paths.\n * @param {Object} obj The object containing the values you would like to access.\n * @param {string|number} path Object path to the value you would like to access.  Non-strings are coerced to strings.\n * @returns {*} The value found at the specified object path, or undefined if path is not found.\n */\nexport function deepAccess(obj, path) {\n  if (!obj) {\n    return;\n  }\n  path = String(path).split('.');\n  for (let i = 0; i < path.length; i++) {\n    obj = obj[path[i]];\n    if (typeof obj === 'undefined') {\n      return;\n    }\n  }\n  return obj;\n}\n\n/**\n * Returns content for a friendly iframe to execute a URL in script tag\n * @param {string} url URL to be executed in a script tag in a friendly iframe\n * <!--PRE_SCRIPT_TAG_MACRO--> and <!--POST_SCRIPT_TAG_MACRO--> are macros left to be replaced if required\n */\nexport function createContentToExecuteExtScriptInFriendlyFrame(url) {\n  if (!url) {\n    return '';\n  }\n\n  return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"><html><head><base target=\"_top\" /><script>inDapIF=true;</script></head><body><!--PRE_SCRIPT_TAG_MACRO--><script src=\"${url}\"></script><!--POST_SCRIPT_TAG_MACRO--></body></html>`;\n}\n\n/**\n * Build an object consisting of only defined parameters to avoid creating an\n * object with defined keys and undefined values.\n * @param {Object} object The object to pick defined params out of\n * @param {string[]} params An array of strings representing properties to look for in the object\n * @returns {Object} An object containing all the specified values that are defined\n */\nexport function getDefinedParams(object, params) {\n  return params\n    .filter(param => object[param])\n    .reduce((bid, param) => Object.assign(bid, { [param]: object[param] }), {});\n}\n\n/**\n * @typedef {Object} MediaTypes\n * @property {Object} banner banner configuration\n * @property {Object} native native configuration\n * @property {Object} video video configuration\n */\n\n/**\n * Validates an adunit's `mediaTypes` parameter\n * @param {MediaTypes} mediaTypes mediaTypes parameter to validate\n * @return {boolean} If object is valid\n */\nexport function isValidMediaTypes(mediaTypes) {\n  const SUPPORTED_MEDIA_TYPES = ['banner', 'native', 'video'];\n  const SUPPORTED_STREAM_TYPES = ['instream', 'outstream', 'adpod'];\n\n  const types = Object.keys(mediaTypes);\n\n  if (!types.every(type => includes(SUPPORTED_MEDIA_TYPES, type))) {\n    return false;\n  }\n\n  if (mediaTypes.video && mediaTypes.video.context) {\n    return includes(SUPPORTED_STREAM_TYPES, mediaTypes.video.context);\n  }\n\n  return true;\n}\n\nexport function getBidderRequest(bidRequests, bidder, adUnitCode) {\n  return find(bidRequests, request => {\n    return request.bids\n      .filter(bid => bid.bidder === bidder && bid.adUnitCode === adUnitCode).length > 0;\n  }) || { start: null, auctionId: null };\n}\n/**\n * Returns user configured bidder params from adunit\n * @param {Object} adUnits\n * @param {string} adUnitCode code\n * @param {string} bidder code\n * @return {Array} user configured param for the given bidder adunit configuration\n */\nexport function getUserConfiguredParams(adUnits, adUnitCode, bidder) {\n  return adUnits\n    .filter(adUnit => adUnit.code === adUnitCode)\n    .map((adUnit) => adUnit.bids)\n    .reduce(flatten, [])\n    .filter((bidderData) => bidderData.bidder === bidder)\n    .map((bidderData) => bidderData.params || {});\n}\n/**\n * Returns the origin\n */\nexport function getOrigin() {\n  // IE10 does not have this property. https://gist.github.com/hbogs/7908703\n  if (!window.location.origin) {\n    return window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n  } else {\n    return window.location.origin;\n  }\n}\n\n/**\n * Returns Do Not Track state\n */\nexport function getDNT() {\n  return navigator.doNotTrack === '1' || window.doNotTrack === '1' || navigator.msDoNotTrack === '1' || navigator.doNotTrack === 'yes';\n}\n\nconst compareCodeAndSlot = (slot, adUnitCode) => slot.getAdUnitPath() === adUnitCode || slot.getSlotElementId() === adUnitCode;\n\n/**\n * Returns filter function to match adUnitCode in slot\n * @param {Object} slot GoogleTag slot\n * @return {function} filter function\n */\nexport function isAdUnitCodeMatchingSlot(slot) {\n  return (adUnitCode) => compareCodeAndSlot(slot, adUnitCode);\n}\n\n/**\n * Returns filter function to match adUnitCode in slot\n * @param {string} adUnitCode AdUnit code\n * @return {function} filter function\n */\nexport function isSlotMatchingAdUnitCode(adUnitCode) {\n  return (slot) => compareCodeAndSlot(slot, adUnitCode);\n}\n\n/**\n * Constructs warning message for when unsupported bidders are dropped from an adunit\n * @param {Object} adUnit ad unit from which the bidder is being dropped\n * @param {string} bidder bidder code that is not compatible with the adUnit\n * @return {string} warning message to display when condition is met\n */\nexport function unsupportedBidderMessage(adUnit, bidder) {\n  const mediaType = Object.keys(adUnit.mediaTypes || {'banner': 'banner'}).join(', ');\n\n  return `\n    ${adUnit.code} is a ${mediaType} ad unit\n    containing bidders that don't support ${mediaType}: ${bidder}.\n    This bidder won't fetch demand.\n  `;\n}\n\n/**\n * Delete property from object\n * @param {Object} object\n * @param {string} prop\n * @return {Object} object\n */\nexport function deletePropertyFromObject(object, prop) {\n  let result = Object.assign({}, object);\n  delete result[prop];\n  return result;\n}\n\n/**\n * Delete requestId from external bid object.\n * @param {Object} bid\n * @return {Object} bid\n */\nexport function removeRequestId(bid) {\n  return deletePropertyFromObject(bid, 'requestId');\n}\n\n/**\n * Checks input is integer or not\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n * @param {*} value\n */\nexport function isInteger(value) {\n  if (Number.isInteger) {\n    return Number.isInteger(value);\n  } else {\n    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n  }\n}\n\n/**\n * Converts a string value in camel-case to underscore eg 'placementId' becomes 'placement_id'\n * @param {string} value string value to convert\n */\nexport function convertCamelToUnderscore(value) {\n  return value.replace(/(?:^|\\.?)([A-Z])/g, function (x, y) { return '_' + y.toLowerCase() }).replace(/^_/, '');\n}\n\n/**\n * Converts an object of arrays (either strings or numbers) into an array of objects containing key and value properties\n * normally read from bidder params\n * eg { foo: ['bar', 'baz'], fizz: ['buzz'] }\n * becomes [{ key: 'foo', value: ['bar', 'baz']}, {key: 'fizz', value: ['buzz']}]\n * @param {Object} keywords object of arrays representing keyvalue pairs\n * @param {string} paramName name of parent object (eg 'keywords') containing keyword data, used in error handling\n */\nexport function transformBidderParamKeywords(keywords, paramName = 'keywords') {\n  let arrs = [];\n\n  _each(keywords, (v, k) => {\n    if (isArray(v)) {\n      let values = [];\n      _each(v, (val) => {\n        val = getValueString(paramName + '.' + k, val);\n        if (val || val === '') { values.push(val); }\n      });\n      v = values;\n    } else {\n      v = getValueString(paramName + '.' + k, v);\n      if (isStr(v)) {\n        v = [v];\n      } else {\n        return;\n      } // unsuported types - don't send a key\n    }\n    arrs.push({key: k, value: v});\n  });\n\n  return arrs;\n}\n\n/**\n * Try to convert a value to a type.\n * If it can't be done, the value will be returned.\n *\n * @param {string} typeToConvert The target type. e.g. \"string\", \"number\", etc.\n * @param {*} value The value to be converted into typeToConvert.\n */\nfunction tryConvertType(typeToConvert, value) {\n  if (typeToConvert === 'string') {\n    return value && value.toString();\n  } else if (typeToConvert === 'number') {\n    return Number(value);\n  } else {\n    return value;\n  }\n}\n\nexport function convertTypes(types, params) {\n  Object.keys(types).forEach(key => {\n    if (params[key]) {\n      if (isFn(types[key])) {\n        params[key] = types[key](params[key]);\n      } else {\n        params[key] = tryConvertType(types[key], params[key]);\n      }\n\n      // don't send invalid values\n      if (isNaN(params[key])) {\n        delete params.key;\n      }\n    }\n  });\n  return params;\n}\n\nexport function setDataInLocalStorage(key, value) {\n  if (hasLocalStorage()) {\n    window.localStorage.setItem(key, value);\n  }\n}\n\nexport function getDataFromLocalStorage(key) {\n  if (hasLocalStorage()) {\n    return window.localStorage.getItem(key);\n  }\n}\n\nexport function hasLocalStorage() {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    logError('Local storage api disabled');\n  }\n}\n\nexport function isArrayOfNums(val, size) {\n  return (isArray(val)) && ((size) ? val.length === size : true) && (val.every(v => isInteger(v)));\n}\n\n/**\n * Creates an array of n length and fills each item with the given value\n */\nexport function fill(value, length) {\n  let newArray = [];\n\n  for (let i = 0; i < length; i++) {\n    let valueToPush = isPlainObject(value) ? deepClone(value) : value;\n    newArray.push(valueToPush);\n  }\n\n  return newArray;\n}\n\n/**\n * http://npm.im/chunk\n * Returns an array with *size* chunks from given array\n *\n * Example:\n * ['a', 'b', 'c', 'd', 'e'] chunked by 2 =>\n * [['a', 'b'], ['c', 'd'], ['e']]\n */\nexport function chunk(array, size) {\n  let newArray = [];\n\n  for (let i = 0; i < Math.ceil(array.length / size); i++) {\n    let start = i * size;\n    let end = start + size;\n    newArray.push(array.slice(start, end));\n  }\n\n  return newArray;\n}\n\nexport function getMinValueFromArray(array) {\n  return Math.min(...array);\n}\n\nexport function getMaxValueFromArray(array) {\n  return Math.max(...array);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","require('../../modules/es7.array.includes');\nmodule.exports = require('../../modules/_core').Array.includes;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/includes.js\n// module id = 1\n// module chunks = 0","/*\n * Module for getting and setting Prebid configuration.\n *\n * Prebid previously defined these properties directly on the global object:\n * pbjs.logging = true;\n *\n * Defining and access properties in this way is now deprecated, but these will\n * continue to work during a deprecation window.\n */\nimport { isValidPriceConfig } from './cpmBucketManager';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\nimport { hook } from './hook';\nconst utils = require('./utils');\n\nconst DEFAULT_DEBUG = false;\nconst DEFAULT_BIDDER_TIMEOUT = 3000;\nconst DEFAULT_PUBLISHER_DOMAIN = window.location.origin;\nconst DEFAULT_ENABLE_SEND_ALL_BIDS = true;\nconst DEFAULT_DISABLE_AJAX_TIMEOUT = false;\nconst DEFAULT_BID_CACHE = false;\n\nconst DEFAULT_TIMEOUTBUFFER = 400;\n\nexport const RANDOM = 'random';\nconst FIXED = 'fixed';\n\nconst VALID_ORDERS = {};\nVALID_ORDERS[RANDOM] = true;\nVALID_ORDERS[FIXED] = true;\n\nconst DEFAULT_BIDDER_SEQUENCE = RANDOM;\n\nconst GRANULARITY_OPTIONS = {\n  LOW: 'low',\n  MEDIUM: 'medium',\n  HIGH: 'high',\n  AUTO: 'auto',\n  DENSE: 'dense',\n  CUSTOM: 'custom'\n};\n\nconst ALL_TOPICS = '*';\n\n/**\n * @typedef {object} PrebidConfig\n *\n * @property {string} cache.url Set a url if we should use prebid-cache to store video bids before adding\n *   bids to the auction. **NOTE** This must be set if you want to use the dfpAdServerVideo module.\n */\n\nexport function newConfig() {\n  let listeners = [];\n  let defaults;\n  let config;\n\n  function resetConfig() {\n    defaults = {};\n    let newConfig = {\n      // `debug` is equivalent to legacy `pbjs.logging` property\n      _debug: DEFAULT_DEBUG,\n      get debug() {\n        return this._debug;\n      },\n      set debug(val) {\n        this._debug = val;\n      },\n\n      // default timeout for all bids\n      _bidderTimeout: DEFAULT_BIDDER_TIMEOUT,\n      get bidderTimeout() {\n        return this._bidderTimeout;\n      },\n      set bidderTimeout(val) {\n        this._bidderTimeout = val;\n      },\n\n      // domain where prebid is running for cross domain iframe communication\n      _publisherDomain: DEFAULT_PUBLISHER_DOMAIN,\n      get publisherDomain() {\n        return this._publisherDomain;\n      },\n      set publisherDomain(val) {\n        this._publisherDomain = val;\n      },\n\n      // calls existing function which may be moved after deprecation\n      _priceGranularity: GRANULARITY_OPTIONS.MEDIUM,\n      set priceGranularity(val) {\n        if (validatePriceGranularity(val)) {\n          if (typeof val === 'string') {\n            this._priceGranularity = (hasGranularity(val)) ? val : GRANULARITY_OPTIONS.MEDIUM;\n          } else if (typeof val === 'object') {\n            this._customPriceBucket = val;\n            this._priceGranularity = GRANULARITY_OPTIONS.CUSTOM;\n            utils.logMessage('Using custom price granularity');\n          }\n        }\n      },\n      get priceGranularity() {\n        return this._priceGranularity;\n      },\n\n      _customPriceBucket: {},\n      get customPriceBucket() {\n        return this._customPriceBucket;\n      },\n\n      _mediaTypePriceGranularity: {},\n      get mediaTypePriceGranularity() {\n        return this._mediaTypePriceGranularity;\n      },\n      set mediaTypePriceGranularity(val) {\n        this._mediaTypePriceGranularity = Object.keys(val).reduce((aggregate, item) => {\n          if (validatePriceGranularity(val[item])) {\n            if (typeof val === 'string') {\n              aggregate[item] = (hasGranularity(val[item])) ? val[item] : this._priceGranularity;\n            } else if (typeof val === 'object') {\n              aggregate[item] = val[item];\n              utils.logMessage(`Using custom price granularity for ${item}`);\n            }\n          } else {\n            utils.logWarn(`Invalid price granularity for media type: ${item}`);\n          }\n          return aggregate;\n        }, {});\n      },\n\n      _sendAllBids: DEFAULT_ENABLE_SEND_ALL_BIDS,\n      get enableSendAllBids() {\n        return this._sendAllBids;\n      },\n      set enableSendAllBids(val) {\n        this._sendAllBids = val;\n      },\n\n      _useBidCache: DEFAULT_BID_CACHE,\n      get useBidCache() {\n        return this._useBidCache;\n      },\n      set useBidCache(val) {\n        this._useBidCache = val;\n      },\n\n      _bidderSequence: DEFAULT_BIDDER_SEQUENCE,\n      get bidderSequence() {\n        return this._bidderSequence;\n      },\n      set bidderSequence(val) {\n        if (VALID_ORDERS[val]) {\n          this._bidderSequence = val;\n        } else {\n          utils.logWarn(`Invalid order: ${val}. Bidder Sequence was not set.`);\n        }\n      },\n\n      // timeout buffer to adjust for bidder CDN latency\n      _timeoutBuffer: DEFAULT_TIMEOUTBUFFER,\n      get timeoutBuffer() {\n        return this._timeoutBuffer;\n      },\n      set timeoutBuffer(val) {\n        this._timeoutBuffer = val;\n      },\n\n      _disableAjaxTimeout: DEFAULT_DISABLE_AJAX_TIMEOUT,\n      get disableAjaxTimeout() {\n        return this._disableAjaxTimeout;\n      },\n      set disableAjaxTimeout(val) {\n        this._disableAjaxTimeout = val;\n      },\n\n    };\n\n    if (config) {\n      callSubscribers(\n        Object.keys(config).reduce((memo, topic) => {\n          if (config[topic] !== newConfig[topic]) {\n            memo[topic] = newConfig[topic] || {};\n          }\n          return memo;\n        },\n        {})\n      );\n    }\n\n    config = newConfig;\n\n    function hasGranularity(val) {\n      return find(Object.keys(GRANULARITY_OPTIONS), option => val === GRANULARITY_OPTIONS[option]);\n    }\n\n    function validatePriceGranularity(val) {\n      if (!val) {\n        utils.logError('Prebid Error: no value passed to `setPriceGranularity()`');\n        return false;\n      }\n      if (typeof val === 'string') {\n        if (!hasGranularity(val)) {\n          utils.logWarn('Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.');\n        }\n      } else if (typeof val === 'object') {\n        if (!isValidPriceConfig(val)) {\n          utils.logError('Invalid custom price value passed to `setPriceGranularity()`');\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n  /*\n   * Returns configuration object if called without parameters,\n   * or single configuration property if given a string matching a configuration\n   * property name.  Allows deep access e.g. getConfig('currency.adServerCurrency')\n   *\n   * If called with callback parameter, or a string and a callback parameter,\n   * subscribes to configuration updates. See `subscribe` function for usage.\n   */\n  function getConfig(...args) {\n    if (args.length <= 1 && typeof args[0] !== 'function') {\n      const option = args[0];\n      return option ? utils.deepAccess(config, option) : config;\n    }\n\n    return subscribe(...args);\n  }\n\n  /*\n   * Sets configuration given an object containing key-value pairs and calls\n   * listeners that were added by the `subscribe` function\n   */\n  let setConfig = hook('async', function setConfig(options) {\n    if (typeof options !== 'object') {\n      utils.logError('setConfig options must be an object');\n      return;\n    }\n\n    let topics = Object.keys(options);\n    let topicalConfig = {};\n\n    topics.forEach(topic => {\n      let option = options[topic];\n\n      if (typeof defaults[topic] === 'object' && typeof option === 'object') {\n        option = Object.assign({}, defaults[topic], option);\n      }\n\n      topicalConfig[topic] = config[topic] = option;\n    });\n\n    callSubscribers(topicalConfig);\n  });\n\n  /**\n   * Sets configuration defaults which setConfig values can be applied on top of\n   * @param {object} options\n   */\n  function setDefaults(options) {\n    if (typeof defaults !== 'object') {\n      utils.logError('defaults must be an object');\n      return;\n    }\n\n    Object.assign(defaults, options);\n    // Add default values to config as well\n    Object.assign(config, options);\n  }\n\n  /*\n   * Adds a function to a set of listeners that are invoked whenever `setConfig`\n   * is called. The subscribed function will be passed the options object that\n   * was used in the `setConfig` call. Topics can be subscribed to to only get\n   * updates when specific properties are updated by passing a topic string as\n   * the first parameter.\n   *\n   * Returns an `unsubscribe` function for removing the subscriber from the\n   * set of listeners\n   *\n   * Example use:\n   * // subscribe to all configuration changes\n   * subscribe((config) => console.log('config set:', config));\n   *\n   * // subscribe to only 'logging' changes\n   * subscribe('logging', (config) => console.log('logging set:', config));\n   *\n   * // unsubscribe\n   * const unsubscribe = subscribe(...);\n   * unsubscribe(); // no longer listening\n   */\n  function subscribe(topic, listener) {\n    let callback = listener;\n\n    if (typeof topic !== 'string') {\n      // first param should be callback function in this case,\n      // meaning it gets called for any config change\n      callback = topic;\n      topic = ALL_TOPICS;\n    }\n\n    if (typeof callback !== 'function') {\n      utils.logError('listener must be a function');\n      return;\n    }\n\n    listeners.push({ topic, callback });\n\n    // save and call this function to remove the listener\n    return function unsubscribe() {\n      listeners.splice(listeners.indexOf(listener), 1);\n    };\n  }\n\n  /*\n   * Calls listeners that were added by the `subscribe` function\n   */\n  function callSubscribers(options) {\n    const TOPICS = Object.keys(options);\n\n    // call subscribers of a specific topic, passing only that configuration\n    listeners\n      .filter(listener => includes(TOPICS, listener.topic))\n      .forEach(listener => {\n        listener.callback({ [listener.topic]: options[listener.topic] });\n      });\n\n    // call subscribers that didn't give a topic, passing everything that was set\n    listeners\n      .filter(listener => listener.topic === ALL_TOPICS)\n      .forEach(listener => listener.callback(options));\n  }\n\n  resetConfig();\n\n  return {\n    getConfig,\n    setConfig,\n    setDefaults,\n    resetConfig\n  };\n}\n\nexport const config = newConfig();\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","require('../../modules/es6.array.find');\nmodule.exports = require('../../modules/_core').Array.find;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/find.js\n// module id = 3\n// module chunks = 0","module.exports = {\"JSON_MAPPING\":{\"PL_CODE\":\"code\",\"PL_SIZE\":\"sizes\",\"PL_BIDS\":\"bids\",\"BD_BIDDER\":\"bidder\",\"BD_ID\":\"paramsd\",\"BD_PL_ID\":\"placementId\",\"ADSERVER_TARGETING\":\"adserverTargeting\",\"BD_SETTING_STANDARD\":\"standard\"},\"DEBUG_MODE\":\"pbjs_debug\",\"STATUS\":{\"GOOD\":1,\"NO_BID\":2},\"CB\":{\"TYPE\":{\"ALL_BIDS_BACK\":\"allRequestedBidsBack\",\"AD_UNIT_BIDS_BACK\":\"adUnitBidsBack\",\"BID_WON\":\"bidWon\",\"REQUEST_BIDS\":\"requestBids\"}},\"EVENTS\":{\"AUCTION_INIT\":\"auctionInit\",\"AUCTION_END\":\"auctionEnd\",\"BID_ADJUSTMENT\":\"bidAdjustment\",\"BID_TIMEOUT\":\"bidTimeout\",\"BID_REQUESTED\":\"bidRequested\",\"BID_RESPONSE\":\"bidResponse\",\"NO_BID\":\"noBid\",\"BID_WON\":\"bidWon\",\"BIDDER_DONE\":\"bidderDone\",\"SET_TARGETING\":\"setTargeting\",\"REQUEST_BIDS\":\"requestBids\",\"ADD_AD_UNITS\":\"addAdUnits\",\"AD_RENDER_FAILED\":\"adRenderFailed\"},\"AD_RENDER_FAILED_REASON\":{\"PREVENT_WRITING_ON_MAIN_DOCUMENT\":\"preventWritingOnMainDocuemnt\",\"NO_AD\":\"noAd\",\"EXCEPTION\":\"exception\",\"CANNOT_FIND_AD\":\"cannotFindAd\",\"MISSING_DOC_OR_ADID\":\"missingDocOrAdid\"},\"EVENT_ID_PATHS\":{\"bidWon\":\"adUnitCode\"},\"GRANULARITY_OPTIONS\":{\"LOW\":\"low\",\"MEDIUM\":\"medium\",\"HIGH\":\"high\",\"AUTO\":\"auto\",\"DENSE\":\"dense\",\"CUSTOM\":\"custom\"},\"TARGETING_KEYS\":{\"BIDDER\":\"hb_bidder\",\"AD_ID\":\"hb_adid\",\"PRICE_BUCKET\":\"hb_pb\",\"SIZE\":\"hb_size\",\"DEAL\":\"hb_deal\",\"SOURCE\":\"hb_source\",\"FORMAT\":\"hb_format\"},\"NATIVE_KEYS\":{\"title\":\"hb_native_title\",\"body\":\"hb_native_body\",\"body2\":\"hb_native_body2\",\"privacyLink\":\"hb_native_privacy\",\"sponsoredBy\":\"hb_native_brand\",\"image\":\"hb_native_image\",\"icon\":\"hb_native_icon\",\"clickUrl\":\"hb_native_linkurl\",\"displayUrl\":\"hb_native_displayurl\",\"cta\":\"hb_native_cta\",\"rating\":\"hb_native_rating\",\"address\":\"hb_native_address\",\"downloads\":\"hb_native_downloads\",\"likes\":\"hb_native_likes\",\"phone\":\"hb_native_phone\",\"price\":\"hb_native_price\",\"salePrice\":\"hb_native_saleprice\"},\"S2S\":{\"SRC\":\"s2s\",\"DEFAULT_ENDPOINT\":\"https://prebid.adnxs.com/pbs/v1/openrtb2/auction\",\"SYNCED_BIDDERS_KEY\":\"pbjsSyncs\"},\"BID_STATUS\":{\"BID_TARGETING_SET\":\"targetingSet\",\"RENDERED\":\"rendered\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/constants.json\n// module id = 4\n// module chunks = 0","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 5\n// module chunks = 0","var core = module.exports = { version: '2.6.5' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 6\n// module chunks = 0","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 7\n// module chunks = 0","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 8\n// module chunks = 0","\nimport funHooks from 'fun-hooks';\n\nexport let hook = funHooks({\n  ready: funHooks.SYNC | funHooks.ASYNC | funHooks.QUEUE\n});\n\nexport const getHook = hook.get;\n\nexport function setupBeforeHookFnOnce(baseFn, hookFn, priority = 15) {\n  let result = baseFn.getHooks({hook: hookFn});\n  if (result.length === 0) {\n    baseFn.before(hookFn, priority);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hook.js","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 10\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 11\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 12\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 13\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 14\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 15\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 16\n// module chunks = 0","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 17\n// module chunks = 0","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 18\n// module chunks = 0","export function parseQS(query) {\n  return !query ? {} : query\n    .replace(/^\\?/, '')\n    .split('&')\n    .reduce((acc, criteria) => {\n      let [k, v] = criteria.split('=');\n      if (/\\[\\]$/.test(k)) {\n        k = k.replace('[]', '');\n        acc[k] = acc[k] || [];\n        acc[k].push(v);\n      } else {\n        acc[k] = v || '';\n      }\n      return acc;\n    }, {});\n}\n\nexport function formatQS(query) {\n  return Object\n    .keys(query)\n    .map(k => Array.isArray(query[k])\n      ? query[k].map(v => `${k}[]=${v}`).join('&')\n      : `${k}=${query[k]}`)\n    .join('&');\n}\n\nexport function parse(url, options) {\n  let parsed = document.createElement('a');\n  if (options && 'noDecodeWholeURL' in options && options.noDecodeWholeURL) {\n    parsed.href = url;\n  } else {\n    parsed.href = decodeURIComponent(url);\n  }\n  // in window.location 'search' is string, not object\n  let qsAsString = (options && 'decodeSearchAsString' in options && options.decodeSearchAsString);\n  return {\n    href: parsed.href,\n    protocol: (parsed.protocol || '').replace(/:$/, ''),\n    hostname: parsed.hostname,\n    port: +parsed.port,\n    pathname: parsed.pathname.replace(/^(?!\\/)/, '/'),\n    search: (qsAsString) ? parsed.search : parseQS(parsed.search || ''),\n    hash: (parsed.hash || '').replace(/^#/, ''),\n    host: parsed.host || window.location.host\n  };\n}\n\nexport function format(obj) {\n  return (obj.protocol || 'http') + '://' +\n         (obj.host ||\n          obj.hostname + (obj.port ? `:${obj.port}` : '')) +\n         (obj.pathname || '') +\n         (obj.search ? `?${formatQS(obj.search || '')}` : '') +\n         (obj.hash ? `#${obj.hash}` : '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/url.js","import Adapter from '../adapter';\nimport adapterManager from '../adapterManager';\nimport { config } from '../config';\nimport { createBid } from '../bidfactory';\nimport { userSync } from '../userSync';\nimport { nativeBidIsValid } from '../native';\nimport { isValidVideoBid } from '../video';\nimport CONSTANTS from '../constants.json';\nimport events from '../events';\nimport includes from 'core-js/library/fn/array/includes';\nimport { ajax } from '../ajax';\nimport { logWarn, logError, parseQueryStringParameters, delayExecution, parseSizesInput, getBidderRequest, flatten, uniques, timestamp, setDataInLocalStorage, getDataFromLocalStorage, deepAccess } from '../utils';\nimport { ADPOD } from '../mediaTypes';\nimport { getHook } from '../hook';\n\n/**\n * This file aims to support Adapters during the Prebid 0.x -> 1.x transition.\n *\n * Prebid 1.x and Prebid 0.x will be in separate branches--perhaps for a long time.\n * This function defines an API for adapter construction which is compatible with both versions.\n * Adapters which use it can maintain their code in master, and only this file will need to change\n * in the 1.x branch.\n *\n * Typical usage looks something like:\n *\n * const adapter = registerBidder({\n *   code: 'myBidderCode',\n *   aliases: ['alias1', 'alias2'],\n *   supportedMediaTypes: ['video', 'native'],\n *   isBidRequestValid: function(paramsObject) { return true/false },\n *   buildRequests: function(bidRequests, bidderRequest) { return some ServerRequest(s) },\n *   interpretResponse: function(oneServerResponse) { return some Bids, or throw an error. }\n * });\n *\n * @see BidderSpec for the full API and more thorough descriptions.\n */\n\n/**\n * @typedef {object} BidderSpec An object containing the adapter-specific functions needed to\n * make a Bidder.\n *\n * @property {string} code A code which will be used to uniquely identify this bidder. This should be the same\n *   one as is used in the call to registerBidAdapter\n * @property {string[]} [aliases] A list of aliases which should also resolve to this bidder.\n * @property {MediaType[]} [supportedMediaTypes]: A list of Media Types which the adapter supports.\n * @property {function(object): boolean} isBidRequestValid Determines whether or not the given bid has all the params\n *   needed to make a valid request.\n * @property {function(BidRequest[], bidderRequest): ServerRequest|ServerRequest[]} buildRequests Build the request to the Server\n *   which requests Bids for the given array of Requests. Each BidRequest in the argument array is guaranteed to have\n *   passed the isBidRequestValid() test.\n * @property {function(ServerResponse, BidRequest): Bid[]} interpretResponse Given a successful response from the Server,\n *   interpret it and return the Bid objects. This function will be run inside a try/catch.\n *   If it throws any errors, your bids will be discarded.\n * @property {function(SyncOptions, ServerResponse[]): UserSync[]} [getUserSyncs] Given an array of all the responses\n *   from the server, determine which user syncs should occur. The argument array will contain every element\n *   which has been sent through to interpretResponse. The order of syncs in this array matters. The most\n *   important ones should come first, since publishers may limit how many are dropped on their page.\n * @property {function(object): object} transformBidParams Updates bid params before creating bid request\n }}\n */\n\n/**\n * @typedef {object} BidRequest\n *\n * @property {string} bidId A string which uniquely identifies this BidRequest in the current Auction.\n * @property {object} params Any bidder-specific params which the publisher used in their bid request.\n */\n\n/**\n * @typedef {object} ServerRequest\n *\n * @property {('GET'|'POST')} method The type of request which this is.\n * @property {string} url The endpoint for the request. For example, \"//bids.example.com\".\n * @property {string|object} data Data to be sent in the request.\n * @property {object} options Content-Type set in the header of the bid request, overrides default 'text/plain'.\n *   If this is a GET request, they'll become query params. If it's a POST request, they'll be added to the body.\n *   Strings will be added as-is. Objects will be unpacked into query params based on key/value mappings, or\n *   JSON-serialized into the Request body.\n */\n\n/**\n * @typedef {object} ServerResponse\n *\n * @property {*} body The response body. If this is legal JSON, then it will be parsed. Otherwise it'll be a\n *   string with the body's content.\n * @property {{get: function(string): string} headers The response headers.\n *   Call this like `ServerResponse.headers.get(\"Content-Type\")`\n */\n\n/**\n * @typedef {object} Bid\n *\n * @property {string} requestId The specific BidRequest which this bid is aimed at.\n *   This should match the BidRequest.bidId which this Bid targets.\n * @property {string} ad A URL which can be used to load this ad, if it's chosen by the publisher.\n * @property {string} currency The currency code for the cpm value\n * @property {number} cpm The bid price, in US cents per thousand impressions.\n * @property {number} ttl Time-to-live - how long (in seconds) Prebid can use this bid.\n * @property {boolean} netRevenue Boolean defining whether the bid is Net or Gross.  The default is true (Net).\n * @property {number} height The height of the ad, in pixels.\n * @property {number} width The width of the ad, in pixels.\n *\n * @property {object} [native] Object for storing native creative assets\n * @property {object} [video] Object for storing video response data\n * @property {object} [meta] Object for storing bid meta data\n * @property {string} [meta.iabSubCatId] The IAB subcategory ID\n * @property [Renderer] renderer A Renderer which can be used as a default for this bid,\n *   if the publisher doesn't override it. This is only relevant for Outstream Video bids.\n */\n\n/**\n * @typedef {Object} SyncOptions\n *\n * An object containing information about usersyncs which the adapter should obey.\n *\n * @property {boolean} iframeEnabled True if iframe usersyncs are allowed, and false otherwise\n * @property {boolean} pixelEnabled True if image usersyncs are allowed, and false otherwise\n */\n\n/**\n * TODO: Move this to the UserSync module after that PR is merged.\n *\n * @typedef {object} UserSync\n *\n * @property {('image'|'iframe')} type The type of user sync to be done.\n * @property {string} url The URL which makes the sync happen.\n */\n\n// common params for all mediaTypes\nconst COMMON_BID_RESPONSE_KEYS = ['requestId', 'cpm', 'ttl', 'creativeId', 'netRevenue', 'currency'];\n\nconst DEFAULT_REFRESHIN_DAYS = 1;\n\n/**\n * Register a bidder with prebid, using the given spec.\n *\n * If possible, Adapter modules should use this function instead of adapterManager.registerBidAdapter().\n *\n * @param {BidderSpec} spec An object containing the bare-bones functions we need to make a Bidder.\n */\nexport function registerBidder(spec) {\n  const mediaTypes = Array.isArray(spec.supportedMediaTypes)\n    ? { supportedMediaTypes: spec.supportedMediaTypes }\n    : undefined;\n  function putBidder(spec) {\n    const bidder = newBidder(spec);\n    adapterManager.registerBidAdapter(bidder, spec.code, mediaTypes);\n  }\n\n  putBidder(spec);\n  if (Array.isArray(spec.aliases)) {\n    spec.aliases.forEach(alias => {\n      adapterManager.aliasRegistry[alias] = spec.code;\n      putBidder(Object.assign({}, spec, { code: alias }));\n    });\n  }\n}\n\n/**\n * Make a new bidder from the given spec. This is exported mainly for testing.\n * Adapters will probably find it more convenient to use registerBidder instead.\n *\n * @param {BidderSpec} spec\n */\nexport function newBidder(spec) {\n  return Object.assign(new Adapter(spec.code), {\n    getSpec: function() {\n      return Object.freeze(spec);\n    },\n    registerSyncs,\n    callBids: function(bidderRequest, addBidResponse, done, ajax) {\n      if (!Array.isArray(bidderRequest.bids)) {\n        return;\n      }\n\n      const adUnitCodesHandled = {};\n      function addBidWithCode(adUnitCode, bid) {\n        adUnitCodesHandled[adUnitCode] = true;\n        if (isValid(adUnitCode, bid, [bidderRequest])) {\n          addBidResponse(adUnitCode, bid);\n        }\n      }\n\n      // After all the responses have come back, call done() and\n      // register any required usersync pixels.\n      const responses = [];\n      function afterAllResponses() {\n        done();\n        events.emit(CONSTANTS.EVENTS.BIDDER_DONE, bidderRequest);\n        registerSyncs(responses, bidderRequest.gdprConsent);\n      }\n\n      const validBidRequests = bidderRequest.bids.filter(filterAndWarn);\n      if (validBidRequests.length === 0) {\n        afterAllResponses();\n        return;\n      }\n      const bidRequestMap = {};\n      validBidRequests.forEach(bid => {\n        bidRequestMap[bid.bidId] = bid;\n        // Delete this once we are 1.0\n        if (!bid.adUnitCode) {\n          bid.adUnitCode = bid.placementCode\n        }\n      });\n\n      let requests = spec.buildRequests(validBidRequests, bidderRequest);\n      if (!requests || requests.length === 0) {\n        afterAllResponses();\n        return;\n      }\n      if (!Array.isArray(requests)) {\n        requests = [requests];\n      }\n\n      // Callbacks don't compose as nicely as Promises. We should call done() once _all_ the\n      // Server requests have returned and been processed. Since `ajax` accepts a single callback,\n      // we need to rig up a function which only executes after all the requests have been responded.\n      const onResponse = delayExecution(afterAllResponses, requests.length)\n      requests.forEach(processRequest);\n\n      function formatGetParameters(data) {\n        if (data) {\n          return `?${typeof data === 'object' ? parseQueryStringParameters(data) : data}`;\n        }\n\n        return '';\n      }\n\n      function processRequest(request) {\n        switch (request.method) {\n          case 'GET':\n            ajax(\n              `${request.url}${formatGetParameters(request.data)}`,\n              {\n                success: onSuccess,\n                error: onFailure\n              },\n              undefined,\n              Object.assign({\n                method: 'GET',\n                withCredentials: true\n              }, request.options)\n            );\n            break;\n          case 'POST':\n            ajax(\n              request.url,\n              {\n                success: onSuccess,\n                error: onFailure\n              },\n              typeof request.data === 'string' ? request.data : JSON.stringify(request.data),\n              Object.assign({\n                method: 'POST',\n                contentType: 'text/plain',\n                withCredentials: true\n              }, request.options)\n            );\n            break;\n          default:\n            logWarn(`Skipping invalid request from ${spec.code}. Request type ${request.type} must be GET or POST`);\n            onResponse();\n        }\n\n        // If the server responds successfully, use the adapter code to unpack the Bids from it.\n        // If the adapter code fails, no bids should be added. After all the bids have been added, make\n        // sure to call the `onResponse` function so that we're one step closer to calling done().\n        function onSuccess(response, responseObj) {\n          try {\n            response = JSON.parse(response);\n          } catch (e) { /* response might not be JSON... that's ok. */ }\n\n          // Make response headers available for #1742. These are lazy-loaded because most adapters won't need them.\n          response = {\n            body: response,\n            headers: headerParser(responseObj)\n          };\n          responses.push(response);\n\n          let bids;\n          try {\n            bids = spec.interpretResponse(response, request);\n          } catch (err) {\n            logError(`Bidder ${spec.code} failed to interpret the server's response. Continuing without bids`, null, err);\n            onResponse();\n            return;\n          }\n\n          if (bids) {\n            if (bids.forEach) {\n              bids.forEach(addBidUsingRequestMap);\n            } else {\n              addBidUsingRequestMap(bids);\n            }\n          }\n          onResponse(bids);\n\n          function addBidUsingRequestMap(bid) {\n            const bidRequest = bidRequestMap[bid.requestId];\n            if (bidRequest) {\n              const prebidBid = Object.assign(createBid(CONSTANTS.STATUS.GOOD, bidRequest), bid);\n              addBidWithCode(bidRequest.adUnitCode, prebidBid);\n            } else {\n              logWarn(`Bidder ${spec.code} made bid for unknown request ID: ${bid.requestId}. Ignoring.`);\n            }\n          }\n\n          function headerParser(xmlHttpResponse) {\n            return {\n              get: responseObj.getResponseHeader.bind(responseObj)\n            };\n          }\n        }\n\n        // If the server responds with an error, there's not much we can do. Log it, and make sure to\n        // call onResponse() so that we're one step closer to calling done().\n        function onFailure(err) {\n          logError(`Server call for ${spec.code} failed: ${err}. Continuing without bids.`);\n          onResponse();\n        }\n      }\n    }\n  });\n\n  function registerSyncs(responses, gdprConsent) {\n    if (spec.getUserSyncs) {\n      let filterConfig = config.getConfig('userSync.filterSettings');\n      let syncs = spec.getUserSyncs({\n        iframeEnabled: !!(config.getConfig('userSync.iframeEnabled') || (filterConfig && (filterConfig.iframe || filterConfig.all))),\n        pixelEnabled: !!(config.getConfig('userSync.pixelEnabled') || (filterConfig && (filterConfig.image || filterConfig.all))),\n      }, responses, gdprConsent);\n      if (syncs) {\n        if (!Array.isArray(syncs)) {\n          syncs = [syncs];\n        }\n        syncs.forEach((sync) => {\n          userSync.registerSync(sync.type, spec.code, sync.url)\n        });\n      }\n    }\n  }\n\n  function filterAndWarn(bid) {\n    if (!spec.isBidRequestValid(bid)) {\n      logWarn(`Invalid bid sent to bidder ${spec.code}: ${JSON.stringify(bid)}`);\n      return false;\n    }\n    return true;\n  }\n}\n\nexport function preloadBidderMappingFile(fn, adUnits) {\n  if (!config.getConfig('adpod.brandCategoryExclusion')) {\n    return fn.call(this, adUnits);\n  }\n  let adPodBidders = adUnits\n    .filter((adUnit) => deepAccess(adUnit, 'mediaTypes.video.context') === ADPOD)\n    .map((adUnit) => adUnit.bids.map((bid) => bid.bidder))\n    .reduce(flatten, [])\n    .filter(uniques);\n\n  adPodBidders.forEach(bidder => {\n    let bidderSpec = adapterManager.getBidAdapter(bidder);\n    if (bidderSpec.getSpec().getMappingFileInfo) {\n      let info = bidderSpec.getSpec().getMappingFileInfo();\n      let refreshInDays = (info.refreshInDays) ? info.refreshInDays : DEFAULT_REFRESHIN_DAYS;\n      let key = (info.localStorageKey) ? info.localStorageKey : bidderSpec.getSpec().code;\n      let mappingData = getDataFromLocalStorage(key);\n      if (!mappingData || timestamp() < mappingData.lastUpdated + refreshInDays * 24 * 60 * 60 * 1000) {\n        ajax(info.url,\n          {\n            success: (response) => {\n              try {\n                response = JSON.parse(response);\n                let mapping = {\n                  lastUpdated: timestamp(),\n                  mapping: response.mapping\n                }\n                setDataInLocalStorage(key, JSON.stringify(mapping));\n              } catch (error) {\n                logError(`Failed to parse ${bidder} bidder translation mapping file`);\n              }\n            },\n            error: () => {\n              logError(`Failed to load ${bidder} bidder translation file`)\n            }\n          },\n        );\n      }\n    }\n  });\n  fn.call(this, adUnits);\n}\n\ngetHook('checkAdUnitSetup').before(preloadBidderMappingFile);\n\n/**\n * Reads the data stored in localstorage and returns iab subcategory\n * @param {string} bidderCode bidderCode\n * @param {string} category bidders category\n */\nexport function getIabSubCategory(bidderCode, category) {\n  let bidderSpec = adapterManager.getBidAdapter(bidderCode);\n  if (bidderSpec.getSpec().getMappingFileInfo) {\n    let info = bidderSpec.getSpec().getMappingFileInfo();\n    let key = (info.localStorageKey) ? info.localStorageKey : bidderSpec.getBidderCode();\n    let data = getDataFromLocalStorage(key);\n    if (data) {\n      try {\n        data = JSON.parse(data);\n      } catch (error) {\n        logError(`Failed to parse ${bidderCode} mapping data stored in local storage`);\n      }\n      return (data.mapping[category]) ? data.mapping[category] : null;\n    }\n  }\n}\n\n// check that the bid has a width and height set\nfunction validBidSize(adUnitCode, bid, bidRequests) {\n  if ((bid.width || bid.width === 0) && (bid.height || bid.height === 0)) {\n    return true;\n  }\n\n  const adUnit = getBidderRequest(bidRequests, bid.bidderCode, adUnitCode);\n\n  const sizes = adUnit && adUnit.bids && adUnit.bids[0] && adUnit.bids[0].sizes;\n  const parsedSizes = parseSizesInput(sizes);\n\n  // if a banner impression has one valid size, we assign that size to any bid\n  // response that does not explicitly set width or height\n  if (parsedSizes.length === 1) {\n    const [ width, height ] = parsedSizes[0].split('x');\n    bid.width = width;\n    bid.height = height;\n    return true;\n  }\n\n  return false;\n}\n\n// Validate the arguments sent to us by the adapter. If this returns false, the bid should be totally ignored.\nexport function isValid(adUnitCode, bid, bidRequests) {\n  function hasValidKeys() {\n    let bidKeys = Object.keys(bid);\n    return COMMON_BID_RESPONSE_KEYS.every(key => includes(bidKeys, key) && !includes([undefined, null], bid[key]));\n  }\n\n  function errorMessage(msg) {\n    return `Invalid bid from ${bid.bidderCode}. Ignoring bid: ${msg}`;\n  }\n\n  if (!adUnitCode) {\n    logWarn('No adUnitCode was supplied to addBidResponse.');\n    return false;\n  }\n\n  if (!bid) {\n    logWarn(`Some adapter tried to add an undefined bid for ${adUnitCode}.`);\n    return false;\n  }\n\n  if (!hasValidKeys()) {\n    logError(errorMessage(`Bidder ${bid.bidderCode} is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.`));\n    return false;\n  }\n\n  if (bid.mediaType === 'native' && !nativeBidIsValid(bid, bidRequests)) {\n    logError(errorMessage('Native bid missing some required properties.'));\n    return false;\n  }\n  if (bid.mediaType === 'video' && !isValidVideoBid(bid, bidRequests)) {\n    logError(errorMessage(`Video bid does not have required vastUrl or renderer property`));\n    return false;\n  }\n  if (bid.mediaType === 'banner' && !validBidSize(adUnitCode, bid, bidRequests)) {\n    logError(errorMessage(`Banner bids require a width and height`));\n    return false;\n  }\n\n  return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/bidderFactory.js","/** @module adaptermanger */\n\nimport { flatten, getBidderCodes, getDefinedParams, shuffle, timestamp, getBidderRequest } from './utils';\nimport { getLabels, resolveStatus } from './sizeMapping';\nimport { processNativeAdUnitParams, nativeAdapters } from './native';\nimport { newBidder } from './adapters/bidderFactory';\nimport { ajaxBuilder } from './ajax';\nimport { config, RANDOM } from './config';\nimport includes from 'core-js/library/fn/array/includes';\nimport find from 'core-js/library/fn/array/find';\nimport { adunitCounter } from './adUnits';\nimport { getRefererInfo } from './refererDetection';\n\nvar utils = require('./utils.js');\nvar CONSTANTS = require('./constants.json');\nvar events = require('./events');\nlet s2sTestingModule; // store s2sTesting module if it's loaded\n\nlet adapterManager = {};\n\nlet _bidderRegistry = adapterManager.bidderRegistry = {};\nlet _aliasRegistry = adapterManager.aliasRegistry = {};\n\nlet _s2sConfig = {};\nconfig.getConfig('s2sConfig', config => {\n  _s2sConfig = config.s2sConfig;\n});\n\nvar _analyticsRegistry = {};\n\n/**\n * @typedef {object} LabelDescriptor\n * @property {boolean} labelAll describes whether or not this object expects all labels to match, or any label to match\n * @property {Array<string>} labels the labels listed on the bidder or adUnit\n * @property {Array<string>} activeLabels the labels specified as being active by requestBids\n */\n\nfunction getBids({bidderCode, auctionId, bidderRequestId, adUnits, labels, src}) {\n  return adUnits.reduce((result, adUnit) => {\n    let {\n      active,\n      mediaTypes: filteredMediaTypes,\n      filterResults\n    } = resolveStatus(\n      getLabels(adUnit, labels),\n      adUnit.mediaTypes,\n      adUnit.sizes\n    );\n\n    if (!active) {\n      utils.logInfo(`Size mapping disabled adUnit \"${adUnit.code}\"`);\n    } else if (filterResults) {\n      utils.logInfo(`Size mapping filtered adUnit \"${adUnit.code}\" banner sizes from `, filterResults.before, 'to ', filterResults.after);\n    }\n\n    if (active) {\n      result.push(adUnit.bids.filter(bid => bid.bidder === bidderCode)\n        .reduce((bids, bid) => {\n          const nativeParams =\n            adUnit.nativeParams || utils.deepAccess(adUnit, 'mediaTypes.native');\n          if (nativeParams) {\n            bid = Object.assign({}, bid, {\n              nativeParams: processNativeAdUnitParams(nativeParams),\n            });\n          }\n\n          bid = Object.assign({}, bid, getDefinedParams(adUnit, [\n            'mediaType',\n            'renderer'\n          ]));\n\n          let {\n            active,\n            mediaTypes,\n            filterResults\n          } = resolveStatus(getLabels(bid, labels), filteredMediaTypes);\n\n          if (!active) {\n            utils.logInfo(`Size mapping deactivated adUnit \"${adUnit.code}\" bidder \"${bid.bidder}\"`);\n          } else if (filterResults) {\n            utils.logInfo(`Size mapping filtered adUnit \"${adUnit.code}\" bidder \"${bid.bidder}\" banner sizes from `, filterResults.before, 'to ', filterResults.after);\n          }\n\n          if (utils.isValidMediaTypes(mediaTypes)) {\n            bid = Object.assign({}, bid, {\n              mediaTypes\n            });\n          } else {\n            utils.logError(\n              `mediaTypes is not correctly configured for adunit ${adUnit.code}`\n            );\n          }\n\n          if (active) {\n            bids.push(Object.assign({}, bid, {\n              adUnitCode: adUnit.code,\n              transactionId: adUnit.transactionId,\n              sizes: utils.deepAccess(mediaTypes, 'banner.sizes') || utils.deepAccess(mediaTypes, 'video.playerSize') || [],\n              bidId: bid.bid_id || utils.getUniqueIdentifierStr(),\n              bidderRequestId,\n              auctionId,\n              src,\n              bidRequestsCount: adunitCounter.getCounter(adUnit.code),\n            }));\n          }\n          return bids;\n        }, [])\n      );\n    }\n    return result;\n  }, []).reduce(flatten, []).filter(val => val !== '');\n}\n\nfunction getAdUnitCopyForPrebidServer(adUnits) {\n  let adaptersServerSide = _s2sConfig.bidders;\n  let adUnitsCopy = utils.deepClone(adUnits);\n\n  adUnitsCopy.forEach((adUnit) => {\n    // filter out client side bids\n    adUnit.bids = adUnit.bids.filter((bid) => {\n      return includes(adaptersServerSide, bid.bidder) && (!doingS2STesting() || bid.finalSource !== s2sTestingModule.CLIENT);\n    }).map((bid) => {\n      bid.bid_id = utils.getUniqueIdentifierStr();\n      return bid;\n    });\n  });\n\n  // don't send empty requests\n  adUnitsCopy = adUnitsCopy.filter(adUnit => {\n    return adUnit.bids.length !== 0;\n  });\n  return adUnitsCopy;\n}\n\nfunction getAdUnitCopyForClientAdapters(adUnits) {\n  let adUnitsClientCopy = utils.deepClone(adUnits);\n  // filter out s2s bids\n  adUnitsClientCopy.forEach((adUnit) => {\n    adUnit.bids = adUnit.bids.filter((bid) => {\n      return !doingS2STesting() || bid.finalSource !== s2sTestingModule.SERVER;\n    })\n  });\n\n  // don't send empty requests\n  adUnitsClientCopy = adUnitsClientCopy.filter(adUnit => {\n    return adUnit.bids.length !== 0;\n  });\n\n  return adUnitsClientCopy;\n}\n\nexport let gdprDataHandler = {\n  consentData: null,\n  setConsentData: function(consentInfo) {\n    gdprDataHandler.consentData = consentInfo;\n  },\n  getConsentData: function() {\n    return gdprDataHandler.consentData;\n  }\n};\n\nadapterManager.makeBidRequests = function(adUnits, auctionStart, auctionId, cbTimeout, labels) {\n  let bidRequests = [];\n\n  let bidderCodes = getBidderCodes(adUnits);\n  if (config.getConfig('bidderSequence') === RANDOM) {\n    bidderCodes = shuffle(bidderCodes);\n  }\n  const refererInfo = getRefererInfo();\n\n  let clientBidderCodes = bidderCodes;\n  let clientTestAdapters = [];\n  if (_s2sConfig.enabled) {\n    // if s2sConfig.bidderControl testing is turned on\n    if (doingS2STesting()) {\n      // get all adapters doing client testing\n      clientTestAdapters = s2sTestingModule.getSourceBidderMap(adUnits)[s2sTestingModule.CLIENT];\n    }\n\n    // these are called on the s2s adapter\n    let adaptersServerSide = _s2sConfig.bidders;\n\n    // don't call these client side (unless client request is needed for testing)\n    clientBidderCodes = bidderCodes.filter((elm) => {\n      return !includes(adaptersServerSide, elm) || includes(clientTestAdapters, elm);\n    });\n\n    let adUnitsS2SCopy = getAdUnitCopyForPrebidServer(adUnits);\n    let tid = utils.generateUUID();\n    adaptersServerSide.forEach(bidderCode => {\n      const bidderRequestId = utils.getUniqueIdentifierStr();\n      const bidderRequest = {\n        bidderCode,\n        auctionId,\n        bidderRequestId,\n        tid,\n        bids: getBids({bidderCode, auctionId, bidderRequestId, 'adUnits': utils.deepClone(adUnitsS2SCopy), labels, src: CONSTANTS.S2S.SRC}),\n        auctionStart: auctionStart,\n        timeout: _s2sConfig.timeout,\n        src: CONSTANTS.S2S.SRC,\n        refererInfo\n      };\n      if (bidderRequest.bids.length !== 0) {\n        bidRequests.push(bidderRequest);\n      }\n    });\n\n    // update the s2sAdUnits object and remove all bids that didn't pass sizeConfig/label checks from getBids()\n    // this is to keep consistency and only allow bids/adunits that passed the checks to go to pbs\n    adUnitsS2SCopy.forEach((adUnitCopy) => {\n      let validBids = adUnitCopy.bids.filter((adUnitBid) => {\n        return find(bidRequests, request => {\n          return find(request.bids, (reqBid) => reqBid.bidId === adUnitBid.bid_id);\n        });\n      });\n      adUnitCopy.bids = validBids;\n    });\n\n    bidRequests.forEach(request => {\n      request.adUnitsS2SCopy = adUnitsS2SCopy.filter(adUnitCopy => adUnitCopy.bids.length > 0);\n    });\n  }\n\n  // client adapters\n  let adUnitsClientCopy = getAdUnitCopyForClientAdapters(adUnits);\n  clientBidderCodes.forEach(bidderCode => {\n    const bidderRequestId = utils.getUniqueIdentifierStr();\n    const bidderRequest = {\n      bidderCode,\n      auctionId,\n      bidderRequestId,\n      bids: getBids({bidderCode, auctionId, bidderRequestId, 'adUnits': utils.deepClone(adUnitsClientCopy), labels, src: 'client'}),\n      auctionStart: auctionStart,\n      timeout: cbTimeout,\n      refererInfo\n    };\n    const adapter = _bidderRegistry[bidderCode];\n    if (!adapter) {\n      utils.logError(`Trying to make a request for bidder that does not exist: ${bidderCode}`);\n    }\n\n    if (adapter && bidderRequest.bids && bidderRequest.bids.length !== 0) {\n      bidRequests.push(bidderRequest);\n    }\n  });\n\n  if (gdprDataHandler.getConsentData()) {\n    bidRequests.forEach(bidRequest => {\n      bidRequest['gdprConsent'] = gdprDataHandler.getConsentData();\n    });\n  }\n  return bidRequests;\n};\n\nadapterManager.callBids = (adUnits, bidRequests, addBidResponse, doneCb, requestCallbacks, requestBidsTimeout) => {\n  if (!bidRequests.length) {\n    utils.logWarn('callBids executed with no bidRequests.  Were they filtered by labels or sizing?');\n    return;\n  }\n\n  let [clientBidRequests, serverBidRequests] = bidRequests.reduce((partitions, bidRequest) => {\n    partitions[Number(typeof bidRequest.src !== 'undefined' && bidRequest.src === CONSTANTS.S2S.SRC)].push(bidRequest);\n    return partitions;\n  }, [[], []]);\n\n  if (serverBidRequests.length) {\n    // s2s should get the same client side timeout as other client side requests.\n    const s2sAjax = ajaxBuilder(requestBidsTimeout, requestCallbacks ? {\n      request: requestCallbacks.request.bind(null, 's2s'),\n      done: requestCallbacks.done\n    } : undefined);\n    let adaptersServerSide = _s2sConfig.bidders;\n    const s2sAdapter = _bidderRegistry[_s2sConfig.adapter];\n    let tid = serverBidRequests[0].tid;\n    let adUnitsS2SCopy = serverBidRequests[0].adUnitsS2SCopy;\n\n    if (s2sAdapter) {\n      let s2sBidRequest = {tid, 'ad_units': adUnitsS2SCopy};\n      if (s2sBidRequest.ad_units.length) {\n        let doneCbs = serverBidRequests.map(bidRequest => {\n          bidRequest.start = timestamp();\n          return doneCb.bind(bidRequest);\n        });\n\n        // only log adapters that actually have adUnit bids\n        let allBidders = s2sBidRequest.ad_units.reduce((adapters, adUnit) => {\n          return adapters.concat((adUnit.bids || []).reduce((adapters, bid) => { return adapters.concat(bid.bidder) }, []));\n        }, []);\n        utils.logMessage(`CALLING S2S HEADER BIDDERS ==== ${adaptersServerSide.filter(adapter => {\n          return includes(allBidders, adapter);\n        }).join(',')}`);\n\n        // fire BID_REQUESTED event for each s2s bidRequest\n        serverBidRequests.forEach(bidRequest => {\n          events.emit(CONSTANTS.EVENTS.BID_REQUESTED, bidRequest);\n        });\n\n        // make bid requests\n        s2sAdapter.callBids(\n          s2sBidRequest,\n          serverBidRequests,\n          function(adUnitCode, bid) {\n            let bidderRequest = getBidderRequest(serverBidRequests, bid.bidderCode, adUnitCode);\n            if (bidderRequest) {\n              addBidResponse.call(bidderRequest, adUnitCode, bid)\n            }\n          },\n          () => doneCbs.forEach(done => done()),\n          s2sAjax\n        );\n      }\n    }\n  }\n\n  // handle client adapter requests\n  clientBidRequests.forEach(bidRequest => {\n    bidRequest.start = timestamp();\n    // TODO : Do we check for bid in pool from here and skip calling adapter again ?\n    const adapter = _bidderRegistry[bidRequest.bidderCode];\n    utils.logMessage(`CALLING BIDDER ======= ${bidRequest.bidderCode}`);\n    events.emit(CONSTANTS.EVENTS.BID_REQUESTED, bidRequest);\n    let ajax = ajaxBuilder(requestBidsTimeout, requestCallbacks ? {\n      request: requestCallbacks.request.bind(null, bidRequest.bidderCode),\n      done: requestCallbacks.done\n    } : undefined);\n    adapter.callBids(bidRequest, addBidResponse.bind(bidRequest), doneCb.bind(bidRequest), ajax);\n  });\n}\n\nfunction doingS2STesting() {\n  return _s2sConfig && _s2sConfig.enabled && _s2sConfig.testing && s2sTestingModule;\n}\n\nfunction getSupportedMediaTypes(bidderCode) {\n  let result = [];\n  if (includes(adapterManager.videoAdapters, bidderCode)) result.push('video');\n  if (includes(nativeAdapters, bidderCode)) result.push('native');\n  return result;\n}\n\nadapterManager.videoAdapters = []; // added by adapterLoader for now\n\nadapterManager.registerBidAdapter = function (bidAdaptor, bidderCode, {supportedMediaTypes = []} = {}) {\n  if (bidAdaptor && bidderCode) {\n    if (typeof bidAdaptor.callBids === 'function') {\n      _bidderRegistry[bidderCode] = bidAdaptor;\n\n      if (includes(supportedMediaTypes, 'video')) {\n        adapterManager.videoAdapters.push(bidderCode);\n      }\n      if (includes(supportedMediaTypes, 'native')) {\n        nativeAdapters.push(bidderCode);\n      }\n    } else {\n      utils.logError('Bidder adaptor error for bidder code: ' + bidderCode + 'bidder must implement a callBids() function');\n    }\n  } else {\n    utils.logError('bidAdaptor or bidderCode not specified');\n  }\n};\n\nadapterManager.aliasBidAdapter = function (bidderCode, alias) {\n  let existingAlias = _bidderRegistry[alias];\n\n  if (typeof existingAlias === 'undefined') {\n    let bidAdaptor = _bidderRegistry[bidderCode];\n    if (typeof bidAdaptor === 'undefined') {\n      // check if alias is part of s2sConfig and allow them to register if so (as base bidder may be s2s-only)\n      const s2sConfig = config.getConfig('s2sConfig');\n      const s2sBidders = s2sConfig && s2sConfig.bidders;\n\n      if (!(s2sBidders && includes(s2sBidders, alias))) {\n        utils.logError('bidderCode \"' + bidderCode + '\" is not an existing bidder.', 'adapterManager.aliasBidAdapter');\n      } else {\n        _aliasRegistry[alias] = bidderCode;\n      }\n    } else {\n      try {\n        let newAdapter;\n        let supportedMediaTypes = getSupportedMediaTypes(bidderCode);\n        // Have kept old code to support backward compatibilitiy.\n        // Remove this if loop when all adapters are supporting bidderFactory. i.e When Prebid.js is 1.0\n        if (bidAdaptor.constructor.prototype != Object.prototype) {\n          newAdapter = new bidAdaptor.constructor();\n          newAdapter.setBidderCode(alias);\n        } else {\n          let spec = bidAdaptor.getSpec();\n          newAdapter = newBidder(Object.assign({}, spec, { code: alias }));\n          _aliasRegistry[alias] = bidderCode;\n        }\n        adapterManager.registerBidAdapter(newAdapter, alias, {\n          supportedMediaTypes\n        });\n      } catch (e) {\n        utils.logError(bidderCode + ' bidder does not currently support aliasing.', 'adapterManager.aliasBidAdapter');\n      }\n    }\n  } else {\n    utils.logMessage('alias name \"' + alias + '\" has been already specified.');\n  }\n};\n\nadapterManager.registerAnalyticsAdapter = function ({adapter, code}) {\n  if (adapter && code) {\n    if (typeof adapter.enableAnalytics === 'function') {\n      adapter.code = code;\n      _analyticsRegistry[code] = adapter;\n    } else {\n      utils.logError(`Prebid Error: Analytics adaptor error for analytics \"${code}\"\n        analytics adapter must implement an enableAnalytics() function`);\n    }\n  } else {\n    utils.logError('Prebid Error: analyticsAdapter or analyticsCode not specified');\n  }\n};\n\nadapterManager.enableAnalytics = function (config) {\n  if (!utils.isArray(config)) {\n    config = [config];\n  }\n\n  utils._each(config, adapterConfig => {\n    var adapter = _analyticsRegistry[adapterConfig.provider];\n    if (adapter) {\n      adapter.enableAnalytics(adapterConfig);\n    } else {\n      utils.logError(`Prebid Error: no analytics adapter found in registry for\n        ${adapterConfig.provider}.`);\n    }\n  });\n};\n\nadapterManager.getBidAdapter = function(bidder) {\n  return _bidderRegistry[bidder];\n};\n\n// the s2sTesting module is injected when it's loaded rather than being imported\n// importing it causes the packager to include it even when it's not explicitly included in the build\nexport function setS2STestingModule(module) {\n  s2sTestingModule = module;\n}\n\nfunction tryCallBidderMethod(bidder, method, param) {\n  try {\n    const adapter = _bidderRegistry[bidder];\n    const spec = adapter.getSpec();\n    if (spec && spec[method] && typeof spec[method] === 'function') {\n      utils.logInfo(`Invoking ${bidder}.${method}`);\n      spec[method](param);\n    }\n  } catch (e) {\n    utils.logWarn(`Error calling ${method} of ${bidder}`);\n  }\n}\n\nadapterManager.callTimedOutBidders = function(adUnits, timedOutBidders, cbTimeout) {\n  timedOutBidders = timedOutBidders.map((timedOutBidder) => {\n    // Adding user configured params & timeout to timeout event data\n    timedOutBidder.params = utils.getUserConfiguredParams(adUnits, timedOutBidder.adUnitCode, timedOutBidder.bidder);\n    timedOutBidder.timeout = cbTimeout;\n    return timedOutBidder;\n  });\n  timedOutBidders = utils.groupBy(timedOutBidders, 'bidder');\n\n  Object.keys(timedOutBidders).forEach((bidder) => {\n    tryCallBidderMethod(bidder, 'onTimeout', timedOutBidders[bidder]);\n  });\n}\n\nadapterManager.callBidWonBidder = function(bidder, bid, adUnits) {\n  // Adding user configured params to bidWon event data\n  bid.params = utils.getUserConfiguredParams(adUnits, bid.adUnitCode, bid.bidder);\n  tryCallBidderMethod(bidder, 'onBidWon', bid);\n};\n\nadapterManager.callSetTargetingBidder = function(bidder, bid) {\n  tryCallBidderMethod(bidder, 'onSetTargeting', bid);\n};\n\nexport default adapterManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapterManager.js","import { deepAccess, getBidRequest, getKeyByValue, insertHtmlIntoIframe, logError, triggerPixel } from './utils';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst CONSTANTS = require('./constants.json');\n\nexport const nativeAdapters = [];\n\nexport const NATIVE_TARGETING_KEYS = Object.keys(CONSTANTS.NATIVE_KEYS).map(\n  key => CONSTANTS.NATIVE_KEYS[key]\n);\n\nconst IMAGE = {\n  image: { required: true },\n  title: { required: true },\n  sponsoredBy: { required: true },\n  clickUrl: { required: true },\n  body: { required: false },\n  icon: { required: false },\n};\n\nconst SUPPORTED_TYPES = {\n  image: IMAGE\n};\n\n/**\n * Recieves nativeParams from an adUnit. If the params were not of type 'type',\n * passes them on directly. If they were of type 'type', translate\n * them into the predefined specific asset requests for that type of native ad.\n */\nexport function processNativeAdUnitParams(params) {\n  if (params && params.type && typeIsSupported(params.type)) {\n    return SUPPORTED_TYPES[params.type];\n  }\n\n  return params;\n}\n\n/**\n * Check if the native type specified in the adUnit is supported by Prebid.\n */\nfunction typeIsSupported(type) {\n  if (!(type && includes(Object.keys(SUPPORTED_TYPES), type))) {\n    logError(`${type} nativeParam is not supported`);\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Helper functions for working with native-enabled adUnits\n * TODO: abstract this and the video helper functions into general\n * adunit validation helper functions\n */\nexport const nativeAdUnit = adUnit => {\n  const mediaType = adUnit.mediaType === 'native';\n  const mediaTypes = deepAccess(adUnit, 'mediaTypes.native');\n  return mediaType || mediaTypes;\n}\nexport const nativeBidder = bid => includes(nativeAdapters, bid.bidder);\nexport const hasNonNativeBidder = adUnit =>\n  adUnit.bids.filter(bid => !nativeBidder(bid)).length;\n\n/**\n * Validate that the native assets on this bid contain all assets that were\n * marked as required in the adUnit configuration.\n * @param {Bid} bid Native bid to validate\n * @param {BidRequest[]} bidRequests All bid requests for an auction\n * @return {Boolean} If object is valid\n */\nexport function nativeBidIsValid(bid, bidRequests) {\n  const bidRequest = getBidRequest(bid.requestId, bidRequests);\n  if (!bidRequest) { return false; }\n\n  // all native bid responses must define a landing page url\n  if (!deepAccess(bid, 'native.clickUrl')) {\n    return false;\n  }\n\n  if (deepAccess(bid, 'native.image')) {\n    if (!deepAccess(bid, 'native.image.height') || !deepAccess(bid, 'native.image.width')) {\n      return false;\n    }\n  }\n\n  if (deepAccess(bid, 'native.icon')) {\n    if (!deepAccess(bid, 'native.icon.height') || !deepAccess(bid, 'native.icon.width')) {\n      return false;\n    }\n  }\n\n  const requestedAssets = bidRequest.nativeParams;\n  if (!requestedAssets) {\n    return true;\n  }\n\n  const requiredAssets = Object.keys(requestedAssets).filter(\n    key => requestedAssets[key].required\n  );\n  const returnedAssets = Object.keys(bid['native']).filter(\n    key => bid['native'][key]\n  );\n\n  return requiredAssets.every(asset => includes(returnedAssets, asset));\n}\n\n/*\n * Native responses may have associated impression or click trackers.\n * This retrieves the appropriate tracker urls for the given ad object and\n * fires them. As a native creatives may be in a cross-origin frame, it may be\n * necessary to invoke this function via postMessage. secureCreatives is\n * configured to fire this function when it receives a `message` of 'Prebid Native'\n * and an `adId` with the value of the `bid.adId`. When a message is posted with\n * these parameters, impression trackers are fired. To fire click trackers, the\n * message should contain an `action` set to 'click'.\n *\n * // Native creative template example usage\n * <a href=\"%%CLICK_URL_UNESC%%%%PATTERN:hb_native_linkurl%%\"\n *    target=\"_blank\"\n *    onclick=\"fireTrackers('click')\">\n *    %%PATTERN:hb_native_title%%\n * </a>\n *\n * <script>\n *   function fireTrackers(action) {\n *     var message = {message: 'Prebid Native', adId: '%%PATTERN:hb_adid%%'};\n *     if (action === 'click') {message.action = 'click';} // fires click trackers\n *     window.parent.postMessage(JSON.stringify(message), '*');\n *   }\n *   fireTrackers(); // fires impressions when creative is loaded\n * </script>\n */\nexport function fireNativeTrackers(message, adObject) {\n  let trackers;\n\n  if (message.action === 'click') {\n    trackers = adObject['native'] && adObject['native'].clickTrackers;\n  } else {\n    trackers = adObject['native'] && adObject['native'].impressionTrackers;\n\n    if (adObject['native'] && adObject['native'].javascriptTrackers) {\n      insertHtmlIntoIframe(adObject['native'].javascriptTrackers);\n    }\n  }\n\n  (trackers || []).forEach(triggerPixel);\n}\n\n/**\n * Gets native targeting key-value pairs\n * @param {Object} bid\n * @return {Object} targeting\n */\nexport function getNativeTargeting(bid, bidReq) {\n  let keyValues = {};\n\n  Object.keys(bid['native']).forEach(asset => {\n    const key = CONSTANTS.NATIVE_KEYS[asset];\n    let value = bid['native'][asset];\n\n    // native image-type assets can be a string or an object with a url prop\n    if (typeof value === 'object' && value.url) {\n      value = value.url;\n    }\n\n    const sendPlaceholder = deepAccess(\n      bidReq,\n      `mediaTypes.native.${asset}.sendId`\n    );\n\n    if (sendPlaceholder) {\n      const placeholder = `${key}:${bid.adId}`;\n      value = placeholder;\n    }\n\n    if (key && value) {\n      keyValues[key] = value;\n    }\n  });\n\n  return keyValues;\n}\n\n/**\n * Constructs a message object containing asset values for each of the\n * requested data keys.\n */\nexport function getAssetMessage(data, adObject) {\n  const message = {\n    message: 'assetResponse',\n    adId: data.adId,\n    assets: [],\n  };\n\n  data.assets.forEach(asset => {\n    const key = getKeyByValue(CONSTANTS.NATIVE_KEYS, asset);\n    const value = adObject.native[key];\n\n    message.assets.push({ key, value });\n  });\n\n  return message;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/native.js","import {parse as parseURL, format as formatURL} from './url';\nimport { config } from './config';\n\nvar utils = require('./utils');\n\nconst XHR_DONE = 4;\n\n/**\n * Simple IE9+ and cross-browser ajax request function\n * Note: x-domain requests in IE9 do not support the use of cookies\n *\n * @param url string url\n * @param callback {object | function} callback\n * @param data mixed data\n * @param options object\n */\nexport const ajax = ajaxBuilder();\n\nexport function ajaxBuilder(timeout = 3000, {request, done} = {}) {\n  return function(url, callback, data, options = {}) {\n    try {\n      let x;\n      let method = options.method || (data ? 'POST' : 'GET');\n      let parser = document.createElement('a');\n      parser.href = url;\n\n      let callbacks = typeof callback === 'object' && callback !== null ? callback : {\n        success: function() {\n          utils.logMessage('xhr success');\n        },\n        error: function(e) {\n          utils.logError('xhr error', null, e);\n        }\n      };\n\n      if (typeof callback === 'function') {\n        callbacks.success = callback;\n      }\n\n      x = new window.XMLHttpRequest();\n\n      x.onreadystatechange = function () {\n        if (x.readyState === XHR_DONE) {\n          if (typeof done === 'function') {\n            done(parser.origin);\n          }\n          let status = x.status;\n          if ((status >= 200 && status < 300) || status === 304) {\n            callbacks.success(x.responseText, x);\n          } else {\n            callbacks.error(x.statusText, x);\n          }\n        }\n      };\n\n      // Disabled timeout temporarily to avoid xhr failed requests. https://github.com/prebid/Prebid.js/issues/2648\n      if (!config.getConfig('disableAjaxTimeout')) {\n        x.ontimeout = function () {\n          utils.logError('  xhr timeout after ', x.timeout, 'ms');\n        };\n      }\n\n      if (method === 'GET' && data) {\n        let urlInfo = parseURL(url, options);\n        Object.assign(urlInfo.search, data);\n        url = formatURL(urlInfo);\n      }\n\n      x.open(method, url, true);\n      // IE needs timoeut to be set after open - see #1410\n      // Disabled timeout temporarily to avoid xhr failed requests. https://github.com/prebid/Prebid.js/issues/2648\n      if (!config.getConfig('disableAjaxTimeout')) {\n        x.timeout = timeout;\n      }\n\n      if (options.withCredentials) {\n        x.withCredentials = true;\n      }\n      utils._each(options.customHeaders, (value, header) => {\n        x.setRequestHeader(header, value);\n      });\n      if (options.preflight) {\n        x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      }\n      x.setRequestHeader('Content-Type', options.contentType || 'text/plain');\n\n      if (typeof request === 'function') {\n        request(parser.origin);\n      }\n\n      if (method === 'POST' && data) {\n        x.send(data);\n      } else {\n        x.send();\n      }\n    } catch (error) {\n      utils.logError('xhr construction', error);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ajax.js","/**\n * events.js\n */\nvar utils = require('./utils');\nvar CONSTANTS = require('./constants');\nvar slice = Array.prototype.slice;\nvar push = Array.prototype.push;\n\n// define entire events\n// var allEvents = ['bidRequested','bidResponse','bidWon','bidTimeout'];\nvar allEvents = utils._map(CONSTANTS.EVENTS, function (v) {\n  return v;\n});\n\nvar idPaths = CONSTANTS.EVENT_ID_PATHS;\n\n// keep a record of all events fired\nvar eventsFired = [];\n\nmodule.exports = (function () {\n  var _handlers = {};\n  var _public = {};\n\n  /**\n   *\n   * @param {String} eventString  The name of the event.\n   * @param {Array} args  The payload emitted with the event.\n   * @private\n   */\n  function _dispatch(eventString, args) {\n    utils.logMessage('Emitting event for: ' + eventString);\n\n    var eventPayload = args[0] || {};\n    var idPath = idPaths[eventString];\n    var key = eventPayload[idPath];\n    var event = _handlers[eventString] || { que: [] };\n    var eventKeys = utils._map(event, function (v, k) {\n      return k;\n    });\n\n    var callbacks = [];\n\n    // record the event:\n    eventsFired.push({\n      eventType: eventString,\n      args: eventPayload,\n      id: key\n    });\n\n    /** Push each specific callback to the `callbacks` array.\n     * If the `event` map has a key that matches the value of the\n     * event payload id path, e.g. `eventPayload[idPath]`, then apply\n     * each function in the `que` array as an argument to push to the\n     * `callbacks` array\n     * */\n    if (key && utils.contains(eventKeys, key)) {\n      push.apply(callbacks, event[key].que);\n    }\n\n    /** Push each general callback to the `callbacks` array. */\n    push.apply(callbacks, event.que);\n\n    /** call each of the callbacks */\n    utils._each(callbacks, function (fn) {\n      if (!fn) return;\n      try {\n        fn.apply(null, args);\n      } catch (e) {\n        utils.logError('Error executing handler:', 'events.js', e);\n      }\n    });\n  }\n\n  function _checkAvailableEvent(event) {\n    return utils.contains(allEvents, event);\n  }\n\n  _public.on = function (eventString, handler, id) {\n    // check whether available event or not\n    if (_checkAvailableEvent(eventString)) {\n      var event = _handlers[eventString] || { que: [] };\n\n      if (id) {\n        event[id] = event[id] || { que: [] };\n        event[id].que.push(handler);\n      } else {\n        event.que.push(handler);\n      }\n\n      _handlers[eventString] = event;\n    } else {\n      utils.logError('Wrong event name : ' + eventString + ' Valid event names :' + allEvents);\n    }\n  };\n\n  _public.emit = function (event) {\n    var args = slice.call(arguments, 1);\n    _dispatch(event, args);\n  };\n\n  _public.off = function (eventString, handler, id) {\n    var event = _handlers[eventString];\n\n    if (utils.isEmpty(event) || (utils.isEmpty(event.que) && utils.isEmpty(event[id]))) {\n      return;\n    }\n\n    if (id && (utils.isEmpty(event[id]) || utils.isEmpty(event[id].que))) {\n      return;\n    }\n\n    if (id) {\n      utils._each(event[id].que, function (_handler) {\n        var que = event[id].que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    } else {\n      utils._each(event.que, function (_handler) {\n        var que = event.que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    }\n\n    _handlers[eventString] = event;\n  };\n\n  _public.get = function () {\n    return _handlers;\n  };\n\n  /**\n   * This method can return a copy of all the events fired\n   * @return {Array} array of events fired\n   */\n  _public.getEvents = function () {\n    var arrayCopy = [];\n    utils._each(eventsFired, function (value) {\n      var newProp = Object.assign({}, value);\n      arrayCopy.push(newProp);\n    });\n\n    return arrayCopy;\n  };\n\n  return _public;\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./src/events.js","/**\n * This file contains the valid Media Types in Prebid.\n *\n * All adapters are assumed to support banner ads. Other media types are specified by Adapters when they\n * register themselves with prebid-core.\n */\n\n/**\n * @typedef {('native'|'video'|'banner')} MediaType\n * @typedef {('adpod')} VideoContext\n */\n\n/** @type MediaType */\nexport const NATIVE = 'native';\n/** @type MediaType */\nexport const VIDEO = 'video';\n/** @type MediaType */\nexport const BANNER = 'banner';\n/** @type VideoContext */\nexport const ADPOD = 'adpod';\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediaTypes.js","/* eslint-disable no-unused-vars */\nimport { spec } from '../modules/appnexusBidAdapter';\n\nconsole.log('spec', spec);\n\nwindow.requestBid = function (videoAdUnit) {\n  console.log('videoAdUnit', videoAdUnit);\n  const bidRequests = getBidRequests();\n  const bidderRequest = getBidderRequest();\n  const request = spec.buildRequests(bidRequests, bidderRequest);\n  console.log('request', request);\n  processRequest(request).then(response => {\n    console.log('response', response);\n    const bids = spec.interpretResponse({ body: response }, { bidderRequest });\n    console.log('bids', bids);\n  });\n}\n\n// generated bid requests\nfunction getBidRequests() {\n  return [\n    {\n      'bidder': 'appnexus',\n      'params': {\n        'placementId': '9333431',\n        'video': {\n          'skipppable': false,\n          'playback_methods': [\n            'auto_play_sound_off'\n          ]\n        }\n      },\n      'crumbs': {\n        'pubcid': 'c572e8b7-8252-44b3-a6ac-f85db2430455'\n      },\n      'mediaTypes': {\n        'video': {\n          'context': 'instream'\n        }\n      },\n      'adUnitCode': 'video1',\n      'transactionId': '5cb91f11-3181-4c87-81bf-0cfa6f23696a',\n      'sizes': [\n        640,\n        480\n      ],\n      'bidId': '2f307fc9cf206f',\n      'bidderRequestId': '125cfd48fefe06',\n      'auctionId': '5b41e1ea-8c7f-4ed0-b6f4-5530789cf58f'\n    }\n  ];\n}\n\nfunction getBidderRequest() {\n  return {\n    'bidderCode': 'appnexus',\n    'auctionId': '5b41e1ea-8c7f-4ed0-b6f4-5530789cf58f',\n    'bidderRequestId': '125cfd48fefe06',\n    'bids': [\n      {\n        'bidder': 'appnexus',\n        'params': {\n          'placementId': '9333431',\n          'video': {\n            'skipppable': false,\n            'playback_methods': [\n              'auto_play_sound_off'\n            ]\n          }\n        },\n        'crumbs': {\n          'pubcid': 'c572e8b7-8252-44b3-a6ac-f85db2430455'\n        },\n        'mediaTypes': {\n          'video': {\n            'context': 'instream'\n          }\n        },\n        'adUnitCode': 'video1',\n        'transactionId': '5cb91f11-3181-4c87-81bf-0cfa6f23696a',\n        'sizes': [\n          640,\n          480\n        ],\n        'bidId': '2f307fc9cf206f',\n        'bidderRequestId': '125cfd48fefe06',\n        'auctionId': '5b41e1ea-8c7f-4ed0-b6f4-5530789cf58f'\n      }\n    ],\n    'auctionStart': 1551439885900,\n    'timeout': 700,\n    'start': 1551439885902,\n    'doneCbCallCount': 0\n  };\n}\n\nfunction processRequest(request) {\n  return fetch(request.url, {\n    method: request.method,\n    headers: {\n      contentType: 'text/plain',\n    },\n    body: request.data,\n  }).then(response => response.text()).then(data => {\n    return JSON.parse(data);\n  });\n}\n\n//   pbjs.requestBids({\n//     timeout : 700,\n//     bidsBackHandler : function(bids) {\n//       var videoUrl = pbjs.adServers.dfp.buildVideoUrl({\n//         adUnit: videoAdUnit,\n//         params: {\n//           iu: '/19968336/prebid_cache_video_adunit'\n//         }\n//       });\n\n//       invokeVideoPlayer(videoUrl);\n//     }\n//   });\n\n\n\n// WEBPACK FOOTER //\n// ./cedato/prebid-cedato.js","import { Renderer } from '../src/Renderer';\nimport * as utils from '../src/utils';\nimport { config } from '../src/config';\nimport { registerBidder, getIabSubCategory } from '../src/adapters/bidderFactory';\nimport { BANNER, NATIVE, VIDEO, ADPOD } from '../src/mediaTypes';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst BIDDER_CODE = 'appnexus';\nconst URL = '//ib.adnxs.com/ut/v3/prebid';\nconst VIDEO_TARGETING = ['id', 'mimes', 'minduration', 'maxduration',\n  'startdelay', 'skippable', 'playback_method', 'frameworks'];\nconst USER_PARAMS = ['age', 'external_uid', 'segments', 'gender', 'dnt', 'language'];\nconst APP_DEVICE_PARAMS = ['geo', 'device_id']; // appid is collected separately\nconst DEBUG_PARAMS = ['enabled', 'dongle', 'member_id', 'debug_timeout'];\nconst NATIVE_MAPPING = {\n  body: 'description',\n  body2: 'desc2',\n  cta: 'ctatext',\n  image: {\n    serverName: 'main_image',\n    requiredParams: { required: true },\n    minimumParams: { sizes: [{}] },\n  },\n  icon: {\n    serverName: 'icon',\n    requiredParams: { required: true },\n    minimumParams: { sizes: [{}] },\n  },\n  sponsoredBy: 'sponsored_by',\n  privacyLink: 'privacy_link',\n  salePrice: 'saleprice',\n  displayUrl: 'displayurl'\n};\nconst SOURCE = 'pbjs';\nconst MAX_IMPS_PER_REQUEST = 15;\nconst mappingFileUrl = '//acdn.adnxs.com/prebid/appnexus-mapping/mappings.json';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['appnexusAst', 'brealtime', 'emxdigital', 'pagescience', 'defymedia', 'gourmetads', 'matomy', 'featureforward', 'oftmedia', 'districtm'],\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.placementId || (bid.params.member && bid.params.invCode));\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests, bidderRequest) {\n    const tags = bidRequests.map(bidToTag);\n    const userObjBid = find(bidRequests, hasUserInfo);\n    let userObj;\n    if (userObjBid) {\n      userObj = {};\n      Object.keys(userObjBid.params.user)\n        .filter(param => includes(USER_PARAMS, param))\n        .forEach(param => userObj[param] = userObjBid.params.user[param]);\n    }\n\n    const appDeviceObjBid = find(bidRequests, hasAppDeviceInfo);\n    let appDeviceObj;\n    if (appDeviceObjBid && appDeviceObjBid.params && appDeviceObjBid.params.app) {\n      appDeviceObj = {};\n      Object.keys(appDeviceObjBid.params.app)\n        .filter(param => includes(APP_DEVICE_PARAMS, param))\n        .forEach(param => appDeviceObj[param] = appDeviceObjBid.params.app[param]);\n    }\n\n    const appIdObjBid = find(bidRequests, hasAppId);\n    let appIdObj;\n    if (appIdObjBid && appIdObjBid.params && appDeviceObjBid.params.app && appDeviceObjBid.params.app.id) {\n      appIdObj = {\n        appid: appIdObjBid.params.app.id\n      };\n    }\n\n    let debugObj = {};\n    let debugObjParams = {};\n    const debugCookieName = 'apn_prebid_debug';\n    const debugCookie = utils.getCookie(debugCookieName) || null;\n\n    if (debugCookie) {\n      try {\n        debugObj = JSON.parse(debugCookie);\n      } catch (e) {\n        utils.logError('AppNexus Debug Auction Cookie Error:\\n\\n' + e);\n      }\n    } else {\n      const debugBidRequest = find(bidRequests, hasDebug);\n      if (debugBidRequest && debugBidRequest.debug) {\n        debugObj = debugBidRequest.debug;\n      }\n    }\n\n    if (debugObj && debugObj.enabled) {\n      Object.keys(debugObj)\n        .filter(param => includes(DEBUG_PARAMS, param))\n        .forEach(param => {\n          debugObjParams[param] = debugObj[param];\n        });\n    }\n\n    const memberIdBid = find(bidRequests, hasMemberId);\n    const member = memberIdBid ? parseInt(memberIdBid.params.member, 10) : 0;\n\n    const payload = {\n      tags: [...tags],\n      user: userObj,\n      sdk: {\n        source: SOURCE,\n        version: '$prebid.version$'\n      }\n    };\n\n    if (member > 0) {\n      payload.member_id = member;\n    }\n\n    if (appDeviceObjBid) {\n      payload.device = appDeviceObj\n    }\n    if (appIdObjBid) {\n      payload.app = appIdObj;\n    }\n\n    if (config.getConfig('adpod.brandCategoryExclusion')) {\n      payload.brand_category_uniqueness = true;\n    }\n\n    if (debugObjParams.enabled) {\n      payload.debug = debugObjParams;\n      utils.logInfo('AppNexus Debug Auction Settings:\\n\\n' + JSON.stringify(debugObjParams, null, 4));\n    }\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      // note - objects for impbus use underscore instead of camelCase\n      payload.gdpr_consent = {\n        consent_string: bidderRequest.gdprConsent.consentString,\n        consent_required: bidderRequest.gdprConsent.gdprApplies\n      };\n    }\n\n    if (bidderRequest && bidderRequest.refererInfo) {\n      let refererinfo = {\n        rd_ref: encodeURIComponent(bidderRequest.refererInfo.referer),\n        rd_top: bidderRequest.refererInfo.reachedTop,\n        rd_ifs: bidderRequest.refererInfo.numIframes,\n        rd_stk: bidderRequest.refererInfo.stack.map((url) => encodeURIComponent(url)).join(',')\n      }\n      payload.referrer_detection = refererinfo;\n    }\n\n    const hasAdPodBid = find(bidRequests, hasAdPod);\n    if (hasAdPodBid) {\n      bidRequests.filter(hasAdPod).forEach(adPodBid => {\n        const adPodTags = createAdPodRequest(tags, adPodBid);\n        // don't need the original adpod placement because it's in adPodTags\n        const nonPodTags = payload.tags.filter(tag => tag.uuid !== adPodBid.bidId);\n        payload.tags = [...nonPodTags, ...adPodTags];\n      });\n    }\n\n    const request = formatRequest(payload, bidderRequest);\n    return request;\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, {bidderRequest}) {\n    serverResponse = serverResponse.body;\n    const bids = [];\n    if (!serverResponse || serverResponse.error) {\n      let errorMessage = `in response for ${bidderRequest.bidderCode} adapter`;\n      if (serverResponse && serverResponse.error) { errorMessage += `: ${serverResponse.error}`; }\n      utils.logError(errorMessage);\n      return bids;\n    }\n\n    if (serverResponse.tags) {\n      serverResponse.tags.forEach(serverBid => {\n        const rtbBid = getRtbBid(serverBid);\n        if (rtbBid) {\n          if (rtbBid.cpm !== 0 && includes(this.supportedMediaTypes, rtbBid.ad_type)) {\n            const bid = newBid(serverBid, rtbBid, bidderRequest);\n            bid.mediaType = parseMediaType(rtbBid);\n            bids.push(bid);\n          }\n        }\n      });\n    }\n\n    if (serverResponse.debug && serverResponse.debug.debug_info) {\n      let debugHeader = 'AppNexus Debug Auction for Prebid\\n\\n'\n      let debugText = debugHeader + serverResponse.debug.debug_info\n      debugText = debugText\n        .replace(/(<td>|<th>)/gm, '\\t') // Tables\n        .replace(/(<\\/td>|<\\/th>)/gm, '\\n') // Tables\n        .replace(/^<br>/gm, '') // Remove leading <br>\n        .replace(/(<br>\\n|<br>)/gm, '\\n') // <br>\n        .replace(/<h1>(.*)<\\/h1>/gm, '\\n\\n===== $1 =====\\n\\n') // Header H1\n        .replace(/<h[2-6]>(.*)<\\/h[2-6]>/gm, '\\n\\n*** $1 ***\\n\\n') // Headers\n        .replace(/(<([^>]+)>)/igm, ''); // Remove any other tags\n      utils.logMessage('https://console.appnexus.com/docs/understanding-the-debug-auction');\n      utils.logMessage(debugText);\n    }\n\n    return bids;\n  },\n\n  /**\n   * @typedef {Object} mappingFileInfo\n   * @property {string} url  mapping file json url\n   * @property {number} refreshInDays prebid stores mapping data in localstorage so you can return in how many days you want to update value stored in localstorage.\n   * @property {string} localStorageKey unique key to store your mapping json in localstorage\n   */\n\n  /**\n   * Returns mapping file info. This info will be used by bidderFactory to preload mapping file and store data in local storage\n   * @returns {mappingFileInfo}\n   */\n  getMappingFileInfo: function() {\n    return {\n      url: mappingFileUrl,\n      refreshInDays: 7\n    }\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html'\n      }];\n    }\n  },\n\n  transformBidParams: function(params, isOpenRtb) {\n    params = utils.convertTypes({\n      'member': 'string',\n      'invCode': 'string',\n      'placementId': 'number',\n      'keywords': utils.transformBidderParamKeywords\n    }, params);\n\n    if (isOpenRtb) {\n      params.use_pmt_rule = (typeof params.usePaymentRule === 'boolean') ? params.usePaymentRule : false;\n      if (params.usePaymentRule) { delete params.usePaymentRule; }\n\n      if (isPopulatedArray(params.keywords)) {\n        params.keywords.forEach(deleteValues);\n      }\n\n      Object.keys(params).forEach(paramKey => {\n        let convertedKey = utils.convertCamelToUnderscore(paramKey);\n        if (convertedKey !== paramKey) {\n          params[convertedKey] = params[paramKey];\n          delete params[paramKey];\n        }\n      });\n    }\n\n    return params;\n  }\n}\n\nfunction isPopulatedArray(arr) {\n  return !!(utils.isArray(arr) && arr.length > 0);\n}\n\nfunction deleteValues(keyPairObj) {\n  if (isPopulatedArray(keyPairObj.value) && keyPairObj.value[0] === '') {\n    delete keyPairObj.value;\n  }\n}\n\nfunction formatRequest(payload, bidderRequest) {\n  let request = [];\n\n  if (payload.tags.length > MAX_IMPS_PER_REQUEST) {\n    const clonedPayload = utils.deepClone(payload);\n\n    utils.chunk(payload.tags, MAX_IMPS_PER_REQUEST).forEach(tags => {\n      clonedPayload.tags = tags;\n      const payloadString = JSON.stringify(clonedPayload);\n      request.push({\n        method: 'POST',\n        url: URL,\n        data: payloadString,\n        bidderRequest\n      });\n    });\n  } else {\n    const payloadString = JSON.stringify(payload);\n    request = {\n      method: 'POST',\n      url: URL,\n      data: payloadString,\n      bidderRequest\n    };\n  }\n\n  return request;\n}\n\nfunction newRenderer(adUnitCode, rtbBid, rendererOptions = {}) {\n  const renderer = Renderer.install({\n    id: rtbBid.renderer_id,\n    url: rtbBid.renderer_url,\n    config: rendererOptions,\n    loaded: false,\n    adUnitCode\n  });\n\n  try {\n    renderer.setRender(outstreamRender);\n  } catch (err) {\n    utils.logWarn('Prebid Error calling setRender on renderer', err);\n  }\n\n  renderer.setEventHandlers({\n    impression: () => utils.logMessage('AppNexus outstream video impression event'),\n    loaded: () => utils.logMessage('AppNexus outstream video loaded event'),\n    ended: () => {\n      utils.logMessage('AppNexus outstream renderer video event');\n      document.querySelector(`#${adUnitCode}`).style.display = 'none';\n    }\n  });\n  return renderer;\n}\n\n/**\n * Unpack the Server's Bid into a Prebid-compatible one.\n * @param serverBid\n * @param rtbBid\n * @param bidderRequest\n * @return Bid\n */\nfunction newBid(serverBid, rtbBid, bidderRequest) {\n  const bidRequest = utils.getBidRequest(serverBid.uuid, [bidderRequest]);\n  const bid = {\n    requestId: serverBid.uuid,\n    cpm: rtbBid.cpm,\n    creativeId: rtbBid.creative_id,\n    dealId: rtbBid.deal_id,\n    currency: 'USD',\n    netRevenue: true,\n    ttl: 300,\n    adUnitCode: bidRequest.adUnitCode,\n    appnexus: {\n      buyerMemberId: rtbBid.buyer_member_id,\n      dealPriority: rtbBid.deal_priority,\n      dealCode: rtbBid.deal_code\n    }\n  };\n\n  if (rtbBid.rtb.video) {\n    Object.assign(bid, {\n      width: rtbBid.rtb.video.player_width,\n      height: rtbBid.rtb.video.player_height,\n      vastUrl: rtbBid.rtb.video.asset_url,\n      vastImpUrl: rtbBid.notify_url,\n      ttl: 3600\n    });\n\n    const videoContext = utils.deepAccess(bidRequest, 'mediaTypes.video.context');\n    if (videoContext === ADPOD) {\n      const iabSubCatId = getIabSubCategory(bidRequest.bidder, rtbBid.brand_category_id);\n      bid.meta = {\n        iabSubCatId\n      };\n\n      bid.video = {\n        context: ADPOD,\n        durationSeconds: Math.floor(rtbBid.rtb.video.duration_ms / 1000),\n      };\n    }\n\n    // This supports Outstream Video\n    if (rtbBid.renderer_url) {\n      const rendererOptions = utils.deepAccess(\n        bidderRequest.bids[0],\n        'renderer.options'\n      );\n\n      Object.assign(bid, {\n        adResponse: serverBid,\n        renderer: newRenderer(bid.adUnitCode, rtbBid, rendererOptions)\n      });\n      bid.adResponse.ad = bid.adResponse.ads[0];\n      bid.adResponse.ad.video = bid.adResponse.ad.rtb.video;\n    }\n  } else if (rtbBid.rtb[NATIVE]) {\n    const nativeAd = rtbBid.rtb[NATIVE];\n    bid[NATIVE] = {\n      title: nativeAd.title,\n      body: nativeAd.desc,\n      body2: nativeAd.desc2,\n      cta: nativeAd.ctatext,\n      rating: nativeAd.rating,\n      sponsoredBy: nativeAd.sponsored,\n      privacyLink: nativeAd.privacy_link,\n      address: nativeAd.address,\n      downloads: nativeAd.downloads,\n      likes: nativeAd.likes,\n      phone: nativeAd.phone,\n      price: nativeAd.price,\n      salePrice: nativeAd.saleprice,\n      clickUrl: nativeAd.link.url,\n      displayUrl: nativeAd.displayurl,\n      clickTrackers: nativeAd.link.click_trackers,\n      impressionTrackers: nativeAd.impression_trackers,\n      javascriptTrackers: nativeAd.javascript_trackers\n    };\n    if (nativeAd.main_img) {\n      bid['native'].image = {\n        url: nativeAd.main_img.url,\n        height: nativeAd.main_img.height,\n        width: nativeAd.main_img.width,\n      };\n    }\n    if (nativeAd.icon) {\n      bid['native'].icon = {\n        url: nativeAd.icon.url,\n        height: nativeAd.icon.height,\n        width: nativeAd.icon.width,\n      };\n    }\n  } else {\n    Object.assign(bid, {\n      width: rtbBid.rtb.banner.width,\n      height: rtbBid.rtb.banner.height,\n      ad: rtbBid.rtb.banner.content\n    });\n    try {\n      const url = rtbBid.rtb.trackers[0].impression_urls[0];\n      const tracker = utils.createTrackPixelHtml(url);\n      bid.ad += tracker;\n    } catch (error) {\n      utils.logError('Error appending tracking pixel', error);\n    }\n  }\n\n  return bid;\n}\n\nfunction bidToTag(bid) {\n  const tag = {};\n  tag.sizes = transformSizes(bid.sizes);\n  tag.primary_size = tag.sizes[0];\n  tag.ad_types = [];\n  tag.uuid = bid.bidId;\n  if (bid.params.placementId) {\n    tag.id = parseInt(bid.params.placementId, 10);\n  } else {\n    tag.code = bid.params.invCode;\n  }\n  tag.allow_smaller_sizes = bid.params.allowSmallerSizes || false;\n  tag.use_pmt_rule = bid.params.usePaymentRule || false\n  tag.prebid = true;\n  tag.disable_psa = true;\n  if (bid.params.reserve) {\n    tag.reserve = bid.params.reserve;\n  }\n  if (bid.params.position) {\n    tag.position = {'above': 1, 'below': 2}[bid.params.position] || 0;\n  }\n  if (bid.params.trafficSourceCode) {\n    tag.traffic_source_code = bid.params.trafficSourceCode;\n  }\n  if (bid.params.privateSizes) {\n    tag.private_sizes = transformSizes(bid.params.privateSizes);\n  }\n  if (bid.params.supplyType) {\n    tag.supply_type = bid.params.supplyType;\n  }\n  if (bid.params.pubClick) {\n    tag.pubclick = bid.params.pubClick;\n  }\n  if (bid.params.extInvCode) {\n    tag.ext_inv_code = bid.params.extInvCode;\n  }\n  if (bid.params.externalImpId) {\n    tag.external_imp_id = bid.params.externalImpId;\n  }\n  if (!utils.isEmpty(bid.params.keywords)) {\n    let keywords = utils.transformBidderParamKeywords(bid.params.keywords);\n\n    if (keywords.length > 0) {\n      keywords.forEach(deleteValues);\n    }\n    tag.keywords = keywords;\n  }\n\n  if (bid.mediaType === NATIVE || utils.deepAccess(bid, `mediaTypes.${NATIVE}`)) {\n    tag.ad_types.push(NATIVE);\n\n    if (bid.nativeParams) {\n      const nativeRequest = buildNativeRequest(bid.nativeParams);\n      tag[NATIVE] = {layouts: [nativeRequest]};\n    }\n  }\n\n  const videoMediaType = utils.deepAccess(bid, `mediaTypes.${VIDEO}`);\n  const context = utils.deepAccess(bid, 'mediaTypes.video.context');\n\n  if (bid.mediaType === VIDEO || videoMediaType) {\n    tag.ad_types.push(VIDEO);\n  }\n\n  // instream gets vastUrl, outstream gets vastXml\n  if (bid.mediaType === VIDEO || (videoMediaType && context !== 'outstream')) {\n    tag.require_asset_url = true;\n  }\n\n  if (bid.params.video) {\n    tag.video = {};\n    // place any valid video params on the tag\n    Object.keys(bid.params.video)\n      .filter(param => includes(VIDEO_TARGETING, param))\n      .forEach(param => tag.video[param] = bid.params.video[param]);\n  }\n\n  if (\n    (utils.isEmpty(bid.mediaType) && utils.isEmpty(bid.mediaTypes)) ||\n    (bid.mediaType === BANNER || (bid.mediaTypes && bid.mediaTypes[BANNER]))\n  ) {\n    tag.ad_types.push(BANNER);\n  }\n\n  return tag;\n}\n\n/* Turn bid request sizes into ut-compatible format */\nfunction transformSizes(requestSizes) {\n  let sizes = [];\n  let sizeObj = {};\n\n  if (utils.isArray(requestSizes) && requestSizes.length === 2 &&\n    !utils.isArray(requestSizes[0])) {\n    sizeObj.width = parseInt(requestSizes[0], 10);\n    sizeObj.height = parseInt(requestSizes[1], 10);\n    sizes.push(sizeObj);\n  } else if (typeof requestSizes === 'object') {\n    for (let i = 0; i < requestSizes.length; i++) {\n      let size = requestSizes[i];\n      sizeObj = {};\n      sizeObj.width = parseInt(size[0], 10);\n      sizeObj.height = parseInt(size[1], 10);\n      sizes.push(sizeObj);\n    }\n  }\n\n  return sizes;\n}\n\nfunction hasUserInfo(bid) {\n  return !!bid.params.user;\n}\n\nfunction hasMemberId(bid) {\n  return !!parseInt(bid.params.member, 10);\n}\n\nfunction hasAppDeviceInfo(bid) {\n  if (bid.params) {\n    return !!bid.params.app\n  }\n}\n\nfunction hasAppId(bid) {\n  if (bid.params && bid.params.app) {\n    return !!bid.params.app.id\n  }\n  return !!bid.params.app\n}\n\nfunction hasDebug(bid) {\n  return !!bid.debug\n}\n\nfunction hasAdPod(bid) {\n  return (\n    bid.mediaTypes &&\n    bid.mediaTypes.video &&\n    bid.mediaTypes.video.context === ADPOD\n  );\n}\n\n/**\n * Expand an adpod placement into a set of request objects according to the\n * total adpod duration and the range of duration seconds. Sets minduration/\n * maxduration video property according to requireExactDuration configuration\n */\nfunction createAdPodRequest(tags, adPodBid) {\n  const { durationRangeSec, requireExactDuration } = adPodBid.mediaTypes.video;\n\n  const numberOfPlacements = getAdPodPlacementNumber(adPodBid.mediaTypes.video);\n  const maxDuration = utils.getMaxValueFromArray(durationRangeSec);\n\n  const tagToDuplicate = tags.filter(tag => tag.uuid === adPodBid.bidId);\n  let request = utils.fill(...tagToDuplicate, numberOfPlacements);\n\n  if (requireExactDuration) {\n    const divider = Math.ceil(numberOfPlacements / durationRangeSec.length);\n    const chunked = utils.chunk(request, divider);\n\n    // each configured duration is set as min/maxduration for a subset of requests\n    durationRangeSec.forEach((duration, index) => {\n      chunked[index].map(tag => {\n        setVideoProperty(tag, 'minduration', duration);\n        setVideoProperty(tag, 'maxduration', duration);\n      });\n    });\n  } else {\n    // all maxdurations should be the same\n    request.map(tag => setVideoProperty(tag, 'maxduration', maxDuration));\n  }\n\n  return request;\n}\n\nfunction getAdPodPlacementNumber(videoParams) {\n  const { adPodDurationSec, durationRangeSec, requireExactDuration } = videoParams;\n  const minAllowedDuration = utils.getMinValueFromArray(durationRangeSec);\n  const numberOfPlacements = Math.floor(adPodDurationSec / minAllowedDuration);\n\n  return requireExactDuration\n    ? Math.max(numberOfPlacements, durationRangeSec.length)\n    : numberOfPlacements;\n}\n\nfunction setVideoProperty(tag, key, value) {\n  if (utils.isEmpty(tag.video)) { tag.video = {}; }\n  tag.video[key] = value;\n}\n\nfunction getRtbBid(tag) {\n  return tag && tag.ads && tag.ads.length && find(tag.ads, ad => ad.rtb);\n}\n\nfunction buildNativeRequest(params) {\n  const request = {};\n\n  // map standard prebid native asset identifier to /ut parameters\n  // e.g., tag specifies `body` but /ut only knows `description`.\n  // mapping may be in form {tag: '<server name>'} or\n  // {tag: {serverName: '<server name>', requiredParams: {...}}}\n  Object.keys(params).forEach(key => {\n    // check if one of the <server name> forms is used, otherwise\n    // a mapping wasn't specified so pass the key straight through\n    const requestKey =\n      (NATIVE_MAPPING[key] && NATIVE_MAPPING[key].serverName) ||\n      NATIVE_MAPPING[key] ||\n      key;\n\n    // required params are always passed on request\n    const requiredParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].requiredParams;\n    request[requestKey] = Object.assign({}, requiredParams, params[key]);\n\n    // minimum params are passed if no non-required params given on adunit\n    const minimumParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].minimumParams;\n\n    if (requiredParams && minimumParams) {\n      // subtract required keys from adunit keys\n      const adunitKeys = Object.keys(params[key]);\n      const requiredKeys = Object.keys(requiredParams);\n      const remaining = adunitKeys.filter(key => !includes(requiredKeys, key));\n\n      // if none are left over, the minimum params needs to be sent\n      if (remaining.length === 0) {\n        request[requestKey] = Object.assign({}, request[requestKey], minimumParams);\n      }\n    }\n  });\n\n  return request;\n}\n\nfunction outstreamRender(bid) {\n  // push to render queue because ANOutstreamVideo may not be loaded yet\n  bid.renderer.push(() => {\n    window.ANOutstreamVideo.renderAd({\n      tagId: bid.adResponse.tag_id,\n      sizes: [bid.getSize().split('x')],\n      targetId: bid.adUnitCode, // target div id to render video\n      uuid: bid.adResponse.uuid,\n      adResponse: bid.adResponse,\n      rendererOptions: bid.renderer.getConfig()\n    }, handleOutstreamRendererEvents.bind(null, bid));\n  });\n}\n\nfunction handleOutstreamRendererEvents(bid, id, eventName) {\n  bid.renderer.handleVideoEvent({ id, eventName });\n}\n\nfunction parseMediaType(rtbBid) {\n  const adType = rtbBid.ad_type;\n  if (adType === VIDEO) {\n    return VIDEO;\n  } else if (adType === NATIVE) {\n    return NATIVE;\n  } else {\n    return BANNER;\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/appnexusBidAdapter.js","import { loadScript } from './adloader';\nimport * as utils from './utils';\nimport find from 'core-js/library/fn/array/find';\n\n/**\n * @typedef {object} Renderer\n *\n * A Renderer stores some functions which are used to render a particular Bid.\n * These are used in Outstream Video Bids, returned on the Bid by the adapter, and will\n * be used to render that bid unless the Publisher overrides them.\n */\n\nexport function Renderer(options) {\n  const { url, config, id, callback, loaded, adUnitCode } = options;\n  this.url = url;\n  this.config = config;\n  this.handlers = {};\n  this.id = id;\n\n  // a renderer may push to the command queue to delay rendering until the\n  // render function is loaded by loadScript, at which point the the command\n  // queue will be processed\n  this.loaded = loaded;\n  this.cmd = [];\n  this.push = func => {\n    if (typeof func !== 'function') {\n      utils.logError('Commands given to Renderer.push must be wrapped in a function');\n      return;\n    }\n    this.loaded ? func.call() : this.cmd.push(func);\n  };\n\n  // bidders may override this with the `callback` property given to `install`\n  this.callback = callback || (() => {\n    this.loaded = true;\n    this.process();\n  });\n\n  if (!isRendererDefinedOnAdUnit(adUnitCode)) {\n    // we expect to load a renderer url once only so cache the request to load script\n    loadScript(url, this.callback, true);\n  } else {\n    utils.logWarn(`External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ${adUnitCode}`);\n  }\n}\n\nRenderer.install = function({ url, config, id, callback, loaded, adUnitCode }) {\n  return new Renderer({ url, config, id, callback, loaded, adUnitCode });\n};\n\nRenderer.prototype.getConfig = function() {\n  return this.config;\n};\n\nRenderer.prototype.setRender = function(fn) {\n  this.render = fn;\n};\n\nRenderer.prototype.setEventHandlers = function(handlers) {\n  this.handlers = handlers;\n};\n\nRenderer.prototype.handleVideoEvent = function({ id, eventName }) {\n  if (typeof this.handlers[eventName] === 'function') {\n    this.handlers[eventName]();\n  }\n\n  utils.logMessage(`Prebid Renderer event for id ${id} type ${eventName}`);\n};\n\n/*\n * Calls functions that were pushed to the command queue before the\n * renderer was loaded by `loadScript`\n */\nRenderer.prototype.process = function() {\n  while (this.cmd.length > 0) {\n    try {\n      this.cmd.shift().call();\n    } catch (error) {\n      utils.logError('Error processing Renderer command: ', error);\n    }\n  }\n};\n\n/**\n * Checks whether creative rendering should be done by Renderer or not.\n * @param {Object} renderer Renderer object installed by adapter\n * @returns {Boolean}\n */\nexport function isRendererRequired(renderer) {\n  return !!(renderer && renderer.url);\n}\n\n/**\n * Render the bid returned by the adapter\n * @param {Object} renderer Renderer object installed by adapter\n * @param {Object} bid Bid response\n */\nexport function executeRenderer(renderer, bid) {\n  renderer.render(bid);\n}\n\nfunction isRendererDefinedOnAdUnit(adUnitCode) {\n  const adUnits = $$PREBID_GLOBAL$$.adUnits;\n  const adUnit = find(adUnits, adUnit => {\n    return adUnit.code === adUnitCode;\n  });\n  return !!(adUnit && adUnit.renderer && adUnit.renderer.url && adUnit.renderer.render);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Renderer.js","import includes from 'core-js/library/fn/array/includes';\nimport * as utils from './utils';\n\nconst _requestCache = {};\nconst _vendorWhitelist = [\n  'criteo',\n]\n\n/**\n * Loads external javascript. Can only be used if external JS is approved by Prebid. See https://github.com/prebid/prebid-js-external-js-template#policy\n * Each unique URL will be loaded at most 1 time.\n * @param {string} url the url to load\n * @param {string} moduleCode bidderCode or module code of the module requesting this resource\n */\nexport function loadExternalScript(url, moduleCode) {\n  if (!moduleCode || !url) {\n    utils.logError('cannot load external script without url and moduleCode');\n    return;\n  }\n  if (!includes(_vendorWhitelist, moduleCode)) {\n    utils.logError(`${moduleCode} not whitelisted for loading external JavaScript`);\n    return;\n  }\n  // only load each asset once\n  if (_requestCache[url]) {\n    return;\n  }\n\n  utils.logWarn(`module ${moduleCode} is loading external JavaScript`);\n  const script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.src = url;\n\n  utils.insertElement(script);\n  _requestCache[url] = true;\n};\n\n/**\n *\n * @deprecated\n * Do not use this function. Will be removed in the next release. If external resources are required, use #loadExternalScript instead.\n */\nexport function loadScript(tagSrc, callback, cacheRequest) {\n  // var noop = () => {};\n  //\n  // callback = callback || noop;\n  if (!tagSrc) {\n    utils.logError('Error attempting to request empty URL', 'adloader.js:loadScript');\n    return;\n  }\n\n  if (cacheRequest) {\n    if (_requestCache[tagSrc]) {\n      if (callback && typeof callback === 'function') {\n        if (_requestCache[tagSrc].loaded) {\n          // invokeCallbacks immediately\n          callback();\n        } else {\n          // queue the callback\n          _requestCache[tagSrc].callbacks.push(callback);\n        }\n      }\n    } else {\n      _requestCache[tagSrc] = {\n        loaded: false,\n        callbacks: []\n      };\n      if (callback && typeof callback === 'function') {\n        _requestCache[tagSrc].callbacks.push(callback);\n      }\n\n      requestResource(tagSrc, function () {\n        _requestCache[tagSrc].loaded = true;\n        try {\n          for (let i = 0; i < _requestCache[tagSrc].callbacks.length; i++) {\n            _requestCache[tagSrc].callbacks[i]();\n          }\n        } catch (e) {\n          utils.logError('Error executing callback', 'adloader.js:loadScript', e);\n        }\n      });\n    }\n  } else {\n    // trigger one time request\n    requestResource(tagSrc, callback);\n  }\n};\n\nfunction requestResource(tagSrc, callback) {\n  var jptScript = document.createElement('script');\n  jptScript.type = 'text/javascript';\n  jptScript.async = true;\n\n  // Execute a callback if necessary\n  if (callback && typeof callback === 'function') {\n    if (jptScript.readyState) {\n      jptScript.onreadystatechange = function () {\n        if (jptScript.readyState === 'loaded' || jptScript.readyState === 'complete') {\n          jptScript.onreadystatechange = null;\n          callback();\n        }\n      };\n    } else {\n      jptScript.onload = function () {\n        callback();\n      };\n    }\n  }\n\n  jptScript.src = tagSrc;\n\n  // add the new script tag to the page\n  var elToAppend = document.getElementsByTagName('head');\n  elToAppend = elToAppend.length ? elToAppend : document.getElementsByTagName('body');\n  if (elToAppend.length) {\n    elToAppend = elToAppend[0];\n    elToAppend.insertBefore(jptScript, elToAppend.firstChild);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adloader.js","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.array.includes.js\n// module id = 30\n// module chunks = 0","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 31\n// module chunks = 0","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 32\n// module chunks = 0","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 33\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 34\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 35\n// module chunks = 0","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 36\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 37\n// module chunks = 0","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 38\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 39\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 40\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 41\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 42\n// module chunks = 0","import find from 'core-js/library/fn/array/find';\nconst utils = require('./utils');\n\nconst _defaultPrecision = 2;\nconst _lgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.5\n  }]\n};\nconst _mgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.1\n  }]\n};\nconst _hgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.01\n  }]\n};\nconst _densePriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 3,\n    'increment': 0.01\n  },\n  {\n    'min': 3,\n    'max': 8,\n    'increment': 0.05\n  },\n  {\n    'min': 8,\n    'max': 20,\n    'increment': 0.5\n  }]\n};\nconst _autoPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.05\n  },\n  {\n    'min': 5,\n    'max': 10,\n    'increment': 0.1\n  },\n  {\n    'min': 10,\n    'max': 20,\n    'increment': 0.5\n  }]\n};\n\nfunction getPriceBucketString(cpm, customConfig, granularityMultiplier = 1) {\n  let cpmFloat = parseFloat(cpm);\n  if (isNaN(cpmFloat)) {\n    cpmFloat = '';\n  }\n\n  return {\n    low: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _lgPriceConfig, granularityMultiplier),\n    med: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _mgPriceConfig, granularityMultiplier),\n    high: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _hgPriceConfig, granularityMultiplier),\n    auto: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _autoPriceConfig, granularityMultiplier),\n    dense: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _densePriceConfig, granularityMultiplier),\n    custom: (cpmFloat === '') ? '' : getCpmStringValue(cpm, customConfig, granularityMultiplier)\n  };\n}\n\nfunction getCpmStringValue(cpm, config, granularityMultiplier) {\n  let cpmStr = '';\n  if (!isValidPriceConfig(config)) {\n    return cpmStr;\n  }\n  const cap = config.buckets.reduce((prev, curr) => {\n    if (prev.max > curr.max) {\n      return prev;\n    }\n    return curr;\n  }, {\n    'max': 0,\n  });\n  let bucket = find(config.buckets, bucket => {\n    if (cpm > cap.max * granularityMultiplier) {\n      // cpm exceeds cap, just return the cap.\n      let precision = bucket.precision;\n      if (typeof precision === 'undefined') {\n        precision = _defaultPrecision;\n      }\n      cpmStr = (bucket.max * granularityMultiplier).toFixed(precision);\n    } else if (cpm <= bucket.max * granularityMultiplier && cpm >= bucket.min * granularityMultiplier) {\n      return bucket;\n    }\n  });\n  if (bucket) {\n    cpmStr = getCpmTarget(cpm, bucket, granularityMultiplier);\n  }\n  return cpmStr;\n}\n\nfunction isValidPriceConfig(config) {\n  if (utils.isEmpty(config) || !config.buckets || !Array.isArray(config.buckets)) {\n    return false;\n  }\n  let isValid = true;\n  config.buckets.forEach(bucket => {\n    if (typeof bucket.min === 'undefined' || !bucket.max || !bucket.increment) {\n      isValid = false;\n    }\n  });\n  return isValid;\n}\n\nfunction getCpmTarget(cpm, bucket, granularityMultiplier) {\n  const precision = typeof bucket.precision !== 'undefined' ? bucket.precision : _defaultPrecision;\n  const increment = bucket.increment * granularityMultiplier;\n  const bucketMin = bucket.min * granularityMultiplier;\n\n  // start increments at the bucket min and then add bucket min back to arrive at the correct rounding\n  // note - we're padding the values to avoid using decimals in the math prior to flooring\n  // this is done as JS can return values slightly below the expected mark which would skew the price bucket target\n  //   (eg 4.01 / 0.01 = 400.99999999999994)\n  // min precison should be 2 to move decimal place over.\n  let pow = Math.pow(10, precision + 2);\n  let cpmToFloor = ((cpm * pow) - (bucketMin * pow)) / (increment * pow);\n  let cpmTarget = ((Math.floor(cpmToFloor)) * increment) + bucketMin;\n  // force to 10 decimal places to deal with imprecise decimal/binary conversions\n  //    (for example 0.1 * 3 = 0.30000000000000004)\n  cpmTarget = Number(cpmTarget.toFixed(10));\n  return cpmTarget.toFixed(precision);\n}\n\nexport { getPriceBucketString, isValidPriceConfig };\n\n\n\n// WEBPACK FOOTER //\n// ./src/cpmBucketManager.js","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.find.js\n// module id = 44\n// module chunks = 0","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-methods.js\n// module id = 45\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 46\n// module chunks = 0","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-species-create.js\n// module id = 47\n// module chunks = 0","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-species-constructor.js\n// module id = 48\n// module chunks = 0","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 49\n// module chunks = 0","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 50\n// module chunks = 0","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2019 Denis Pushkarev (zloirock.ru)'\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 51\n// module chunks = 0","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 52\n// module chunks = 0","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 53\n// module chunks = 0","create.SYNC = 1;\ncreate.ASYNC = 2;\ncreate.QUEUE = 4;\n\nvar packageName = \"fun-hooks\";\n\nvar hasProxy = typeof Proxy === \"function\";\n\nvar defaults = Object.freeze({\n  useProxy: hasProxy,\n  ready: 0\n});\n\nvar baseObj = Object.getPrototypeOf({});\n\n// detect incorrectly implemented reduce and if found use polyfill\n// https://github.com/prebid/Prebid.js/issues/3576\n// polyfill from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\nvar reduce =\n  [1]\n    .reduce(function(a, b, c) {\n      return [a, b, c];\n    }, 2)\n    .toString() === \"2,1,0\"\n    ? Array.prototype.reduce\n    : function(callback, initial) {\n        var o = Object(this);\n        var len = o.length >>> 0;\n        var k = 0;\n        var value;\n        if (initial) {\n          value = initial;\n        } else {\n          while (k < len && !(k in o)) {\n            k++;\n          }\n          value = o[k++];\n        }\n        while (k < len) {\n          if (k in o) {\n            value = callback(value, o[k], k, o);\n          }\n          k++;\n        }\n        return value;\n      };\n\n// detect incorrectly implemented bind and if found use polyfill\n// https://github.com/snapwich/fun-hooks/issues/1\nvar bind =\n  function(a, b) {\n    return b;\n  }.bind(null, 1, 4)() === 4\n    ? Function.prototype.bind\n    : function(bind) {\n        var self = this;\n        var args = rest(arguments, 1);\n        return function() {\n          return self.apply(bind, args.concat(rest(arguments)));\n        };\n      };\n\nfunction assign(target) {\n  return reduce.call(\n    rest(arguments, 1),\n    function(target, obj) {\n      if (obj) {\n        Object.keys(obj).forEach(function(prop) {\n          target[prop] = obj[prop];\n        });\n      }\n      return target;\n    },\n    target\n  );\n}\n\nfunction rest(args, skip) {\n  return Array.prototype.slice.call(args, skip);\n}\n\nfunction runAll(queue) {\n  var queued;\n  // eslint-disable-next-line no-cond-assign\n  while ((queued = queue.shift())) {\n    queued();\n  }\n}\n\nfunction create(config) {\n  var hooks = {};\n  var postReady = [];\n\n  config = assign({}, defaults, config);\n\n  function dispatch(arg1, arg2) {\n    if (typeof arg1 === \"function\") {\n      return hookFn.call(null, \"sync\", arg1, arg2);\n    } else if (typeof arg1 === \"string\" && typeof arg2 === \"function\") {\n      return hookFn.apply(null, arguments);\n    } else if (typeof arg1 === \"object\") {\n      return hookObj.apply(null, arguments);\n    }\n  }\n\n  var ready;\n  if (config.ready) {\n    dispatch.ready = function() {\n      ready = true;\n      runAll(postReady);\n    };\n  } else {\n    ready = true;\n  }\n\n  function hookObj(obj, props, objName) {\n    var walk = true;\n    if (typeof props === \"undefined\") {\n      props = Object.getOwnPropertyNames(obj);\n      walk = false;\n    }\n    var objHooks = {};\n    var doNotHook = [\"constructor\"];\n    do {\n      props = props.filter(function(prop) {\n        return (\n          typeof obj[prop] === \"function\" &&\n          !(doNotHook.indexOf(prop) !== -1) &&\n          !prop.match(/^_/)\n        );\n      });\n      props.forEach(function(prop) {\n        var parts = prop.split(\":\");\n        var name = parts[0];\n        var type = parts[1] || \"sync\";\n        if (!objHooks[name]) {\n          var fn = obj[name];\n          objHooks[name] = obj[name] = hookFn(\n            type,\n            fn,\n            objName ? [objName, name] : undefined\n          );\n        }\n      });\n      obj = Object.getPrototypeOf(obj);\n    } while (walk && obj !== baseObj);\n    return objHooks;\n  }\n\n  /**\n   * Navigates a string path to return a hookable function.  If not found, creates a placeholder for hooks.\n   * @param {(Array<string> | string)} path\n   */\n  function get(path) {\n    var parts = Array.isArray(path) ? path : path.split(\".\");\n    return reduce.call(\n      parts,\n      function(memo, part, i) {\n        var item = memo[part];\n        var installed = false;\n        if (item) {\n          return item;\n        } else if (i === parts.length - 1) {\n          if (!ready) {\n            postReady.push(function() {\n              if (!installed) {\n                // eslint-disable-next-line no-console\n                console.warn(\n                  packageName +\n                    \": referenced '\" +\n                    path +\n                    \"' but it was never created\"\n                );\n              }\n            });\n          }\n          return (memo[part] = newHookable(function(fn) {\n            memo[part] = fn;\n            installed = true;\n          }));\n        }\n        return (memo[part] = {});\n      },\n      hooks\n    );\n  }\n\n  function newHookable(onInstall) {\n    var before = [];\n    var after = [];\n    var generateTrap = function() {};\n\n    return {\n      __funHook: {\n        install: function(type, fn, generate) {\n          this.type = type;\n          this.fn = fn;\n          generateTrap = generate;\n          generate(before, after);\n          onInstall && onInstall(fn);\n        }\n      },\n      before: function(hook, priority) {\n        return add.call(this, before, \"before\", hook, priority);\n      },\n      after: function(hook, priority) {\n        return add.call(this, after, \"after\", hook, priority);\n      },\n      getHooks: function(match) {\n        var hooks = before.concat(after);\n        if (typeof match === \"object\") {\n          hooks = hooks.filter(function(entry) {\n            return Object.keys(match).every(function(prop) {\n              return entry[prop] === match[prop];\n            });\n          });\n        }\n        return assign(hooks, {\n          remove: function() {\n            hooks.forEach(function(entry) {\n              entry.remove();\n            });\n            return this;\n          }\n        });\n      },\n      removeAll: function() {\n        return this.getHooks().remove();\n      }\n    };\n\n    function add(store, type, hook, priority) {\n      var entry = {\n        hook: hook,\n        type: type,\n        priority: priority || 10,\n        remove: function() {\n          var index = store.indexOf(entry);\n          if (index !== -1) {\n            store.splice(index, 1);\n            generateTrap(before, after);\n          }\n        }\n      };\n      store.push(entry);\n      store.sort(function(a, b) {\n        return b.priority - a.priority;\n      });\n      generateTrap(before, after);\n      return this;\n    }\n  }\n\n  function hookFn(type, fn, name) {\n    if (fn.__funHook) {\n      if (fn.__funHook.type !== type) {\n        throw packageName + \": recreated hookable with different type\";\n      } else {\n        return fn.__funHook.fn;\n      }\n    }\n\n    var hookable = name ? get(name) : newHookable();\n\n    var trap;\n    var hookedFn;\n    var handlers = {\n      get: function(target, prop) {\n        return hookable[prop] || Reflect.get.apply(Reflect, arguments);\n      }\n    };\n\n    if (!ready) {\n      postReady.push(setTrap);\n    }\n\n    if (config.useProxy) {\n      hookedFn = new Proxy(fn, handlers);\n    } else {\n      hookedFn = function() {\n        return handlers.apply\n          ? handlers.apply(fn, this, rest(arguments))\n          : fn.apply(this, arguments);\n      };\n      assign(hookedFn, hookable);\n    }\n\n    hookable.__funHook.install(type, hookedFn, generateTrap);\n\n    return hookedFn;\n\n    function generateTrap(before, after) {\n      if (before.length || after.length) {\n        var code;\n        if (type === \"sync\") {\n          var beforeCode =\n            \"r=t.apply(h,\" + (before.length ? \"arguments\" : \"g\") + \")\";\n          var afterCode;\n          if (after.length) {\n            afterCode = chainHooks(after, \"a\", \"n(function extract(s){r=s},e)\");\n          }\n          if (before.length) {\n            beforeCode = chainHooks(\n              before,\n              \"b\",\n              \"n(function extract(){\" + beforeCode + \";\" + afterCode + \"},e)\"\n            );\n            afterCode = \"\";\n          }\n          code = [\n            \"var r,e={bail:function(a){r=a}}\",\n            beforeCode,\n            afterCode,\n            \"return r\"\n          ].join(\";\");\n        } else if (type === \"async\") {\n          code =\n            \"t.apply(h,\" +\n            (before.length\n              ? \"Array.prototype.slice.call(arguments)\" // if we're wrapped in partial, extract arguments\n              : \"g\") + // otherwise, we can just use passed in arguments\n            \".concat(\" +\n            chainHooks(after, \"a\", \"z?n(z,e):[]\") +\n            \"))\";\n          if (before.length) {\n            code = \"n(function partial(){\" + code + \"},e)\";\n          }\n          code = [\n            \"var z\",\n            'typeof g[g.length-1]===\"function\"&&(z=i.call(g.pop(),null))',\n            \"var e={bail:z}\",\n            chainHooks(before, \"b\", code)\n          ].join(\";\");\n        }\n        trap = bind.call(\n          new Function(\"i,b,a,n,t,h,g\", code),\n          null,\n          bind,\n          before,\n          after,\n          Object.assign || assign\n        );\n      } else {\n        trap = undefined;\n      }\n      setTrap();\n\n      function chainHooks(hooks, name, code) {\n        for (var i = hooks.length; i-- > 0; ) {\n          if (i === 0 && !(type === \"async\" && name === \"a\")) {\n            code =\n              name +\n              \"[\" +\n              i +\n              \"].hook.apply(h,[\" +\n              code +\n              (name === \"b\" ? \"].concat(g))\" : \",r])\");\n          } else {\n            code = \"i.call(\" + name + \"[\" + i + \"].hook, h,\" + code + \")\";\n            if (!(type === \"async\" && name === \"a\" && i === 0)) {\n              code = \"n(\" + code + \",e)\";\n            }\n          }\n        }\n        return code;\n      }\n    }\n\n    function setTrap() {\n      if (\n        ready ||\n        (type === \"sync\" && !(config.ready & create.SYNC)) ||\n        (type === \"async\" && !(config.ready & create.ASYNC))\n      ) {\n        handlers.apply = trap;\n      } else if (type === \"sync\" || !(config.ready & create.QUEUE)) {\n        handlers.apply = function() {\n          throw packageName + \": hooked function not ready\";\n        };\n      } else {\n        handlers.apply = function() {\n          var args = arguments;\n          postReady.push(function() {\n            hookedFn.apply(args[1], args[2]);\n          });\n        };\n      }\n    }\n  }\n\n  dispatch.get = get;\n  return dispatch;\n}\n\nmodule.exports = create;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fun-hooks/index.js\n// module id = 54\n// module chunks = 0","module.exports = clone;\n\n/*\n  Identical to `just-extend(true, {}, obj1)`\n\n  var arr = [1, 2, 3];\n  var subObj = {aa: 1};\n  var obj = {a: 3, b: 5, c: arr, d: subObj};\n  var objClone = clone(obj);\n  arr.push(4);\n  subObj.bb = 2;\n  obj; // {a: 3, b: 5, c: [1, 2, 3, 4], d: {aa: 1}}  \n  objClone; // {a: 3, b: 5, c: [1, 2, 3], d: {aa: 1, bb: 2}}\n*/\n\nfunction clone(obj) {\n  var result = Array.isArray(obj) ? [] : {};\n  for (var key in obj) {\n    // include prototype properties\n    var value = obj[key];\n    if (value && typeof value == 'object') {\n      result[key] = clone(value);\n    } else {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/just-clone/index.js\n// module id = 55\n// module chunks = 0","export default function Adapter(code) {\n  var bidderCode = code;\n\n  function setBidderCode(code) {\n    bidderCode = code;\n  }\n\n  function getBidderCode() {\n    return bidderCode;\n  }\n\n  function callBids() {\n  }\n\n  return {\n    callBids: callBids,\n    setBidderCode: setBidderCode,\n    getBidderCode: getBidderCode\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapter.js","import { config } from './config';\nimport {logWarn, isPlainObject, deepAccess, deepClone} from './utils';\nimport includes from 'core-js/library/fn/array/includes';\n\nlet sizeConfig = [];\n\n/**\n * @typedef {object} SizeConfig\n *\n * @property {string} [mediaQuery] A CSS media query string that will to be interpreted by window.matchMedia.  If the\n *  media query matches then the this config will be active and sizesSupported will filter bid and adUnit sizes.  If\n *  this property is not present then this SizeConfig will only be active if triggered manually by a call to\n *  pbjs.setConfig({labels:['label']) specifying one of the labels present on this SizeConfig.\n * @property {Array<Array>} sizesSupported The sizes to be accepted if this SizeConfig is enabled.\n * @property {Array<string>} labels The active labels to match this SizeConfig to an adUnits and/or bidders.\n */\n\n/**\n *\n * @param {Array<SizeConfig>} config\n */\nexport function setSizeConfig(config) {\n  sizeConfig = config;\n}\nconfig.getConfig('sizeConfig', config => setSizeConfig(config.sizeConfig));\n\n/**\n * Returns object describing the status of labels on the adUnit or bidder along with labels passed into requestBids\n * @param bidOrAdUnit the bidder or adUnit to get label info on\n * @param activeLabels the labels passed to requestBids\n * @returns {LabelDescriptor}\n */\nexport function getLabels(bidOrAdUnit, activeLabels) {\n  if (bidOrAdUnit.labelAll) {\n    return {labelAll: true, labels: bidOrAdUnit.labelAll, activeLabels};\n  }\n  return {labelAll: false, labels: bidOrAdUnit.labelAny, activeLabels};\n}\n\n/**\n * Determines whether a single size is valid given configured sizes\n * @param {Array} size [width, height]\n * @param {Array<SizeConfig>} configs\n * @returns {boolean}\n */\nexport function sizeSupported(size, configs = sizeConfig) {\n  let maps = evaluateSizeConfig(configs);\n  if (!maps.shouldFilter) {\n    return true;\n  }\n  return !!maps.sizesSupported[size];\n}\n\n/**\n * Resolves the unique set of the union of all sizes and labels that are active from a SizeConfig.mediaQuery match\n * @param {Array<string>} labels Labels specified on adUnit or bidder\n * @param {boolean} labelAll if true, all labels must match to be enabled\n * @param {Array<string>} activeLabels Labels passed in through requestBids\n * @param {object} mediaTypes A mediaTypes object describing the various media types (banner, video, native)\n * @param {Array<Array<number>>} sizes Sizes specified on adUnit (deprecated)\n * @param {Array<SizeConfig>} configs\n * @returns {{labels: Array<string>, sizes: Array<Array<number>>}}\n */\nexport function resolveStatus({labels = [], labelAll = false, activeLabels = []} = {}, mediaTypes, sizes, configs = sizeConfig) {\n  let maps = evaluateSizeConfig(configs);\n\n  if (!isPlainObject(mediaTypes)) {\n    // add support for deprecated adUnit.sizes by creating correct banner mediaTypes if they don't already exist\n    if (sizes) {\n      mediaTypes = {\n        banner: {\n          sizes\n        }\n      };\n    } else {\n      mediaTypes = {};\n    }\n  } else {\n    mediaTypes = deepClone(mediaTypes);\n  }\n\n  let oldSizes = deepAccess(mediaTypes, 'banner.sizes');\n  if (maps.shouldFilter && oldSizes) {\n    mediaTypes.banner.sizes = oldSizes.filter(size => maps.sizesSupported[size]);\n  }\n\n  let allMediaTypes = Object.keys(mediaTypes);\n\n  let results = {\n    active: (\n      allMediaTypes.length > 1 || (allMediaTypes.length === 1 && allMediaTypes[0] !== 'banner')\n    ) || (\n      allMediaTypes[0] === 'banner' && deepAccess(mediaTypes, 'banner.sizes.length') > 0 && (\n        labels.length === 0 || (\n          (!labelAll && (\n            labels.some(label => maps.labels[label]) ||\n            labels.some(label => includes(activeLabels, label))\n          )) ||\n          (labelAll && (\n            labels.reduce((result, label) => !result ? result : (\n              maps.labels[label] || includes(activeLabels, label)\n            ), true)\n          ))\n        )\n      )\n    ),\n    mediaTypes\n  };\n\n  if (oldSizes && oldSizes.length !== mediaTypes.banner.sizes.length) {\n    results.filterResults = {\n      before: oldSizes,\n      after: mediaTypes.banner.sizes\n    }\n  }\n\n  return results;\n}\n\nfunction evaluateSizeConfig(configs) {\n  return configs.reduce((results, config) => {\n    if (\n      typeof config === 'object' &&\n      typeof config.mediaQuery === 'string'\n    ) {\n      if (matchMedia(config.mediaQuery).matches) {\n        if (Array.isArray(config.sizesSupported)) {\n          results.shouldFilter = true;\n        }\n        ['labels', 'sizesSupported'].forEach(\n          type => (config[type] || []).forEach(\n            thing => results[type][thing] = true\n          )\n        );\n      }\n    } else {\n      logWarn('sizeConfig rule missing required property \"mediaQuery\"');\n    }\n    return results;\n  }, {\n    labels: {},\n    sizesSupported: {},\n    shouldFilter: false\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sizeMapping.js","import { deepAccess } from './utils';\n\nlet adUnits = {};\n\n/**\n * Increments and returns current Adunit counter\n * @param {string} adunit id\n * @returns {number} current adunit count\n */\nfunction incrementCounter(adunit) {\n  adUnits[adunit] = adUnits[adunit] || {};\n  adUnits[adunit].counter = (deepAccess(adUnits, `${adunit}.counter`) + 1) || 1;\n  return adUnits[adunit].counter;\n}\n\n/**\n * Returns current Adunit counter\n * @param {string} adunit id\n * @returns {number} current adunit count\n */\nfunction getCounter(adunit) {\n  return deepAccess(adUnits, `${adunit}.counter`) || 0;\n}\n\n/**\n * A module which counts how many times an adunit was called\n * @module adunitCounter\n */\nlet adunitCounter = {\n  incrementCounter,\n  getCounter\n}\n\nexport { adunitCounter };\n\n\n\n// WEBPACK FOOTER //\n// ./src/adUnits.js","/**\n * The referer detection module attempts to gather referer information from the current page that prebid.js resides in.\n * The information that it tries to collect includes:\n * The detected top url in the nav bar,\n * Whether it was able to reach the top most window (if for example it was embedded in several iframes),\n * The number of iframes it was embedded in if applicable,\n * A list of the domains of each embedded window if applicable.\n * Canonical URL which refers to an HTML link element, with the attribute of rel=\"canonical\", found in the <head> element of your webpage\n */\n\nimport { logWarn } from './utils';\n\nexport function detectReferer(win) {\n  /**\n   * Returns number of frames to reach top from current frame where prebid.js sits\n   * @returns {Array} levels\n   */\n  function getLevels() {\n    let levels = walkUpWindows();\n    let ancestors = getAncestorOrigins();\n\n    if (ancestors) {\n      for (let i = 0, l = ancestors.length; i < l; i++) {\n        levels[i].ancestor = ancestors[i];\n      }\n    }\n    return levels;\n  }\n\n  /**\n   * This function would return a read-only array of hostnames for all the parent frames.\n   * win.location.ancestorOrigins is only supported in webkit browsers. For non-webkit browsers it will return undefined.\n   * @returns {(undefined|Array)} Ancestor origins or undefined\n   */\n  function getAncestorOrigins() {\n    try {\n      if (!win.location.ancestorOrigins) {\n        return;\n      }\n      return win.location.ancestorOrigins;\n    } catch (e) {\n      // Ignore error\n    }\n  }\n\n  /**\n   * This function would try to get referer and urls for all parent frames in case of win.location.ancestorOrigins undefined.\n   * @param {Array} levels\n   * @returns {Object} urls for all parent frames and top most detected referer url\n   */\n  function getPubUrlStack(levels) {\n    let stack = [];\n    let defUrl = null;\n    let frameLocation = null;\n    let prevFrame = null;\n    let prevRef = null;\n    let ancestor = null;\n    let detectedRefererUrl = null;\n\n    let i;\n    for (i = levels.length - 1; i >= 0; i--) {\n      try {\n        frameLocation = levels[i].location;\n      } catch (e) {\n        // Ignore error\n      }\n\n      if (frameLocation) {\n        stack.push(frameLocation);\n        if (!detectedRefererUrl) {\n          detectedRefererUrl = frameLocation;\n        }\n      } else if (i !== 0) {\n        prevFrame = levels[i - 1];\n        try {\n          prevRef = prevFrame.referrer;\n          ancestor = prevFrame.ancestor;\n        } catch (e) {\n          // Ignore error\n        }\n\n        if (prevRef) {\n          stack.push(prevRef);\n          if (!detectedRefererUrl) {\n            detectedRefererUrl = prevRef;\n          }\n        } else if (ancestor) {\n          stack.push(ancestor);\n          if (!detectedRefererUrl) {\n            detectedRefererUrl = ancestor;\n          }\n        } else {\n          stack.push(defUrl);\n        }\n      } else {\n        stack.push(defUrl);\n      }\n    }\n    return {\n      stack,\n      detectedRefererUrl\n    };\n  }\n\n  /**\n   * This function returns canonical URL which refers to an HTML link element, with the attribute of rel=\"canonical\", found in the <head> element of your webpage\n   * @param {Object} doc document\n   */\n  function getCanonicalUrl(doc) {\n    try {\n      let element = doc.querySelector(\"link[rel='canonical']\");\n      if (element !== null) {\n        return element.href;\n      }\n    } catch (e) {\n    }\n    return null;\n  }\n\n  /**\n   * Walk up to the top of the window to detect origin, number of iframes, ancestor origins and canonical url\n   */\n  function walkUpWindows() {\n    let acc = [];\n    let currentWindow;\n    do {\n      try {\n        currentWindow = currentWindow ? currentWindow.parent : win;\n        try {\n          let isTop = (currentWindow == win.top);\n          let refData = {\n            referrer: currentWindow.document.referrer || null,\n            location: currentWindow.location.href || null,\n            isTop\n          }\n          if (isTop) {\n            refData = Object.assign(refData, {\n              canonicalUrl: getCanonicalUrl(currentWindow.document)\n            })\n          }\n          acc.push(refData);\n        } catch (e) {\n          acc.push({\n            referrer: null,\n            location: null,\n            isTop: (currentWindow == win.top)\n          });\n          logWarn('Trying to access cross domain iframe. Continuing without referrer and location');\n        }\n      } catch (e) {\n        acc.push({\n          referrer: null,\n          location: null,\n          isTop: false\n        });\n        return acc;\n      }\n    } while (currentWindow != win.top);\n    return acc;\n  }\n\n  /**\n   * Referer info\n   * @typedef {Object} refererInfo\n   * @property {string} referer detected top url\n   * @property {boolean} reachedTop whether prebid was able to walk upto top window or not\n   * @property {number} numIframes number of iframes\n   * @property {string} stack comma separated urls of all origins\n   * @property {string} canonicalUrl canonical URL refers to an HTML link element, with the attribute of rel=\"canonical\", found in the <head> element of your webpage\n   */\n\n  /**\n   * Get referer info\n   * @returns {refererInfo}\n   */\n  function refererInfo() {\n    try {\n      let levels = getLevels();\n      let numIframes = levels.length - 1;\n      let reachedTop = (levels[numIframes].location !== null ||\n        (numIframes > 0 && levels[numIframes - 1].referrer !== null));\n      let stackInfo = getPubUrlStack(levels);\n      let canonicalUrl;\n      if (levels[levels.length - 1].canonicalUrl) {\n        canonicalUrl = levels[levels.length - 1].canonicalUrl;\n      }\n\n      return {\n        referer: stackInfo.detectedRefererUrl,\n        reachedTop,\n        numIframes,\n        stack: stackInfo.stack,\n        canonicalUrl\n      };\n    } catch (e) {\n      // Ignore error\n    }\n  }\n\n  return refererInfo;\n}\n\nexport const getRefererInfo = detectReferer(window);\n\n\n\n// WEBPACK FOOTER //\n// ./src/refererDetection.js","var utils = require('./utils.js');\n\n/**\n Required paramaters\n bidderCode,\n height,\n width,\n statusCode\n Optional paramaters\n adId,\n cpm,\n ad,\n adUrl,\n dealId,\n priceKeyString;\n */\nfunction Bid(statusCode, bidRequest) {\n  var _bidSrc = (bidRequest && bidRequest.src) || 'client';\n  var _statusCode = statusCode || 0;\n\n  this.bidderCode = (bidRequest && bidRequest.bidder) || '';\n  this.width = 0;\n  this.height = 0;\n  this.statusMessage = _getStatus();\n  this.adId = utils.getUniqueIdentifierStr();\n  this.requestId = bidRequest && bidRequest.bidId;\n  this.mediaType = 'banner';\n  this.source = _bidSrc;\n\n  function _getStatus() {\n    switch (_statusCode) {\n      case 0:\n        return 'Pending';\n      case 1:\n        return 'Bid available';\n      case 2:\n        return 'Bid returned empty or error response';\n      case 3:\n        return 'Bid timed out';\n    }\n  }\n\n  this.getStatusCode = function () {\n    return _statusCode;\n  };\n\n  // returns the size of the bid creative. Concatenation of width and height by x.\n  this.getSize = function () {\n    return this.width + 'x' + this.height;\n  };\n}\n\n// Bid factory function.\nexport function createBid(statusCode, bidRequest) {\n  return new Bid(statusCode, bidRequest);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/bidfactory.js","import * as utils from './utils';\nimport { config } from './config';\nimport includes from 'core-js/library/fn/array/includes';\n\n// Set userSync default values\nconfig.setDefaults({\n  'userSync': {\n    syncEnabled: true,\n    pixelEnabled: true,\n    syncsPerBidder: 5,\n    syncDelay: 3000\n  }\n});\n\n/**\n * Factory function which creates a new UserSyncPool.\n *\n * @param {UserSyncDependencies} userSyncDependencies Configuration options and dependencies which the\n *   UserSync object needs in order to behave properly.\n */\nexport function newUserSync(userSyncDependencies) {\n  let publicApi = {};\n  // A queue of user syncs for each adapter\n  // Let getDefaultQueue() set the defaults\n  let queue = getDefaultQueue();\n\n  // Whether or not user syncs have been trigger on this page load\n  let hasFired = false;\n  // How many bids for each adapter\n  let numAdapterBids = {};\n\n  // for now - default both to false in case filterSettings config is absent/misconfigured\n  let permittedPixels = {\n    image: false,\n    iframe: false\n  }\n\n  // Use what is in config by default\n  let usConfig = userSyncDependencies.config;\n  // Update if it's (re)set\n  config.getConfig('userSync', (conf) => {\n    usConfig = Object.assign(usConfig, conf.userSync);\n  });\n\n  /**\n   * @function getDefaultQueue\n   * @summary Returns the default empty queue\n   * @private\n   * @return {object} A queue with no syncs\n   */\n  function getDefaultQueue() {\n    return {\n      image: [],\n      iframe: []\n    };\n  }\n\n  /**\n   * @function fireSyncs\n   * @summary Trigger all user syncs in the queue\n   * @private\n   */\n  function fireSyncs() {\n    if (!usConfig.syncEnabled || !userSyncDependencies.browserSupportsCookies || (!usConfig.enableOverride && hasFired)) {\n      return;\n    }\n\n    try {\n      // Image pixels\n      fireImagePixels();\n      // Iframe syncs\n      loadIframes();\n    } catch (e) {\n      return utils.logError('Error firing user syncs', e);\n    }\n    // Reset the user sync queue\n    queue = getDefaultQueue();\n    hasFired = true;\n  }\n\n  /**\n   * @function fireImagePixels\n   * @summary Loops through user sync pixels and fires each one\n   * @private\n   */\n  function fireImagePixels() {\n    if (!(usConfig.pixelEnabled || permittedPixels.image)) {\n      return;\n    }\n    // Randomize the order of the pixels before firing\n    // This is to avoid giving any bidder who has registered multiple syncs\n    // any preferential treatment and balancing them out\n    utils.shuffle(queue.image).forEach((sync) => {\n      let [bidderName, trackingPixelUrl] = sync;\n      utils.logMessage(`Invoking image pixel user sync for bidder: ${bidderName}`);\n      // Create image object and add the src url\n      utils.triggerPixel(trackingPixelUrl);\n    });\n  }\n\n  /**\n   * @function loadIframes\n   * @summary Loops through iframe syncs and loads an iframe element into the page\n   * @private\n   */\n  function loadIframes() {\n    if (!(usConfig.iframeEnabled || permittedPixels.iframe)) {\n      return;\n    }\n    // Randomize the order of these syncs just like the pixels above\n    utils.shuffle(queue.iframe).forEach((sync) => {\n      let [bidderName, iframeUrl] = sync;\n      utils.logMessage(`Invoking iframe user sync for bidder: ${bidderName}`);\n      // Insert iframe into DOM\n      utils.insertUserSyncIframe(iframeUrl);\n    });\n  }\n\n  /**\n   * @function incrementAdapterBids\n   * @summary Increment the count of user syncs queue for the adapter\n   * @private\n   * @params {object} numAdapterBids The object contain counts for all adapters\n   * @params {string} bidder The name of the bidder adding a sync\n   * @returns {object} The updated version of numAdapterBids\n   */\n  function incrementAdapterBids(numAdapterBids, bidder) {\n    if (!numAdapterBids[bidder]) {\n      numAdapterBids[bidder] = 1;\n    } else {\n      numAdapterBids[bidder] += 1;\n    }\n    return numAdapterBids;\n  }\n\n  /**\n   * @function registerSync\n   * @summary Add sync for this bidder to a queue to be fired later\n   * @public\n   * @params {string} type The type of the sync including image, iframe\n   * @params {string} bidder The name of the adapter. e.g. \"rubicon\"\n   * @params {string} url Either the pixel url or iframe url depending on the type\n\n   * @example <caption>Using Image Sync</caption>\n   * // registerSync(type, adapter, pixelUrl)\n   * userSync.registerSync('image', 'rubicon', 'http://example.com/pixel')\n   */\n  publicApi.registerSync = (type, bidder, url) => {\n    if (!usConfig.syncEnabled || !utils.isArray(queue[type])) {\n      return utils.logWarn(`User sync type \"${type}\" not supported`);\n    }\n    if (!bidder) {\n      return utils.logWarn(`Bidder is required for registering sync`);\n    }\n    if (usConfig.syncsPerBidder !== 0 && Number(numAdapterBids[bidder]) >= usConfig.syncsPerBidder) {\n      return utils.logWarn(`Number of user syncs exceeded for \"${bidder}\"`);\n    }\n\n    if (usConfig.filterSettings) {\n      if (shouldBidderBeBlocked(type, bidder)) {\n        return utils.logWarn(`Bidder '${bidder}' is not permitted to register their userSync ${type} pixels as per filterSettings config.`);\n      }\n      // TODO remove this else if code that supports deprecated fields (sometime in 2.x); for now - only run if filterSettings config is not present\n    } else if (usConfig.enabledBidders && usConfig.enabledBidders.length && usConfig.enabledBidders.indexOf(bidder) < 0) {\n      return utils.logWarn(`Bidder \"${bidder}\" not permitted to register their userSync pixels.`);\n    }\n\n    // the bidder's pixel has passed all checks and is allowed to register\n    queue[type].push([bidder, url]);\n    numAdapterBids = incrementAdapterBids(numAdapterBids, bidder);\n  };\n\n  /**\n   * @function shouldBidderBeBlocked\n   * @summary Check filterSettings logic to determine if the bidder should be prevented from registering their userSync tracker\n   * @private\n   * @param {string} type The type of the sync; either image or iframe\n   * @param {string} bidder The name of the adapter. e.g. \"rubicon\"\n   * @returns {boolean} true => bidder is not allowed to register; false => bidder can register\n    */\n  function shouldBidderBeBlocked(type, bidder) {\n    let filterConfig = usConfig.filterSettings;\n\n    // apply the filter check if the config object is there (eg filterSettings.iframe exists) and if the config object is properly setup\n    if (isFilterConfigValid(filterConfig, type)) {\n      permittedPixels[type] = true;\n\n      let activeConfig = (filterConfig.all) ? filterConfig.all : filterConfig[type];\n      let biddersToFilter = (activeConfig.bidders === '*') ? [bidder] : activeConfig.bidders;\n      let filterType = activeConfig.filter || 'include'; // set default if undefined\n\n      // return true if the bidder is either: not part of the include (ie outside the whitelist) or part of the exclude (ie inside the blacklist)\n      const checkForFiltering = {\n        'include': (bidders, bidder) => !includes(bidders, bidder),\n        'exclude': (bidders, bidder) => includes(bidders, bidder)\n      }\n      return checkForFiltering[filterType](biddersToFilter, bidder);\n    }\n    return false;\n  }\n\n  /**\n   * @function isFilterConfigValid\n   * @summary Check if the filterSettings object in the userSync config is setup properly\n   * @private\n   * @param {object} filterConfig sub-config object taken from filterSettings\n   * @param {string} type The type of the sync; either image or iframe\n   * @returns {boolean} true => config is setup correctly, false => setup incorrectly or filterConfig[type] is not present\n   */\n  function isFilterConfigValid(filterConfig, type) {\n    if (filterConfig.all && filterConfig[type]) {\n      utils.logWarn(`Detected presence of the \"filterSettings.all\" and \"filterSettings.${type}\" in userSync config.  You cannot mix \"all\" with \"iframe/image\" configs; they are mutually exclusive.`);\n      return false;\n    }\n\n    let activeConfig = (filterConfig.all) ? filterConfig.all : filterConfig[type];\n    let activeConfigName = (filterConfig.all) ? 'all' : type;\n\n    // if current pixel type isn't part of the config's logic, skip rest of the config checks...\n    // we return false to skip subsequent filter checks in shouldBidderBeBlocked() function\n    if (!activeConfig) {\n      return false;\n    }\n\n    let filterField = activeConfig.filter;\n    let biddersField = activeConfig.bidders;\n\n    if (filterField && filterField !== 'include' && filterField !== 'exclude') {\n      utils.logWarn(`UserSync \"filterSettings.${activeConfigName}.filter\" setting '${filterField}' is not a valid option; use either 'include' or 'exclude'.`);\n      return false;\n    }\n\n    if (biddersField !== '*' && !(Array.isArray(biddersField) && biddersField.length > 0 && biddersField.every(bidderInList => utils.isStr(bidderInList) && bidderInList !== '*'))) {\n      utils.logWarn(`Detected an invalid setup in userSync \"filterSettings.${activeConfigName}.bidders\"; use either '*' (to represent all bidders) or an array of bidders.`);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * @function syncUsers\n   * @summary Trigger all the user syncs based on publisher-defined timeout\n   * @public\n   * @params {int} timeout The delay in ms before syncing data - default 0\n   */\n  publicApi.syncUsers = (timeout = 0) => {\n    if (timeout) {\n      return setTimeout(fireSyncs, Number(timeout));\n    }\n    fireSyncs();\n  };\n\n  /**\n   * @function triggerUserSyncs\n   * @summary A `syncUsers` wrapper for determining if enableOverride has been turned on\n   * @public\n   */\n  publicApi.triggerUserSyncs = () => {\n    if (usConfig.enableOverride) {\n      publicApi.syncUsers();\n    }\n  };\n\n  return publicApi;\n}\n\nconst browserSupportsCookies = !utils.isSafariBrowser() && utils.cookiesAreEnabled();\n\nexport const userSync = newUserSync({\n  config: config.getConfig('userSync'),\n  browserSupportsCookies: browserSupportsCookies\n});\n\n/**\n * @typedef {Object} UserSyncDependencies\n *\n * @property {UserSyncConfig} config\n * @property {boolean} browserSupportsCookies True if the current browser supports cookies, and false otherwise.\n */\n\n/**\n * @typedef {Object} UserSyncConfig\n *\n * @property {boolean} enableOverride\n * @property {boolean} syncEnabled\n * @property {boolean} pixelEnabled\n * @property {boolean} iframeEnabled\n * @property {int} syncsPerBidder\n * @property {string[]} enabledBidders\n * @property {Object} filterSettings\n */\n\n\n\n// WEBPACK FOOTER //\n// ./src/userSync.js","import adapterManager from './adapterManager';\nimport { getBidRequest, deepAccess, logError } from './utils';\nimport { config } from '../src/config';\nimport includes from 'core-js/library/fn/array/includes';\nimport { hook } from './hook';\n\nconst VIDEO_MEDIA_TYPE = 'video';\nexport const OUTSTREAM = 'outstream';\n\n/**\n * Helper functions for working with video-enabled adUnits\n */\nexport const videoAdUnit = adUnit => {\n  const mediaType = adUnit.mediaType === VIDEO_MEDIA_TYPE;\n  const mediaTypes = deepAccess(adUnit, 'mediaTypes.video');\n  return mediaType || mediaTypes;\n};\nexport const videoBidder = bid => includes(adapterManager.videoAdapters, bid.bidder);\nexport const hasNonVideoBidder = adUnit =>\n  adUnit.bids.filter(bid => !videoBidder(bid)).length;\n\n/**\n * @typedef {object} VideoBid\n * @property {string} adId id of the bid\n */\n\n/**\n * Validate that the assets required for video context are present on the bid\n * @param {VideoBid} bid Video bid to validate\n * @param {BidRequest[]} bidRequests All bid requests for an auction\n * @return {Boolean} If object is valid\n */\nexport function isValidVideoBid(bid, bidRequests) {\n  const bidRequest = getBidRequest(bid.requestId, bidRequests);\n\n  const videoMediaType =\n    bidRequest && deepAccess(bidRequest, 'mediaTypes.video');\n  const context = videoMediaType && deepAccess(videoMediaType, 'context');\n\n  // if context not defined assume default 'instream' for video bids\n  // instream bids require a vast url or vast xml content\n  return checkVideoBidSetup(bid, bidRequest, videoMediaType, context);\n}\n\nexport const checkVideoBidSetup = hook('sync', function(bid, bidRequest, videoMediaType, context) {\n  if (!bidRequest || (videoMediaType && context !== OUTSTREAM)) {\n    // xml-only video bids require a prebid cache url\n    if (!config.getConfig('cache.url') && bid.vastXml && !bid.vastUrl) {\n      logError(`\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: \"...\"} });\n      `);\n      return false;\n    }\n\n    return !!(bid.vastUrl || bid.vastXml);\n  }\n\n  // outstream bids require a renderer on the bid or pub-defined on adunit\n  if (context === OUTSTREAM) {\n    return !!(bid.renderer || bidRequest.renderer);\n  }\n\n  return true;\n}, 'checkVideoBidSetup');\n\n\n\n// WEBPACK FOOTER //\n// ./src/video.js"],"sourceRoot":""}